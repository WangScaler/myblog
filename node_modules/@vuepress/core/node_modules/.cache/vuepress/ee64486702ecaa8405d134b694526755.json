{"remainingRequest":"D:\\mygithub\\myblog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mygithub\\myblog\\node_modules\\vue-canvas-effect\\src\\components\\bubbles\\bubbles.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\mygithub\\myblog\\node_modules\\vue-canvas-effect\\src\\components\\bubbles\\bubbles.vue","mtime":1517128974000},{"path":"D:\\mygithub\\myblog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mygithub\\myblog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\mygithub\\myblog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mygithub\\myblog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KCnJlcXVpcmUoJ2NvbXV0aWxzL2FuaW1hdGlvbkZyYW1lJykoKQppbXBvcnQgcmVzaXplIGZyb20gJy4uLy4uL3V0aWwvcmVzaXplJwpjb25zdCBjb3B5T2JqID0gcmVxdWlyZSgnY29tdXRpbHMvY29weU9iaicpCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2J1YmJsZXNFZmZlY3QnLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgY2lyY2xlczogW10sCiAgICAgIHJlcXVlc3RBbmlJZDogbnVsbAogICAgfQogIH0sCiAgcHJvcHM6IHsKICAgIG9wdGlvbnM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHt9CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBvcHRzICgpIHsKICAgICAgcmV0dXJuIGNvcHlPYmooe30sIHsKICAgICAgICBjb2xvcjogJ3JnYmEoMjI1LDIyNSwyMjUsMC41KScsCiAgICAgICAgcmFkaXVzOiAxNSwKICAgICAgICBkZW5zZXR5OiAwLjMsCiAgICAgICAgY2xlYXJPZmZzZXQ6IDAuMgogICAgICB9LCB0aGlzLm9wdGlvbnMpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByYW5kb21Db2xvciAoKSB7CiAgICAgIGxldCByID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU1KQogICAgICBsZXQgZyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NSkKICAgICAgbGV0IGIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTUpCiAgICAgIGxldCBhbHBoYSA9IE1hdGgucmFuZG9tKCkudG9QcmVjaXNpb24oMikKICAgICAgbGV0IHJnYmEgPSBgcmdiYSgke3J9LCAke2d9LCAke2J9LCAke2FscGhhfSlgCiAgICAgIHJldHVybiByZ2JhCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIGxldCB3aWR0aCwgaGVpZ2h0LCBjYW52YXMsIGN0eCwgY2lyY2xlcyA9IFtdLCBzZXR0aW5ncyA9IHRoaXMub3B0cywgdGhhdCA9IHRoaXMKICAgIGluaXRDb250YWluZXIoKQoKICAgIGZ1bmN0aW9uIGluaXRDb250YWluZXIgKCkgewogICAgICB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoCiAgICAgIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodAogICAgICBjYW52YXMgPSB0aGF0LiRyZWZzLmNhbnZhcwogICAgICBjYW52YXMud2lkdGggPSB3aWR0aAogICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0CiAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpCiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgd2lkdGggKiBzZXR0aW5ncy5kZW5zZXR5OyB4KyspIHsKICAgICAgICBsZXQgYyA9IG5ldyBDaXJjbGUoKQogICAgICAgIGNpcmNsZXMucHVzaChjKQogICAgICB9CiAgICAgIGFuaW1hdGUoKQogICAgfQoKICAgIGZ1bmN0aW9uIGFuaW1hdGUgKCkgewogICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShzZWxmLnJlcXVlc3RBbmlJZCkKICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KQogICAgICBmb3IgKGxldCBpIGluIGNpcmNsZXMpIHsKICAgICAgICBjaXJjbGVzW2ldLmRyYXcoKQogICAgICB9CiAgICAgIHNlbGYucmVxdWVzdEFuaUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpCiAgICB9CgogICAgZnVuY3Rpb24gQ2lyY2xlICgpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzCiAgICAgIHRoaXMucG9zID0ge30KICAgICAgaW5pdCgpCgogICAgICBmdW5jdGlvbiBpbml0ICgpIHsKICAgICAgICBzZWxmLnBvcy54ID0gTWF0aC5yYW5kb20oKSAqIHdpZHRoCiAgICAgICAgc2VsZi5wb3MueSA9IGhlaWdodCArIE1hdGgucmFuZG9tKCkgKiAxMDAKICAgICAgICBzZWxmLmFscGhhID0gMC4xICsgTWF0aC5yYW5kb20oKSAqIHNldHRpbmdzLmNsZWFyT2Zmc2V0CiAgICAgICAgc2VsZi5zY2FsZSA9IDAuMSArIE1hdGgucmFuZG9tKCkgKiAwLjMKICAgICAgICBzZWxmLnNwZWVkID0gTWF0aC5yYW5kb20oKQogICAgICAgIHNlbGYuY29sb3IgPSBzZXR0aW5ncy5jb2xvciA9PT0gJ3JhbmRvbScgPyB0aGF0LnJhbmRvbUNvbG9yKCkgOiBzZXR0aW5ncy5jb2xvcgogICAgICB9CgogICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHNlbGYuYWxwaGEgPD0gMCkgewogICAgICAgICAgaW5pdCgpOwogICAgICAgIH0KICAgICAgICBzZWxmLnBvcy55IC09IHNlbGYuc3BlZWQKICAgICAgICBzZWxmLmFscGhhIC09IDAuMDAwNQogICAgICAgIGN0eC5iZWdpblBhdGgoKQogICAgICAgIGN0eC5hcmMoc2VsZi5wb3MueCwgc2VsZi5wb3MueSwgc2VsZi5zY2FsZSAqIHNldHRpbmdzLnJhZGl1cywgMCwgMiAqIE1hdGguUEksIGZhbHNlKQogICAgICAgIGN0eC5maWxsU3R5bGUgPSBzZWxmLmNvbG9yCiAgICAgICAgY3R4LmZpbGwoKQogICAgICAgIGN0eC5jbG9zZVBhdGgoKQogICAgICB9OwogICAgfQoKICAgIHJlc2l6ZSgoKSA9PiB7CiAgICAgIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsKICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICB9KQogIH0sCiAgYmVmb3JlRGVzdHJveSAoKSB7CiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJlcXVlc3RBbmlJZCkKICB9Cn0K"},{"version":3,"sources":["bubbles.vue"],"names":[],"mappings":";;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bubbles.vue","sourceRoot":"node_modules/vue-canvas-effect/src/components/bubbles","sourcesContent":["<template>\r\n    <canvas ref=\"canvas\" style=\"position: absolute;top: 0;left: 0;\"></canvas>\r\n</template>\r\n<script>\r\n  require('comutils/animationFrame')()\r\n  import resize from '../../util/resize'\r\n  const copyObj = require('comutils/copyObj')\r\n\r\n  export default {\r\n    name: 'bubblesEffect',\r\n    data () {\r\n      return {\r\n        circles: [],\r\n        requestAniId: null\r\n      }\r\n    },\r\n    props: {\r\n      options: {\r\n        type: Object,\r\n        default: () => {\r\n          return {}\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      opts () {\r\n        return copyObj({}, {\r\n          color: 'rgba(225,225,225,0.5)',\r\n          radius: 15,\r\n          densety: 0.3,\r\n          clearOffset: 0.2\r\n        }, this.options)\r\n      }\r\n    },\r\n    methods: {\r\n      randomColor () {\r\n        let r = Math.floor(Math.random() * 255)\r\n        let g = Math.floor(Math.random() * 255)\r\n        let b = Math.floor(Math.random() * 255)\r\n        let alpha = Math.random().toPrecision(2)\r\n        let rgba = `rgba(${r}, ${g}, ${b}, ${alpha})`\r\n        return rgba\r\n      }\r\n    },\r\n    mounted () {\r\n      let width, height, canvas, ctx, circles = [], settings = this.opts, that = this\r\n      initContainer()\r\n\r\n      function initContainer () {\r\n        width = window.innerWidth\r\n        height = window.innerHeight\r\n        canvas = that.$refs.canvas\r\n        canvas.width = width\r\n        canvas.height = height\r\n        ctx = canvas.getContext('2d')\r\n        for (let x = 0; x < width * settings.densety; x++) {\r\n          let c = new Circle()\r\n          circles.push(c)\r\n        }\r\n        animate()\r\n      }\r\n\r\n      function animate () {\r\n        cancelAnimationFrame(self.requestAniId)\r\n        ctx.clearRect(0, 0, width, height)\r\n        for (let i in circles) {\r\n          circles[i].draw()\r\n        }\r\n        self.requestAniId = requestAnimationFrame(animate)\r\n      }\r\n\r\n      function Circle () {\r\n        var self = this\r\n        this.pos = {}\r\n        init()\r\n\r\n        function init () {\r\n          self.pos.x = Math.random() * width\r\n          self.pos.y = height + Math.random() * 100\r\n          self.alpha = 0.1 + Math.random() * settings.clearOffset\r\n          self.scale = 0.1 + Math.random() * 0.3\r\n          self.speed = Math.random()\r\n          self.color = settings.color === 'random' ? that.randomColor() : settings.color\r\n        }\r\n\r\n        this.draw = function () {\r\n          if (self.alpha <= 0) {\r\n            init();\r\n          }\r\n          self.pos.y -= self.speed\r\n          self.alpha -= 0.0005\r\n          ctx.beginPath()\r\n          ctx.arc(self.pos.x, self.pos.y, self.scale * settings.radius, 0, 2 * Math.PI, false)\r\n          ctx.fillStyle = self.color\r\n          ctx.fill()\r\n          ctx.closePath()\r\n        };\r\n      }\r\n\r\n      resize(() => {\r\n        width = window.innerWidth;\r\n        height = window.innerHeight;\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n      })\r\n    },\r\n    beforeDestroy () {\r\n      cancelAnimationFrame(this.requestAniId)\r\n    }\r\n  }\r\n</script>"]}]}