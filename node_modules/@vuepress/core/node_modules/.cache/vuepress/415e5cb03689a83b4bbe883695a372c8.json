{"remainingRequest":"D:\\mygithub\\mydocs\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\mygithub\\mydocs\\node_modules\\vuepress-plugin-helper-live2d\\libs\\live2d.js","dependencies":[{"path":"D:\\mygithub\\mydocs\\node_modules\\vuepress-plugin-helper-live2d\\libs\\live2d.js","mtime":499162500000},{"path":"D:\\mygithub\\mydocs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\mygithub\\mydocs\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZi5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LWJ1ZmZlci5jb25zdHJ1Y3Rvci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LWJ1ZmZlci5zbGljZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGEtdmlldy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1mbG9hdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWludC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5saW5rLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmxvYXQzMi1hcnJheS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZsb2F0NjQtYXJyYXkuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbnQ4LWFycmF5LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW50MTYtYXJyYXkuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbnQzMi1hcnJheS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnVpbnQ4LWFycmF5LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDE2LWFycmF5LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4uanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZi5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbi5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiKTsKCiFmdW5jdGlvbiAodCkgewogIC8vIOS/ruWkjU5vZGXlkIzmnoTku6PnoIHnmoTpl67popgKICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gInVuZGVmaW5lZCIpIHsKICAgIHJldHVybjsKICB9CgogIGZ1bmN0aW9uIGkocikgewogICAgaWYgKGVbcl0pIHJldHVybiBlW3JdLmV4cG9ydHM7CiAgICB2YXIgbyA9IGVbcl0gPSB7CiAgICAgIGk6IHIsCiAgICAgIGw6ICExLAogICAgICBleHBvcnRzOiB7fQogICAgfTsKICAgIHJldHVybiB0W3JdLmNhbGwoby5leHBvcnRzLCBvLCBvLmV4cG9ydHMsIGkpLCBvLmwgPSAhMCwgby5leHBvcnRzOwogIH0KCiAgdmFyIGUgPSB7fTsKICBpLm0gPSB0LCBpLmMgPSBlLCBpLmQgPSBmdW5jdGlvbiAodCwgZSwgcikgewogICAgaS5vKHQsIGUpIHx8IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7CiAgICAgIGNvbmZpZ3VyYWJsZTogITEsCiAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICBnZXQ6IHIKICAgIH0pOwogIH0sIGkubiA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgZSA9IHQgJiYgdC5fX2VzTW9kdWxlID8gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdFsiZGVmYXVsdCJdOwogICAgfSA6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHQ7CiAgICB9OwogICAgcmV0dXJuIGkuZChlLCAiYSIsIGUpLCBlOwogIH0sIGkubyA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGkpOwogIH0sIGkucCA9ICIiLCBpKGkucyA9IDQpOwp9KFtmdW5jdGlvbiAodCwgaSwgZSkgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gcigpIHsKICAgIHRoaXMubGl2ZTJETW9kZWwgPSBudWxsLCB0aGlzLm1vZGVsTWF0cml4ID0gbnVsbCwgdGhpcy5leWVCbGluayA9IG51bGwsIHRoaXMucGh5c2ljcyA9IG51bGwsIHRoaXMucG9zZSA9IG51bGwsIHRoaXMuZGVidWdNb2RlID0gITEsIHRoaXMuaW5pdGlhbGl6ZWQgPSAhMSwgdGhpcy51cGRhdGluZyA9ICExLCB0aGlzLmFscGhhID0gMSwgdGhpcy5hY2NBbHBoYSA9IDAsIHRoaXMubGlwU3luYyA9ICExLCB0aGlzLmxpcFN5bmNWYWx1ZSA9IDAsIHRoaXMuYWNjZWxYID0gMCwgdGhpcy5hY2NlbFkgPSAwLCB0aGlzLmFjY2VsWiA9IDAsIHRoaXMuZHJhZ1ggPSAwLCB0aGlzLmRyYWdZID0gMCwgdGhpcy5zdGFydFRpbWVNU2VjID0gbnVsbCwgdGhpcy5tYWluTW90aW9uTWFuYWdlciA9IG5ldyBoKCksIHRoaXMuZXhwcmVzc2lvbk1hbmFnZXIgPSBuZXcgaCgpLCB0aGlzLm1vdGlvbnMgPSB7fSwgdGhpcy5leHByZXNzaW9ucyA9IHt9LCB0aGlzLmlzVGV4TG9hZGVkID0gITE7CiAgfQoKICBmdW5jdGlvbiBvKCkgewogICAgQU1vdGlvbi5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5wYXJhbUxpc3QgPSBuZXcgQXJyYXkoKTsKICB9CgogIGZ1bmN0aW9uIG4oKSB7CiAgICB0aGlzLmlkID0gIiIsIHRoaXMudHlwZSA9IC0xLCB0aGlzLnZhbHVlID0gbnVsbDsKICB9CgogIGZ1bmN0aW9uIHMoKSB7CiAgICB0aGlzLm5leHRCbGlua1RpbWUgPSBudWxsLCB0aGlzLnN0YXRlU3RhcnRUaW1lID0gbnVsbCwgdGhpcy5ibGlua0ludGVydmFsTXNlYyA9IG51bGwsIHRoaXMuZXllU3RhdGUgPSBnLlNUQVRFX0ZJUlNULCB0aGlzLmJsaW5rSW50ZXJ2YWxNc2VjID0gNGUzLCB0aGlzLmNsb3NpbmdNb3Rpb25Nc2VjID0gMTAwLCB0aGlzLmNsb3NlZE1vdGlvbk1zZWMgPSA1MCwgdGhpcy5vcGVuaW5nTW90aW9uTXNlYyA9IDE1MCwgdGhpcy5jbG9zZUlmWmVybyA9ICEwLCB0aGlzLmV5ZUlEX0wgPSAiUEFSQU1fRVlFX0xfT1BFTiIsIHRoaXMuZXllSURfUiA9ICJQQVJBTV9FWUVfUl9PUEVOIjsKICB9CgogIGZ1bmN0aW9uIF8oKSB7CiAgICB0aGlzLnRyID0gbmV3IEZsb2F0MzJBcnJheSgxNiksIHRoaXMuaWRlbnRpdHkoKTsKICB9CgogIGZ1bmN0aW9uIGEodCwgaSkgewogICAgXy5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy53aWR0aCA9IHQsIHRoaXMuaGVpZ2h0ID0gaTsKICB9CgogIGZ1bmN0aW9uIGgoKSB7CiAgICBNb3Rpb25RdWV1ZU1hbmFnZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuY3VycmVudFByaW9yaXR5ID0gbnVsbCwgdGhpcy5yZXNlcnZlUHJpb3JpdHkgPSBudWxsLCB0aGlzWyJzdXBlciJdID0gTW90aW9uUXVldWVNYW5hZ2VyLnByb3RvdHlwZTsKICB9CgogIGZ1bmN0aW9uIGwoKSB7CiAgICB0aGlzLnBoeXNpY3NMaXN0ID0gbmV3IEFycmF5KCksIHRoaXMuc3RhcnRUaW1lTVNlYyA9IFV0U3lzdGVtLmdldFVzZXJUaW1lTVNlYygpOwogIH0KCiAgZnVuY3Rpb24gJCgpIHsKICAgIHRoaXMubGFzdFRpbWUgPSAwLCB0aGlzLmxhc3RNb2RlbCA9IG51bGwsIHRoaXMucGFydHNHcm91cHMgPSBuZXcgQXJyYXkoKTsKICB9CgogIGZ1bmN0aW9uIHUodCkgewogICAgdGhpcy5wYXJhbUluZGV4ID0gLTEsIHRoaXMucGFydHNJbmRleCA9IC0xLCB0aGlzLmxpbmsgPSBudWxsLCB0aGlzLmlkID0gdDsKICB9CgogIGZ1bmN0aW9uIHAoKSB7CiAgICB0aGlzLkVQU0lMT04gPSAuMDEsIHRoaXMuZmFjZVRhcmdldFggPSAwLCB0aGlzLmZhY2VUYXJnZXRZID0gMCwgdGhpcy5mYWNlWCA9IDAsIHRoaXMuZmFjZVkgPSAwLCB0aGlzLmZhY2VWWCA9IDAsIHRoaXMuZmFjZVZZID0gMCwgdGhpcy5sYXN0VGltZVNlYyA9IDA7CiAgfQoKICBmdW5jdGlvbiBmKCkgewogICAgXy5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5zY3JlZW5MZWZ0ID0gbnVsbCwgdGhpcy5zY3JlZW5SaWdodCA9IG51bGwsIHRoaXMuc2NyZWVuVG9wID0gbnVsbCwgdGhpcy5zY3JlZW5Cb3R0b20gPSBudWxsLCB0aGlzLm1heExlZnQgPSBudWxsLCB0aGlzLm1heFJpZ2h0ID0gbnVsbCwgdGhpcy5tYXhUb3AgPSBudWxsLCB0aGlzLm1heEJvdHRvbSA9IG51bGwsIHRoaXMubWF4ID0gTnVtYmVyLk1BWF9WQUxVRSwgdGhpcy5taW4gPSAwOwogIH0KCiAgZnVuY3Rpb24gYygpIHt9CgogIHZhciBkID0gMDsKICByLnByb3RvdHlwZS5nZXRNb2RlbE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLm1vZGVsTWF0cml4OwogIH0sIHIucHJvdG90eXBlLnNldEFscGhhID0gZnVuY3Rpb24gKHQpIHsKICAgIHQgPiAuOTk5ICYmICh0ID0gMSksIHQgPCAuMDAxICYmICh0ID0gMCksIHRoaXMuYWxwaGEgPSB0OwogIH0sIHIucHJvdG90eXBlLmdldEFscGhhID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuYWxwaGE7CiAgfSwgci5wcm90b3R5cGUuaXNJbml0aWFsaXplZCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmluaXRpYWxpemVkOwogIH0sIHIucHJvdG90eXBlLnNldEluaXRpYWxpemVkID0gZnVuY3Rpb24gKHQpIHsKICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0OwogIH0sIHIucHJvdG90eXBlLmlzVXBkYXRpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy51cGRhdGluZzsKICB9LCByLnByb3RvdHlwZS5zZXRVcGRhdGluZyA9IGZ1bmN0aW9uICh0KSB7CiAgICB0aGlzLnVwZGF0aW5nID0gdDsKICB9LCByLnByb3RvdHlwZS5nZXRMaXZlMkRNb2RlbCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmxpdmUyRE1vZGVsOwogIH0sIHIucHJvdG90eXBlLnNldExpcFN5bmMgPSBmdW5jdGlvbiAodCkgewogICAgdGhpcy5saXBTeW5jID0gdDsKICB9LCByLnByb3RvdHlwZS5zZXRMaXBTeW5jVmFsdWUgPSBmdW5jdGlvbiAodCkgewogICAgdGhpcy5saXBTeW5jVmFsdWUgPSB0OwogIH0sIHIucHJvdG90eXBlLnNldEFjY2VsID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgIHRoaXMuYWNjZWxYID0gdCwgdGhpcy5hY2NlbFkgPSBpLCB0aGlzLmFjY2VsWiA9IGU7CiAgfSwgci5wcm90b3R5cGUuc2V0RHJhZyA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICB0aGlzLmRyYWdYID0gdCwgdGhpcy5kcmFnWSA9IGk7CiAgfSwgci5wcm90b3R5cGUuZ2V0TWFpbk1vdGlvbk1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5tYWluTW90aW9uTWFuYWdlcjsKICB9LCByLnByb3RvdHlwZS5nZXRFeHByZXNzaW9uTWFuYWdlciA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb25NYW5hZ2VyOwogIH0sIHIucHJvdG90eXBlLmxvYWRNb2RlbERhdGEgPSBmdW5jdGlvbiAodCwgaSkgewogICAgdmFyIGUgPSBjLmdldFBsYXRmb3JtTWFuYWdlcigpOwogICAgdGhpcy5kZWJ1Z01vZGUgJiYgZS5sb2coIkxvYWQgbW9kZWwgOiAiICsgdCk7CiAgICB2YXIgciA9IHRoaXM7CiAgICBlLmxvYWRMaXZlMkRNb2RlbCh0LCBmdW5jdGlvbiAodCkgewogICAgICBpZiAoci5saXZlMkRNb2RlbCA9IHQsIHIubGl2ZTJETW9kZWwuc2F2ZVBhcmFtKCksIDAgIT0gTGl2ZTJELmdldEVycm9yKCkpIHJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoIkVycm9yIDogRmFpbGVkIHRvIGxvYWRNb2RlbERhdGEoKS4iKTsKICAgICAgci5tb2RlbE1hdHJpeCA9IG5ldyBhKHIubGl2ZTJETW9kZWwuZ2V0Q2FudmFzV2lkdGgoKSwgci5saXZlMkRNb2RlbC5nZXRDYW52YXNIZWlnaHQoKSksIHIubW9kZWxNYXRyaXguc2V0V2lkdGgoMiksIHIubW9kZWxNYXRyaXguc2V0Q2VudGVyUG9zaXRpb24oMCwgMCksIGkoci5saXZlMkRNb2RlbCk7CiAgICB9KTsKICB9LCByLnByb3RvdHlwZS5sb2FkVGV4dHVyZSA9IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICBkKys7CiAgICB2YXIgciA9IGMuZ2V0UGxhdGZvcm1NYW5hZ2VyKCk7CiAgICB0aGlzLmRlYnVnTW9kZSAmJiByLmxvZygiTG9hZCBUZXh0dXJlIDogIiArIGkpOwogICAgdmFyIG8gPSB0aGlzOwogICAgci5sb2FkVGV4dHVyZSh0aGlzLmxpdmUyRE1vZGVsLCB0LCBpLCBmdW5jdGlvbiAoKSB7CiAgICAgIGQtLSwgMCA9PSBkICYmIChvLmlzVGV4TG9hZGVkID0gITApLCAiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmIGUoKTsKICAgIH0pOwogIH0sIHIucHJvdG90eXBlLmxvYWRNb3Rpb24gPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgdmFyIHIgPSBjLmdldFBsYXRmb3JtTWFuYWdlcigpOwogICAgdGhpcy5kZWJ1Z01vZGUgJiYgci5sb2coIkxvYWQgTW90aW9uIDogIiArIGkpOwogICAgdmFyIG8gPSBudWxsLAogICAgICAgIG4gPSB0aGlzOwogICAgci5sb2FkQnl0ZXMoaSwgZnVuY3Rpb24gKGkpIHsKICAgICAgbyA9IExpdmUyRE1vdGlvbi5sb2FkTW90aW9uKGkpLCBudWxsICE9IHQgJiYgKG4ubW90aW9uc1t0XSA9IG8pLCBlKG8pOwogICAgfSk7CiAgfSwgci5wcm90b3R5cGUubG9hZEV4cHJlc3Npb24gPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgdmFyIHIgPSBjLmdldFBsYXRmb3JtTWFuYWdlcigpOwogICAgdGhpcy5kZWJ1Z01vZGUgJiYgci5sb2coIkxvYWQgRXhwcmVzc2lvbiA6ICIgKyBpKTsKICAgIHZhciBuID0gdGhpczsKICAgIHIubG9hZEJ5dGVzKGksIGZ1bmN0aW9uIChpKSB7CiAgICAgIG51bGwgIT0gdCAmJiAobi5leHByZXNzaW9uc1t0XSA9IG8ubG9hZEpzb24oaSkpLCAiZnVuY3Rpb24iID09IHR5cGVvZiBlICYmIGUoKTsKICAgIH0pOwogIH0sIHIucHJvdG90eXBlLmxvYWRQb3NlID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgIHZhciBlID0gYy5nZXRQbGF0Zm9ybU1hbmFnZXIoKTsKICAgIHRoaXMuZGVidWdNb2RlICYmIGUubG9nKCJMb2FkIFBvc2UgOiAiICsgdCk7CiAgICB2YXIgciA9IHRoaXM7CgogICAgdHJ5IHsKICAgICAgZS5sb2FkQnl0ZXModCwgZnVuY3Rpb24gKHQpIHsKICAgICAgICByLnBvc2UgPSAkLmxvYWQodCksICJmdW5jdGlvbiIgPT0gdHlwZW9mIGkgJiYgaSgpOwogICAgICB9KTsKICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgY29uc29sZS53YXJuKHQpOwogICAgfQogIH0sIHIucHJvdG90eXBlLmxvYWRQaHlzaWNzID0gZnVuY3Rpb24gKHQpIHsKICAgIHZhciBpID0gYy5nZXRQbGF0Zm9ybU1hbmFnZXIoKTsKICAgIHRoaXMuZGVidWdNb2RlICYmIGkubG9nKCJMb2FkIFBoeXNpY3MgOiAiICsgdCk7CiAgICB2YXIgZSA9IHRoaXM7CgogICAgdHJ5IHsKICAgICAgaS5sb2FkQnl0ZXModCwgZnVuY3Rpb24gKHQpIHsKICAgICAgICBlLnBoeXNpY3MgPSBsLmxvYWQodCk7CiAgICAgIH0pOwogICAgfSBjYXRjaCAodCkgewogICAgICBjb25zb2xlLndhcm4odCk7CiAgICB9CiAgfSwgci5wcm90b3R5cGUuaGl0VGVzdFNpbXBsZSA9IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICBpZiAobnVsbCA9PT0gdGhpcy5saXZlMkRNb2RlbCkgcmV0dXJuICExOwogICAgdmFyIHIgPSB0aGlzLmxpdmUyRE1vZGVsLmdldERyYXdEYXRhSW5kZXgodCk7CiAgICBpZiAociA8IDApIHJldHVybiAhMTsKCiAgICBmb3IgKHZhciBvID0gdGhpcy5saXZlMkRNb2RlbC5nZXRUcmFuc2Zvcm1lZFBvaW50cyhyKSwgbiA9IHRoaXMubGl2ZTJETW9kZWwuZ2V0Q2FudmFzV2lkdGgoKSwgcyA9IDAsIF8gPSB0aGlzLmxpdmUyRE1vZGVsLmdldENhbnZhc0hlaWdodCgpLCBhID0gMCwgaCA9IDA7IGggPCBvLmxlbmd0aDsgaCArPSAyKSB7CiAgICAgIHZhciBsID0gb1toXSwKICAgICAgICAgICQgPSBvW2ggKyAxXTsKICAgICAgbCA8IG4gJiYgKG4gPSBsKSwgbCA+IHMgJiYgKHMgPSBsKSwgJCA8IF8gJiYgKF8gPSAkKSwgJCA+IGEgJiYgKGEgPSAkKTsKICAgIH0KCiAgICB2YXIgdSA9IHRoaXMubW9kZWxNYXRyaXguaW52ZXJ0VHJhbnNmb3JtWChpKSwKICAgICAgICBwID0gdGhpcy5tb2RlbE1hdHJpeC5pbnZlcnRUcmFuc2Zvcm1ZKGUpOwogICAgcmV0dXJuIG4gPD0gdSAmJiB1IDw9IHMgJiYgXyA8PSBwICYmIHAgPD0gYTsKICB9LCByLnByb3RvdHlwZS5oaXRUZXN0U2ltcGxlQ3VzdG9tID0gZnVuY3Rpb24gKHQsIGksIGUsIHIpIHsKICAgIHJldHVybiBudWxsICE9PSB0aGlzLmxpdmUyRE1vZGVsICYmIGUgPj0gdFswXSAmJiBlIDw9IGlbMF0gJiYgciA8PSB0WzFdICYmIHIgPj0gaVsxXTsKICB9LCBvLnByb3RvdHlwZSA9IG5ldyBBTW90aW9uKCksIG8uRVhQUkVTU0lPTl9ERUZBVUxUID0gIkRFRkFVTFQiLCBvLlRZUEVfU0VUID0gMCwgby5UWVBFX0FERCA9IDEsIG8uVFlQRV9NVUxUID0gMiwgby5sb2FkSnNvbiA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgaSA9IG5ldyBvKCksCiAgICAgICAgZSA9IGMuZ2V0UGxhdGZvcm1NYW5hZ2VyKCksCiAgICAgICAgciA9IGUuanNvblBhcnNlRnJvbUJ5dGVzKHQpOwogICAgaWYgKGkuc2V0RmFkZUluKHBhcnNlSW50KHIuZmFkZV9pbikgPiAwID8gcGFyc2VJbnQoci5mYWRlX2luKSA6IDFlMyksIGkuc2V0RmFkZU91dChwYXJzZUludChyLmZhZGVfb3V0KSA+IDAgPyBwYXJzZUludChyLmZhZGVfb3V0KSA6IDFlMyksIG51bGwgPT0gci5wYXJhbXMpIHJldHVybiBpOwogICAgdmFyIHMgPSByLnBhcmFtcywKICAgICAgICBfID0gcy5sZW5ndGg7CiAgICBpLnBhcmFtTGlzdCA9IFtdOwoKICAgIGZvciAodmFyIGEgPSAwOyBhIDwgXzsgYSsrKSB7CiAgICAgIHZhciBoID0gc1thXSwKICAgICAgICAgIGwgPSBoLmlkLnRvU3RyaW5nKCksCiAgICAgICAgICAkID0gcGFyc2VGbG9hdChoLnZhbCksCiAgICAgICAgICB1ID0gby5UWVBFX0FERCwKICAgICAgICAgIHAgPSBudWxsICE9IGguY2FsYyA/IGguY2FsYy50b1N0cmluZygpIDogImFkZCI7CgogICAgICBpZiAoKHUgPSAiYWRkIiA9PT0gcCA/IG8uVFlQRV9BREQgOiAibXVsdCIgPT09IHAgPyBvLlRZUEVfTVVMVCA6ICJzZXQiID09PSBwID8gby5UWVBFX1NFVCA6IG8uVFlQRV9BREQpID09IG8uVFlQRV9BREQpIHsKICAgICAgICB2YXIgZiA9IG51bGwgPT0gaC5kZWYgPyAwIDogcGFyc2VGbG9hdChoLmRlZik7CiAgICAgICAgJCAtPSBmOwogICAgICB9IGVsc2UgaWYgKHUgPT0gby5UWVBFX01VTFQpIHsKICAgICAgICB2YXIgZiA9IG51bGwgPT0gaC5kZWYgPyAxIDogcGFyc2VGbG9hdChoLmRlZik7CiAgICAgICAgMCA9PSBmICYmIChmID0gMSksICQgLz0gZjsKICAgICAgfQoKICAgICAgdmFyIGQgPSBuZXcgbigpOwogICAgICBkLmlkID0gbCwgZC50eXBlID0gdSwgZC52YWx1ZSA9ICQsIGkucGFyYW1MaXN0LnB1c2goZCk7CiAgICB9CgogICAgcmV0dXJuIGk7CiAgfSwgby5wcm90b3R5cGUudXBkYXRlUGFyYW1FeGUgPSBmdW5jdGlvbiAodCwgaSwgZSwgcikgewogICAgZm9yICh2YXIgbiA9IHRoaXMucGFyYW1MaXN0Lmxlbmd0aCAtIDE7IG4gPj0gMDsgLS1uKSB7CiAgICAgIHZhciBzID0gdGhpcy5wYXJhbUxpc3Rbbl07CiAgICAgIHMudHlwZSA9PSBvLlRZUEVfQUREID8gdC5hZGRUb1BhcmFtRmxvYXQocy5pZCwgcy52YWx1ZSwgZSkgOiBzLnR5cGUgPT0gby5UWVBFX01VTFQgPyB0Lm11bHRQYXJhbUZsb2F0KHMuaWQsIHMudmFsdWUsIGUpIDogcy50eXBlID09IG8uVFlQRV9TRVQgJiYgdC5zZXRQYXJhbUZsb2F0KHMuaWQsIHMudmFsdWUsIGUpOwogICAgfQogIH0sIHMucHJvdG90eXBlLmNhbGNOZXh0QmxpbmsgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gVXRTeXN0ZW0uZ2V0VXNlclRpbWVNU2VjKCkgKyBNYXRoLnJhbmRvbSgpICogKDIgKiB0aGlzLmJsaW5rSW50ZXJ2YWxNc2VjIC0gMSk7CiAgfSwgcy5wcm90b3R5cGUuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbiAodCkgewogICAgdGhpcy5ibGlua0ludGVydmFsTXNlYyA9IHQ7CiAgfSwgcy5wcm90b3R5cGUuc2V0RXllTW90aW9uID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgIHRoaXMuY2xvc2luZ01vdGlvbk1zZWMgPSB0LCB0aGlzLmNsb3NlZE1vdGlvbk1zZWMgPSBpLCB0aGlzLm9wZW5pbmdNb3Rpb25Nc2VjID0gZTsKICB9LCBzLnByb3RvdHlwZS51cGRhdGVQYXJhbSA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgaSwKICAgICAgICBlID0gVXRTeXN0ZW0uZ2V0VXNlclRpbWVNU2VjKCksCiAgICAgICAgciA9IDA7CgogICAgc3dpdGNoICh0aGlzLmV5ZVN0YXRlKSB7CiAgICAgIGNhc2UgZy5TVEFURV9DTE9TSU5HOgogICAgICAgIHIgPSAoZSAtIHRoaXMuc3RhdGVTdGFydFRpbWUpIC8gdGhpcy5jbG9zaW5nTW90aW9uTXNlYywgciA+PSAxICYmIChyID0gMSwgdGhpcy5leWVTdGF0ZSA9IGcuU1RBVEVfQ0xPU0VELCB0aGlzLnN0YXRlU3RhcnRUaW1lID0gZSksIGkgPSAxIC0gcjsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgZy5TVEFURV9DTE9TRUQ6CiAgICAgICAgciA9IChlIC0gdGhpcy5zdGF0ZVN0YXJ0VGltZSkgLyB0aGlzLmNsb3NlZE1vdGlvbk1zZWMsIHIgPj0gMSAmJiAodGhpcy5leWVTdGF0ZSA9IGcuU1RBVEVfT1BFTklORywgdGhpcy5zdGF0ZVN0YXJ0VGltZSA9IGUpLCBpID0gMDsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgZy5TVEFURV9PUEVOSU5HOgogICAgICAgIHIgPSAoZSAtIHRoaXMuc3RhdGVTdGFydFRpbWUpIC8gdGhpcy5vcGVuaW5nTW90aW9uTXNlYywgciA+PSAxICYmIChyID0gMSwgdGhpcy5leWVTdGF0ZSA9IGcuU1RBVEVfSU5URVJWQUwsIHRoaXMubmV4dEJsaW5rVGltZSA9IHRoaXMuY2FsY05leHRCbGluaygpKSwgaSA9IHI7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIGcuU1RBVEVfSU5URVJWQUw6CiAgICAgICAgdGhpcy5uZXh0QmxpbmtUaW1lIDwgZSAmJiAodGhpcy5leWVTdGF0ZSA9IGcuU1RBVEVfQ0xPU0lORywgdGhpcy5zdGF0ZVN0YXJ0VGltZSA9IGUpLCBpID0gMTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgZy5TVEFURV9GSVJTVDoKICAgICAgZGVmYXVsdDoKICAgICAgICB0aGlzLmV5ZVN0YXRlID0gZy5TVEFURV9JTlRFUlZBTCwgdGhpcy5uZXh0QmxpbmtUaW1lID0gdGhpcy5jYWxjTmV4dEJsaW5rKCksIGkgPSAxOwogICAgfQoKICAgIHRoaXMuY2xvc2VJZlplcm8gfHwgKGkgPSAtaSksIHQuc2V0UGFyYW1GbG9hdCh0aGlzLmV5ZUlEX0wsIGkpLCB0LnNldFBhcmFtRmxvYXQodGhpcy5leWVJRF9SLCBpKTsKICB9OwoKICB2YXIgZyA9IGZ1bmN0aW9uIGcoKSB7fTsKCiAgZy5TVEFURV9GSVJTVCA9ICJTVEFURV9GSVJTVCIsIGcuU1RBVEVfSU5URVJWQUwgPSAiU1RBVEVfSU5URVJWQUwiLCBnLlNUQVRFX0NMT1NJTkcgPSAiU1RBVEVfQ0xPU0lORyIsIGcuU1RBVEVfQ0xPU0VEID0gIlNUQVRFX0NMT1NFRCIsIGcuU1RBVEVfT1BFTklORyA9ICJTVEFURV9PUEVOSU5HIiwgXy5tdWwgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgdmFyIHIsCiAgICAgICAgbywKICAgICAgICBuLAogICAgICAgIHMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07CgogICAgZm9yIChyID0gMDsgciA8IDQ7IHIrKykgewogICAgICBmb3IgKG8gPSAwOyBvIDwgNDsgbysrKSB7CiAgICAgICAgZm9yIChuID0gMDsgbiA8IDQ7IG4rKykgewogICAgICAgICAgc1tyICsgNCAqIG9dICs9IHRbciArIDQgKiBuXSAqIGlbbiArIDQgKiBvXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKHIgPSAwOyByIDwgMTY7IHIrKykgewogICAgICBlW3JdID0gc1tyXTsKICAgIH0KICB9LCBfLnByb3RvdHlwZS5pZGVudGl0eSA9IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIHQgPSAwOyB0IDwgMTY7IHQrKykgewogICAgICB0aGlzLnRyW3RdID0gdCAlIDUgPT0gMCA/IDEgOiAwOwogICAgfQogIH0sIF8ucHJvdG90eXBlLmdldEFycmF5ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMudHI7CiAgfSwgXy5wcm90b3R5cGUuZ2V0Q29weU1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHRoaXMudHIpOwogIH0sIF8ucHJvdG90eXBlLnNldE1hdHJpeCA9IGZ1bmN0aW9uICh0KSB7CiAgICBpZiAobnVsbCAhPSB0aGlzLnRyICYmIHRoaXMudHIubGVuZ3RoID09IHRoaXMudHIubGVuZ3RoKSBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHsKICAgICAgdGhpcy50cltpXSA9IHRbaV07CiAgICB9CiAgfSwgXy5wcm90b3R5cGUuZ2V0U2NhbGVYID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMudHJbMF07CiAgfSwgXy5wcm90b3R5cGUuZ2V0U2NhbGVZID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMudHJbNV07CiAgfSwgXy5wcm90b3R5cGUudHJhbnNmb3JtWCA9IGZ1bmN0aW9uICh0KSB7CiAgICByZXR1cm4gdGhpcy50clswXSAqIHQgKyB0aGlzLnRyWzEyXTsKICB9LCBfLnByb3RvdHlwZS50cmFuc2Zvcm1ZID0gZnVuY3Rpb24gKHQpIHsKICAgIHJldHVybiB0aGlzLnRyWzVdICogdCArIHRoaXMudHJbMTNdOwogIH0sIF8ucHJvdG90eXBlLmludmVydFRyYW5zZm9ybVggPSBmdW5jdGlvbiAodCkgewogICAgcmV0dXJuICh0IC0gdGhpcy50clsxMl0pIC8gdGhpcy50clswXTsKICB9LCBfLnByb3RvdHlwZS5pbnZlcnRUcmFuc2Zvcm1ZID0gZnVuY3Rpb24gKHQpIHsKICAgIHJldHVybiAodCAtIHRoaXMudHJbMTNdKSAvIHRoaXMudHJbNV07CiAgfSwgXy5wcm90b3R5cGUubXVsdFRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICB2YXIgZSA9IFsxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCB0LCBpLCAwLCAxXTsKCiAgICBfLm11bChlLCB0aGlzLnRyLCB0aGlzLnRyKTsKICB9LCBfLnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiAodCwgaSkgewogICAgdGhpcy50clsxMl0gPSB0LCB0aGlzLnRyWzEzXSA9IGk7CiAgfSwgXy5wcm90b3R5cGUudHJhbnNsYXRlWCA9IGZ1bmN0aW9uICh0KSB7CiAgICB0aGlzLnRyWzEyXSA9IHQ7CiAgfSwgXy5wcm90b3R5cGUudHJhbnNsYXRlWSA9IGZ1bmN0aW9uICh0KSB7CiAgICB0aGlzLnRyWzEzXSA9IHQ7CiAgfSwgXy5wcm90b3R5cGUubXVsdFNjYWxlID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgIHZhciBlID0gW3QsIDAsIDAsIDAsIDAsIGksIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDFdOwoKICAgIF8ubXVsKGUsIHRoaXMudHIsIHRoaXMudHIpOwogIH0sIF8ucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgIHRoaXMudHJbMF0gPSB0LCB0aGlzLnRyWzVdID0gaTsKICB9LCBhLnByb3RvdHlwZSA9IG5ldyBfKCksIGEucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgIHRoaXMudHJhbnNsYXRlKHQsIGkpOwogIH0sIGEucHJvdG90eXBlLnNldENlbnRlclBvc2l0aW9uID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgIHZhciBlID0gdGhpcy53aWR0aCAqIHRoaXMuZ2V0U2NhbGVYKCksCiAgICAgICAgciA9IHRoaXMuaGVpZ2h0ICogdGhpcy5nZXRTY2FsZVkoKTsKICAgIHRoaXMudHJhbnNsYXRlKHQgLSBlIC8gMiwgaSAtIHIgLyAyKTsKICB9LCBhLnByb3RvdHlwZS50b3AgPSBmdW5jdGlvbiAodCkgewogICAgdGhpcy5zZXRZKHQpOwogIH0sIGEucHJvdG90eXBlLmJvdHRvbSA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgaSA9IHRoaXMuaGVpZ2h0ICogdGhpcy5nZXRTY2FsZVkoKTsKICAgIHRoaXMudHJhbnNsYXRlWSh0IC0gaSk7CiAgfSwgYS5wcm90b3R5cGUubGVmdCA9IGZ1bmN0aW9uICh0KSB7CiAgICB0aGlzLnNldFgodCk7CiAgfSwgYS5wcm90b3R5cGUucmlnaHQgPSBmdW5jdGlvbiAodCkgewogICAgdmFyIGkgPSB0aGlzLndpZHRoICogdGhpcy5nZXRTY2FsZVgoKTsKICAgIHRoaXMudHJhbnNsYXRlWCh0IC0gaSk7CiAgfSwgYS5wcm90b3R5cGUuY2VudGVyWCA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgaSA9IHRoaXMud2lkdGggKiB0aGlzLmdldFNjYWxlWCgpOwogICAgdGhpcy50cmFuc2xhdGVYKHQgLSBpIC8gMik7CiAgfSwgYS5wcm90b3R5cGUuY2VudGVyWSA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgaSA9IHRoaXMuaGVpZ2h0ICogdGhpcy5nZXRTY2FsZVkoKTsKICAgIHRoaXMudHJhbnNsYXRlWSh0IC0gaSAvIDIpOwogIH0sIGEucHJvdG90eXBlLnNldFggPSBmdW5jdGlvbiAodCkgewogICAgdGhpcy50cmFuc2xhdGVYKHQpOwogIH0sIGEucHJvdG90eXBlLnNldFkgPSBmdW5jdGlvbiAodCkgewogICAgdGhpcy50cmFuc2xhdGVZKHQpOwogIH0sIGEucHJvdG90eXBlLnNldEhlaWdodCA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgaSA9IHQgLyB0aGlzLmhlaWdodCwKICAgICAgICBlID0gLWk7CiAgICB0aGlzLnNjYWxlKGksIGUpOwogIH0sIGEucHJvdG90eXBlLnNldFdpZHRoID0gZnVuY3Rpb24gKHQpIHsKICAgIHZhciBpID0gdCAvIHRoaXMud2lkdGgsCiAgICAgICAgZSA9IC1pOwogICAgdGhpcy5zY2FsZShpLCBlKTsKICB9LCBoLnByb3RvdHlwZSA9IG5ldyBNb3Rpb25RdWV1ZU1hbmFnZXIoKSwgaC5wcm90b3R5cGUuZ2V0Q3VycmVudFByaW9yaXR5ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuY3VycmVudFByaW9yaXR5OwogIH0sIGgucHJvdG90eXBlLmdldFJlc2VydmVQcmlvcml0eSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLnJlc2VydmVQcmlvcml0eTsKICB9LCBoLnByb3RvdHlwZS5yZXNlcnZlTW90aW9uID0gZnVuY3Rpb24gKHQpIHsKICAgIHJldHVybiAhKHRoaXMucmVzZXJ2ZVByaW9yaXR5ID49IHQpICYmICEodGhpcy5jdXJyZW50UHJpb3JpdHkgPj0gdCkgJiYgKHRoaXMucmVzZXJ2ZVByaW9yaXR5ID0gdCwgITApOwogIH0sIGgucHJvdG90eXBlLnNldFJlc2VydmVQcmlvcml0eSA9IGZ1bmN0aW9uICh0KSB7CiAgICB0aGlzLnJlc2VydmVQcmlvcml0eSA9IHQ7CiAgfSwgaC5wcm90b3R5cGUudXBkYXRlUGFyYW0gPSBmdW5jdGlvbiAodCkgewogICAgdmFyIGkgPSBNb3Rpb25RdWV1ZU1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZVBhcmFtLmNhbGwodGhpcywgdCk7CiAgICByZXR1cm4gdGhpcy5pc0ZpbmlzaGVkKCkgJiYgKHRoaXMuY3VycmVudFByaW9yaXR5ID0gMCksIGk7CiAgfSwgaC5wcm90b3R5cGUuc3RhcnRNb3Rpb25QcmlvID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgIHJldHVybiBpID09IHRoaXMucmVzZXJ2ZVByaW9yaXR5ICYmICh0aGlzLnJlc2VydmVQcmlvcml0eSA9IDApLCB0aGlzLmN1cnJlbnRQcmlvcml0eSA9IGksIHRoaXMuc3RhcnRNb3Rpb24odCwgITEpOwogIH0sIGwubG9hZCA9IGZ1bmN0aW9uICh0KSB7CiAgICBmb3IgKHZhciBpID0gbmV3IGwoKSwgZSA9IGMuZ2V0UGxhdGZvcm1NYW5hZ2VyKCksIHIgPSBlLmpzb25QYXJzZUZyb21CeXRlcyh0KSwgbyA9IHIucGh5c2ljc19oYWlyLCBuID0gby5sZW5ndGgsIHMgPSAwOyBzIDwgbjsgcysrKSB7CiAgICAgIHZhciBfID0gb1tzXSwKICAgICAgICAgIGEgPSBuZXcgUGh5c2ljc0hhaXIoKSwKICAgICAgICAgIGggPSBfLnNldHVwLAogICAgICAgICAgJCA9IHBhcnNlRmxvYXQoaC5sZW5ndGgpLAogICAgICAgICAgdSA9IHBhcnNlRmxvYXQoaC5yZWdpc3QpLAogICAgICAgICAgcCA9IHBhcnNlRmxvYXQoaC5tYXNzKTsKICAgICAgYS5zZXR1cCgkLCB1LCBwKTsKCiAgICAgIGZvciAodmFyIGYgPSBfLnNyYywgZCA9IGYubGVuZ3RoLCBnID0gMDsgZyA8IGQ7IGcrKykgewogICAgICAgIHZhciB5ID0gZltnXSwKICAgICAgICAgICAgbSA9IHkuaWQsCiAgICAgICAgICAgIFQgPSBQaHlzaWNzSGFpci5TcmMuU1JDX1RPX1gsCiAgICAgICAgICAgIFAgPSB5LnB0eXBlOwogICAgICAgICJ4IiA9PT0gUCA/IFQgPSBQaHlzaWNzSGFpci5TcmMuU1JDX1RPX1ggOiAieSIgPT09IFAgPyBUID0gUGh5c2ljc0hhaXIuU3JjLlNSQ19UT19ZIDogImFuZ2xlIiA9PT0gUCA/IFQgPSBQaHlzaWNzSGFpci5TcmMuU1JDX1RPX0dfQU5HTEUgOiBVdERlYnVnLmVycm9yKCJsaXZlMmQiLCAiSW52YWxpZCBwYXJhbWV0ZXI6UGh5c2ljc0hhaXIuU3JjIik7CiAgICAgICAgdmFyIFMgPSBwYXJzZUZsb2F0KHkuc2NhbGUpLAogICAgICAgICAgICB2ID0gcGFyc2VGbG9hdCh5LndlaWdodCk7CiAgICAgICAgYS5hZGRTcmNQYXJhbShULCBtLCBTLCB2KTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgTCA9IF8udGFyZ2V0cywgTSA9IEwubGVuZ3RoLCBnID0gMDsgZyA8IE07IGcrKykgewogICAgICAgIHZhciBFID0gTFtnXSwKICAgICAgICAgICAgbSA9IEUuaWQsCiAgICAgICAgICAgIFQgPSBQaHlzaWNzSGFpci5UYXJnZXQuVEFSR0VUX0ZST01fQU5HTEUsCiAgICAgICAgICAgIFAgPSBFLnB0eXBlOwogICAgICAgICJhbmdsZSIgPT09IFAgPyBUID0gUGh5c2ljc0hhaXIuVGFyZ2V0LlRBUkdFVF9GUk9NX0FOR0xFIDogImFuZ2xlX3YiID09PSBQID8gVCA9IFBoeXNpY3NIYWlyLlRhcmdldC5UQVJHRVRfRlJPTV9BTkdMRV9WIDogVXREZWJ1Zy5lcnJvcigibGl2ZTJkIiwgIkludmFsaWQgcGFyYW1ldGVyOlBoeXNpY3NIYWlyLlRhcmdldCIpOwogICAgICAgIHZhciBTID0gcGFyc2VGbG9hdChFLnNjYWxlKSwKICAgICAgICAgICAgdiA9IHBhcnNlRmxvYXQoRS53ZWlnaHQpOwogICAgICAgIGEuYWRkVGFyZ2V0UGFyYW0oVCwgbSwgUywgdik7CiAgICAgIH0KCiAgICAgIGkucGh5c2ljc0xpc3QucHVzaChhKTsKICAgIH0KCiAgICByZXR1cm4gaTsKICB9LCBsLnByb3RvdHlwZS51cGRhdGVQYXJhbSA9IGZ1bmN0aW9uICh0KSB7CiAgICBmb3IgKHZhciBpID0gVXRTeXN0ZW0uZ2V0VXNlclRpbWVNU2VjKCkgLSB0aGlzLnN0YXJ0VGltZU1TZWMsIGUgPSAwOyBlIDwgdGhpcy5waHlzaWNzTGlzdC5sZW5ndGg7IGUrKykgewogICAgICB0aGlzLnBoeXNpY3NMaXN0W2VdLnVwZGF0ZSh0LCBpKTsKICAgIH0KICB9LCAkLmxvYWQgPSBmdW5jdGlvbiAodCkgewogICAgZm9yICh2YXIgaSA9IG5ldyAkKCksIGUgPSBjLmdldFBsYXRmb3JtTWFuYWdlcigpLCByID0gZS5qc29uUGFyc2VGcm9tQnl0ZXModCksIG8gPSByLnBhcnRzX3Zpc2libGUsIG4gPSBvLmxlbmd0aCwgcyA9IDA7IHMgPCBuOyBzKyspIHsKICAgICAgZm9yICh2YXIgXyA9IG9bc10sIGEgPSBfLmdyb3VwLCBoID0gYS5sZW5ndGgsIGwgPSBuZXcgQXJyYXkoKSwgcCA9IDA7IHAgPCBoOyBwKyspIHsKICAgICAgICB2YXIgZiA9IGFbcF0sCiAgICAgICAgICAgIGQgPSBuZXcgdShmLmlkKTsKCiAgICAgICAgaWYgKGxbcF0gPSBkLCBudWxsICE9IGYubGluaykgewogICAgICAgICAgdmFyIGcgPSBmLmxpbmssCiAgICAgICAgICAgICAgeSA9IGcubGVuZ3RoOwogICAgICAgICAgZC5saW5rID0gbmV3IEFycmF5KCk7CgogICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCB5OyBtKyspIHsKICAgICAgICAgICAgdmFyIFQgPSBuZXcgdShnW21dKTsKICAgICAgICAgICAgZC5saW5rLnB1c2goVCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpLnBhcnRzR3JvdXBzLnB1c2gobCk7CiAgICB9CgogICAgcmV0dXJuIGk7CiAgfSwgJC5wcm90b3R5cGUudXBkYXRlUGFyYW0gPSBmdW5jdGlvbiAodCkgewogICAgaWYgKG51bGwgIT0gdCkgewogICAgICB0ICE9IHRoaXMubGFzdE1vZGVsICYmIHRoaXMuaW5pdFBhcmFtKHQpLCB0aGlzLmxhc3RNb2RlbCA9IHQ7CiAgICAgIHZhciBpID0gVXRTeXN0ZW0uZ2V0VXNlclRpbWVNU2VjKCksCiAgICAgICAgICBlID0gMCA9PSB0aGlzLmxhc3RUaW1lID8gMCA6IChpIC0gdGhpcy5sYXN0VGltZSkgLyAxZTM7CiAgICAgIHRoaXMubGFzdFRpbWUgPSBpLCBlIDwgMCAmJiAoZSA9IDApOwoKICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCB0aGlzLnBhcnRzR3JvdXBzLmxlbmd0aDsgcisrKSB7CiAgICAgICAgdGhpcy5ub3JtYWxpemVQYXJ0c09wYWNpdHlHcm91cCh0LCB0aGlzLnBhcnRzR3JvdXBzW3JdLCBlKSwgdGhpcy5jb3B5T3BhY2l0eU90aGVyUGFydHModCwgdGhpcy5wYXJ0c0dyb3Vwc1tyXSk7CiAgICAgIH0KICAgIH0KICB9LCAkLnByb3RvdHlwZS5pbml0UGFyYW0gPSBmdW5jdGlvbiAodCkgewogICAgaWYgKG51bGwgIT0gdCkgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBhcnRzR3JvdXBzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGZvciAodmFyIGUgPSB0aGlzLnBhcnRzR3JvdXBzW2ldLCByID0gMDsgciA8IGUubGVuZ3RoOyByKyspIHsKICAgICAgICBlW3JdLmluaXRJbmRleCh0KTsKICAgICAgICB2YXIgbyA9IGVbcl0ucGFydHNJbmRleCwKICAgICAgICAgICAgbiA9IGVbcl0ucGFyYW1JbmRleDsKCiAgICAgICAgaWYgKCEobyA8IDApKSB7CiAgICAgICAgICB2YXIgcyA9IDAgIT0gdC5nZXRQYXJhbUZsb2F0KG4pOwogICAgICAgICAgaWYgKHQuc2V0UGFydHNPcGFjaXR5KG8sIHMgPyAxIDogMCksIHQuc2V0UGFyYW1GbG9hdChuLCBzID8gMSA6IDApLCBudWxsICE9IGVbcl0ubGluaykgZm9yICh2YXIgXyA9IDA7IF8gPCBlW3JdLmxpbmsubGVuZ3RoOyBfKyspIHsKICAgICAgICAgICAgZVtyXS5saW5rW19dLmluaXRJbmRleCh0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCAkLnByb3RvdHlwZS5ub3JtYWxpemVQYXJ0c09wYWNpdHlHcm91cCA9IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICBmb3IgKHZhciByID0gLTEsIG8gPSAxLCBuID0gMDsgbiA8IGkubGVuZ3RoOyBuKyspIHsKICAgICAgdmFyIHMgPSBpW25dLnBhcnRzSW5kZXgsCiAgICAgICAgICBfID0gaVtuXS5wYXJhbUluZGV4OwoKICAgICAgaWYgKCEocyA8IDApICYmIDAgIT0gdC5nZXRQYXJhbUZsb2F0KF8pKSB7CiAgICAgICAgaWYgKHIgPj0gMCkgYnJlYWs7CiAgICAgICAgciA9IG4sIG8gPSB0LmdldFBhcnRzT3BhY2l0eShzKSwgbyArPSBlIC8gLjUsIG8gPiAxICYmIChvID0gMSk7CiAgICAgIH0KICAgIH0KCiAgICByIDwgMCAmJiAociA9IDAsIG8gPSAxKTsKCiAgICBmb3IgKHZhciBuID0gMDsgbiA8IGkubGVuZ3RoOyBuKyspIHsKICAgICAgdmFyIHMgPSBpW25dLnBhcnRzSW5kZXg7CiAgICAgIGlmICghKHMgPCAwKSkgaWYgKHIgPT0gbikgdC5zZXRQYXJ0c09wYWNpdHkocywgbyk7ZWxzZSB7CiAgICAgICAgdmFyIGEsCiAgICAgICAgICAgIGggPSB0LmdldFBhcnRzT3BhY2l0eShzKTsKICAgICAgICBhID0gbyA8IC41ID8gLS41ICogbyAvIC41ICsgMSA6IC41ICogKDEgLSBvKSAvIC41OwogICAgICAgIHZhciBsID0gKDEgLSBhKSAqICgxIC0gbyk7CiAgICAgICAgbCA+IC4xNSAmJiAoYSA9IDEgLSAuMTUgLyAoMSAtIG8pKSwgaCA+IGEgJiYgKGggPSBhKSwgdC5zZXRQYXJ0c09wYWNpdHkocywgaCk7CiAgICAgIH0KICAgIH0KICB9LCAkLnByb3RvdHlwZS5jb3B5T3BhY2l0eU90aGVyUGFydHMgPSBmdW5jdGlvbiAodCwgaSkgewogICAgZm9yICh2YXIgZSA9IDA7IGUgPCBpLmxlbmd0aDsgZSsrKSB7CiAgICAgIHZhciByID0gaVtlXTsKICAgICAgaWYgKG51bGwgIT0gci5saW5rICYmICEoci5wYXJ0c0luZGV4IDwgMCkpIGZvciAodmFyIG8gPSB0LmdldFBhcnRzT3BhY2l0eShyLnBhcnRzSW5kZXgpLCBuID0gMDsgbiA8IHIubGluay5sZW5ndGg7IG4rKykgewogICAgICAgIHZhciBzID0gci5saW5rW25dOwogICAgICAgIHMucGFydHNJbmRleCA8IDAgfHwgdC5zZXRQYXJ0c09wYWNpdHkocy5wYXJ0c0luZGV4LCBvKTsKICAgICAgfQogICAgfQogIH0sIHUucHJvdG90eXBlLmluaXRJbmRleCA9IGZ1bmN0aW9uICh0KSB7CiAgICB0aGlzLnBhcmFtSW5kZXggPSB0LmdldFBhcmFtSW5kZXgoIlZJU0lCTEU6IiArIHRoaXMuaWQpLCB0aGlzLnBhcnRzSW5kZXggPSB0LmdldFBhcnRzRGF0YUluZGV4KFBhcnRzRGF0YUlELmdldElEKHRoaXMuaWQpKSwgdC5zZXRQYXJhbUZsb2F0KHRoaXMucGFyYW1JbmRleCwgMSk7CiAgfSwgcC5GUkFNRV9SQVRFID0gMzAsIHAucHJvdG90eXBlLnNldFBvaW50ID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgIHRoaXMuZmFjZVRhcmdldFggPSB0LCB0aGlzLmZhY2VUYXJnZXRZID0gaTsKICB9LCBwLnByb3RvdHlwZS5nZXRYID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuZmFjZVg7CiAgfSwgcC5wcm90b3R5cGUuZ2V0WSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmZhY2VZOwogIH0sIHAucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciB0ID0gNDAgLyA3LjUgLyBwLkZSQU1FX1JBVEU7CiAgICBpZiAoMCA9PSB0aGlzLmxhc3RUaW1lU2VjKSByZXR1cm4gdm9pZCAodGhpcy5sYXN0VGltZVNlYyA9IFV0U3lzdGVtLmdldFVzZXJUaW1lTVNlYygpKTsKICAgIHZhciBpID0gVXRTeXN0ZW0uZ2V0VXNlclRpbWVNU2VjKCksCiAgICAgICAgZSA9IChpIC0gdGhpcy5sYXN0VGltZVNlYykgKiBwLkZSQU1FX1JBVEUgLyAxZTM7CiAgICB0aGlzLmxhc3RUaW1lU2VjID0gaTsKICAgIHZhciByID0gLjE1ICogcC5GUkFNRV9SQVRFLAogICAgICAgIG8gPSBlICogdCAvIHIsCiAgICAgICAgbiA9IHRoaXMuZmFjZVRhcmdldFggLSB0aGlzLmZhY2VYLAogICAgICAgIHMgPSB0aGlzLmZhY2VUYXJnZXRZIC0gdGhpcy5mYWNlWTsKCiAgICBpZiAoIShNYXRoLmFicyhuKSA8PSB0aGlzLkVQU0lMT04gJiYgTWF0aC5hYnMocykgPD0gdGhpcy5FUFNJTE9OKSkgewogICAgICB2YXIgXyA9IE1hdGguc3FydChuICogbiArIHMgKiBzKSwKICAgICAgICAgIGEgPSB0ICogbiAvIF8sCiAgICAgICAgICBoID0gdCAqIHMgLyBfLAogICAgICAgICAgbCA9IGEgLSB0aGlzLmZhY2VWWCwKICAgICAgICAgICQgPSBoIC0gdGhpcy5mYWNlVlksCiAgICAgICAgICB1ID0gTWF0aC5zcXJ0KGwgKiBsICsgJCAqICQpOwoKICAgICAgKHUgPCAtbyB8fCB1ID4gbykgJiYgKGwgKj0gbyAvIHUsICQgKj0gbyAvIHUsIHUgPSBvKSwgdGhpcy5mYWNlVlggKz0gbCwgdGhpcy5mYWNlVlkgKz0gJDsKICAgICAgdmFyIGYgPSAuNSAqIChNYXRoLnNxcnQobyAqIG8gKyAxNiAqIG8gKiBfIC0gOCAqIG8gKiBfKSAtIG8pLAogICAgICAgICAgYyA9IE1hdGguc3FydCh0aGlzLmZhY2VWWCAqIHRoaXMuZmFjZVZYICsgdGhpcy5mYWNlVlkgKiB0aGlzLmZhY2VWWSk7CiAgICAgIGMgPiBmICYmICh0aGlzLmZhY2VWWCAqPSBmIC8gYywgdGhpcy5mYWNlVlkgKj0gZiAvIGMpLCB0aGlzLmZhY2VYICs9IHRoaXMuZmFjZVZYLCB0aGlzLmZhY2VZICs9IHRoaXMuZmFjZVZZOwogICAgfQogIH0sIGYucHJvdG90eXBlID0gbmV3IF8oKSwgZi5wcm90b3R5cGUuZ2V0TWF4U2NhbGUgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5tYXg7CiAgfSwgZi5wcm90b3R5cGUuZ2V0TWluU2NhbGUgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5taW47CiAgfSwgZi5wcm90b3R5cGUuc2V0TWF4U2NhbGUgPSBmdW5jdGlvbiAodCkgewogICAgdGhpcy5tYXggPSB0OwogIH0sIGYucHJvdG90eXBlLnNldE1pblNjYWxlID0gZnVuY3Rpb24gKHQpIHsKICAgIHRoaXMubWluID0gdDsKICB9LCBmLnByb3RvdHlwZS5pc01heFNjYWxlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuZ2V0U2NhbGVYKCkgPT0gdGhpcy5tYXg7CiAgfSwgZi5wcm90b3R5cGUuaXNNaW5TY2FsZSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmdldFNjYWxlWCgpID09IHRoaXMubWluOwogIH0sIGYucHJvdG90eXBlLmFkanVzdFRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICB0aGlzLnRyWzBdICogdGhpcy5tYXhMZWZ0ICsgKHRoaXMudHJbMTJdICsgdCkgPiB0aGlzLnNjcmVlbkxlZnQgJiYgKHQgPSB0aGlzLnNjcmVlbkxlZnQgLSB0aGlzLnRyWzBdICogdGhpcy5tYXhMZWZ0IC0gdGhpcy50clsxMl0pLCB0aGlzLnRyWzBdICogdGhpcy5tYXhSaWdodCArICh0aGlzLnRyWzEyXSArIHQpIDwgdGhpcy5zY3JlZW5SaWdodCAmJiAodCA9IHRoaXMuc2NyZWVuUmlnaHQgLSB0aGlzLnRyWzBdICogdGhpcy5tYXhSaWdodCAtIHRoaXMudHJbMTJdKSwgdGhpcy50cls1XSAqIHRoaXMubWF4VG9wICsgKHRoaXMudHJbMTNdICsgaSkgPCB0aGlzLnNjcmVlblRvcCAmJiAoaSA9IHRoaXMuc2NyZWVuVG9wIC0gdGhpcy50cls1XSAqIHRoaXMubWF4VG9wIC0gdGhpcy50clsxM10pLCB0aGlzLnRyWzVdICogdGhpcy5tYXhCb3R0b20gKyAodGhpcy50clsxM10gKyBpKSA+IHRoaXMuc2NyZWVuQm90dG9tICYmIChpID0gdGhpcy5zY3JlZW5Cb3R0b20gLSB0aGlzLnRyWzVdICogdGhpcy5tYXhCb3R0b20gLSB0aGlzLnRyWzEzXSk7CiAgICB2YXIgZSA9IFsxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCB0LCBpLCAwLCAxXTsKCiAgICBfLm11bChlLCB0aGlzLnRyLCB0aGlzLnRyKTsKICB9LCBmLnByb3RvdHlwZS5hZGp1c3RTY2FsZSA9IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICB2YXIgciA9IGUgKiB0aGlzLnRyWzBdOwogICAgciA8IHRoaXMubWluID8gdGhpcy50clswXSA+IDAgJiYgKGUgPSB0aGlzLm1pbiAvIHRoaXMudHJbMF0pIDogciA+IHRoaXMubWF4ICYmIHRoaXMudHJbMF0gPiAwICYmIChlID0gdGhpcy5tYXggLyB0aGlzLnRyWzBdKTsKICAgIHZhciBvID0gWzEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsIHQsIGksIDAsIDFdLAogICAgICAgIG4gPSBbZSwgMCwgMCwgMCwgMCwgZSwgMCwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMCwgMV0sCiAgICAgICAgcyA9IFsxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAtdCwgLWksIDAsIDFdOwogICAgXy5tdWwocywgdGhpcy50ciwgdGhpcy50ciksIF8ubXVsKG4sIHRoaXMudHIsIHRoaXMudHIpLCBfLm11bChvLCB0aGlzLnRyLCB0aGlzLnRyKTsKICB9LCBmLnByb3RvdHlwZS5zZXRTY3JlZW5SZWN0ID0gZnVuY3Rpb24gKHQsIGksIGUsIHIpIHsKICAgIHRoaXMuc2NyZWVuTGVmdCA9IHQsIHRoaXMuc2NyZWVuUmlnaHQgPSBpLCB0aGlzLnNjcmVlblRvcCA9IHIsIHRoaXMuc2NyZWVuQm90dG9tID0gZTsKICB9LCBmLnByb3RvdHlwZS5zZXRNYXhTY3JlZW5SZWN0ID0gZnVuY3Rpb24gKHQsIGksIGUsIHIpIHsKICAgIHRoaXMubWF4TGVmdCA9IHQsIHRoaXMubWF4UmlnaHQgPSBpLCB0aGlzLm1heFRvcCA9IHIsIHRoaXMubWF4Qm90dG9tID0gZTsKICB9LCBmLnByb3RvdHlwZS5nZXRTY3JlZW5MZWZ0ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuc2NyZWVuTGVmdDsKICB9LCBmLnByb3RvdHlwZS5nZXRTY3JlZW5SaWdodCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLnNjcmVlblJpZ2h0OwogIH0sIGYucHJvdG90eXBlLmdldFNjcmVlbkJvdHRvbSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLnNjcmVlbkJvdHRvbTsKICB9LCBmLnByb3RvdHlwZS5nZXRTY3JlZW5Ub3AgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5zY3JlZW5Ub3A7CiAgfSwgZi5wcm90b3R5cGUuZ2V0TWF4TGVmdCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLm1heExlZnQ7CiAgfSwgZi5wcm90b3R5cGUuZ2V0TWF4UmlnaHQgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5tYXhSaWdodDsKICB9LCBmLnByb3RvdHlwZS5nZXRNYXhCb3R0b20gPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5tYXhCb3R0b207CiAgfSwgZi5wcm90b3R5cGUuZ2V0TWF4VG9wID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMubWF4VG9wOwogIH0sIGMucGxhdGZvcm1NYW5hZ2VyID0gbnVsbCwgYy5nZXRQbGF0Zm9ybU1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gYy5wbGF0Zm9ybU1hbmFnZXI7CiAgfSwgYy5zZXRQbGF0Zm9ybU1hbmFnZXIgPSBmdW5jdGlvbiAodCkgewogICAgYy5wbGF0Zm9ybU1hbmFnZXIgPSB0OwogIH0sIHQuZXhwb3J0cyA9IHsKICAgIEwyRFRhcmdldFBvaW50OiBwLAogICAgTGl2ZTJERnJhbWV3b3JrOiBjLAogICAgTDJEVmlld01hdHJpeDogZiwKICAgIEwyRFBvc2U6ICQsCiAgICBMMkRQYXJ0c1BhcmFtOiB1LAogICAgTDJEUGh5c2ljczogbCwKICAgIEwyRE1vdGlvbk1hbmFnZXI6IGgsCiAgICBMMkRNb2RlbE1hdHJpeDogYSwKICAgIEwyRE1hdHJpeDQ0OiBfLAogICAgRVlFX1NUQVRFOiBnLAogICAgTDJERXllQmxpbms6IHMsCiAgICBMMkRFeHByZXNzaW9uUGFyYW06IG4sCiAgICBMMkRFeHByZXNzaW9uTW90aW9uOiBvLAogICAgTDJEQmFzZU1vZGVsOiByCiAgfTsKfSwgZnVuY3Rpb24gKHQsIGksIGUpIHsKICAidXNlIHN0cmljdCI7CgogIHZhciByID0gewogICAgREVCVUdfTE9HOiAhMSwKICAgIERFQlVHX01PVVNFX0xPRzogITEsCiAgICBERUJVR19EUkFXX0hJVF9BUkVBOiAhMSwKICAgIERFQlVHX0RSQVdfQUxQSEFfTU9ERUw6ICExLAogICAgVklFV19NQVhfU0NBTEU6IDIsCiAgICBWSUVXX01JTl9TQ0FMRTogLjgsCiAgICBWSUVXX0xPR0lDQUxfTEVGVDogLTEsCiAgICBWSUVXX0xPR0lDQUxfUklHSFQ6IDEsCiAgICBWSUVXX0xPR0lDQUxfTUFYX0xFRlQ6IC0yLAogICAgVklFV19MT0dJQ0FMX01BWF9SSUdIVDogMiwKICAgIFZJRVdfTE9HSUNBTF9NQVhfQk9UVE9NOiAtMiwKICAgIFZJRVdfTE9HSUNBTF9NQVhfVE9QOiAyLAogICAgUFJJT1JJVFlfTk9ORTogMCwKICAgIFBSSU9SSVRZX0lETEU6IDEsCiAgICBQUklPUklUWV9TTEVFUFk6IDIsCiAgICBQUklPUklUWV9OT1JNQUw6IDMsCiAgICBQUklPUklUWV9GT1JDRTogNCwKICAgIE1PVElPTl9HUk9VUF9JRExFOiAiaWRsZSIsCiAgICBNT1RJT05fR1JPVVBfU0xFRVBZOiAic2xlZXB5IiwKICAgIE1PVElPTl9HUk9VUF9UQVBfQk9EWTogInRhcF9ib2R5IiwKICAgIE1PVElPTl9HUk9VUF9GTElDS19IRUFEOiAiZmxpY2tfaGVhZCIsCiAgICBNT1RJT05fR1JPVVBfUElOQ0hfSU46ICJwaW5jaF9pbiIsCiAgICBNT1RJT05fR1JPVVBfUElOQ0hfT1VUOiAicGluY2hfb3V0IiwKICAgIE1PVElPTl9HUk9VUF9TSEFLRTogInNoYWtlIiwKICAgIEhJVF9BUkVBX0hFQUQ6ICJoZWFkIiwKICAgIEhJVF9BUkVBX0JPRFk6ICJib2R5IgogIH07CiAgdC5leHBvcnRzID0gcjsKfSwgZnVuY3Rpb24gKHQsIGksIGUpIHsKICAidXNlIHN0cmljdCI7CgogIGZ1bmN0aW9uIHIodCkgewogICAgbiA9IHQ7CiAgfQoKICBmdW5jdGlvbiBvKCkgewogICAgcmV0dXJuIG47CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogITAKICB9KSwgaS5zZXRDb250ZXh0ID0gciwgaS5nZXRDb250ZXh0ID0gbzsKICB2YXIgbiA9IHZvaWQgMDsKfSwgZnVuY3Rpb24gKHQsIGksIGUpIHsKICAidXNlIHN0cmljdCI7CgogIGZ1bmN0aW9uIHIoKSB7fQoKICByLm1hdHJpeFN0YWNrID0gWzEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDFdLCByLmRlcHRoID0gMCwgci5jdXJyZW50TWF0cml4ID0gWzEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDAsIDFdLCByLnRtcCA9IG5ldyBBcnJheSgxNiksIHIucmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmRlcHRoID0gMDsKICB9LCByLmxvYWRJZGVudGl0eSA9IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIHQgPSAwOyB0IDwgMTY7IHQrKykgewogICAgICB0aGlzLmN1cnJlbnRNYXRyaXhbdF0gPSB0ICUgNSA9PSAwID8gMSA6IDA7CiAgICB9CiAgfSwgci5wdXNoID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHQgPSAodGhpcy5kZXB0aCwgMTYgKiAodGhpcy5kZXB0aCArIDEpKTsKICAgIHRoaXMubWF0cml4U3RhY2subGVuZ3RoIDwgdCArIDE2ICYmICh0aGlzLm1hdHJpeFN0YWNrLmxlbmd0aCA9IHQgKyAxNik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7CiAgICAgIHRoaXMubWF0cml4U3RhY2tbdCArIGldID0gdGhpcy5jdXJyZW50TWF0cml4W2ldOwogICAgfQoKICAgIHRoaXMuZGVwdGgrKzsKICB9LCByLnBvcCA9IGZ1bmN0aW9uICgpIHsKICAgIC0tdGhpcy5kZXB0aCA8IDAgJiYgKG15RXJyb3IoIkludmFsaWQgbWF0cml4IHN0YWNrLiIpLCB0aGlzLmRlcHRoID0gMCk7CgogICAgZm9yICh2YXIgdCA9IDE2ICogdGhpcy5kZXB0aCwgaSA9IDA7IGkgPCAxNjsgaSsrKSB7CiAgICAgIHRoaXMuY3VycmVudE1hdHJpeFtpXSA9IHRoaXMubWF0cml4U3RhY2tbdCArIGldOwogICAgfQogIH0sIHIuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuY3VycmVudE1hdHJpeDsKICB9LCByLm11bHRNYXRyaXggPSBmdW5jdGlvbiAodCkgewogICAgdmFyIGksIGUsIHI7CgogICAgZm9yIChpID0gMDsgaSA8IDE2OyBpKyspIHsKICAgICAgdGhpcy50bXBbaV0gPSAwOwogICAgfQoKICAgIGZvciAoaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgICAgZm9yIChlID0gMDsgZSA8IDQ7IGUrKykgewogICAgICAgIGZvciAociA9IDA7IHIgPCA0OyByKyspIHsKICAgICAgICAgIHRoaXMudG1wW2kgKyA0ICogZV0gKz0gdGhpcy5jdXJyZW50TWF0cml4W2kgKyA0ICogcl0gKiB0W3IgKyA0ICogZV07CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZm9yIChpID0gMDsgaSA8IDE2OyBpKyspIHsKICAgICAgdGhpcy5jdXJyZW50TWF0cml4W2ldID0gdGhpcy50bXBbaV07CiAgICB9CiAgfSwgdC5leHBvcnRzID0gcjsKfSwgZnVuY3Rpb24gKHQsIGksIGUpIHsKICB0LmV4cG9ydHMgPSBlKDUpOwp9LCBmdW5jdGlvbiAodCwgaSwgZSkgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gcih0KSB7CiAgICByZXR1cm4gdCAmJiB0Ll9fZXNNb2R1bGUgPyB0IDogewogICAgICAiZGVmYXVsdCI6IHQKICAgIH07CiAgfQoKICBmdW5jdGlvbiBvKHQpIHsKICAgIEMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KSwgQy5hZGRFdmVudExpc3RlbmVyICYmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBnKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsIGcpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgZyksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIiwgZyksIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlb3V0IiwgZyksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IiwgeSksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaGVuZCIsIHkpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIiwgeSkpOwogIH0KCiAgZnVuY3Rpb24gbih0KSB7CiAgICB2YXIgaSA9IEMud2lkdGgsCiAgICAgICAgZSA9IEMuaGVpZ2h0OwogICAgTiA9IG5ldyBNLkwyRFRhcmdldFBvaW50KCk7CgogICAgdmFyIHIgPSBlIC8gaSwKICAgICAgICBvID0gd1siZGVmYXVsdCJdLlZJRVdfTE9HSUNBTF9MRUZULAogICAgICAgIG4gPSB3WyJkZWZhdWx0Il0uVklFV19MT0dJQ0FMX1JJR0hULAogICAgICAgIF8gPSAtciwKICAgICAgICBoID0gcjsKCiAgICBpZiAod2luZG93LkxpdmUyRC5jYXB0dXJlRnJhbWUgPSAhMSwgQiA9IG5ldyBNLkwyRFZpZXdNYXRyaXgoKSwgQi5zZXRTY3JlZW5SZWN0KG8sIG4sIF8sIGgpLCBCLnNldE1heFNjcmVlblJlY3Qod1siZGVmYXVsdCJdLlZJRVdfTE9HSUNBTF9NQVhfTEVGVCwgd1siZGVmYXVsdCJdLlZJRVdfTE9HSUNBTF9NQVhfUklHSFQsIHdbImRlZmF1bHQiXS5WSUVXX0xPR0lDQUxfTUFYX0JPVFRPTSwgd1siZGVmYXVsdCJdLlZJRVdfTE9HSUNBTF9NQVhfVE9QKSwgQi5zZXRNYXhTY2FsZSh3WyJkZWZhdWx0Il0uVklFV19NQVhfU0NBTEUpLCBCLnNldE1pblNjYWxlKHdbImRlZmF1bHQiXS5WSUVXX01JTl9TQ0FMRSksIFUgPSBuZXcgTS5MMkRNYXRyaXg0NCgpLCBVLm11bHRTY2FsZSgxLCBpIC8gZSksIEcgPSBuZXcgTS5MMkRNYXRyaXg0NCgpLCBHLm11bHRUcmFuc2xhdGUoLWkgLyAyLCAtZSAvIDIpLCBHLm11bHRTY2FsZSgyIC8gaSwgLTIgLyBpKSwgRiA9IHYoKSwgKDAsIEQuc2V0Q29udGV4dCkoRiksICFGKSByZXR1cm4gY29uc29sZS5lcnJvcigiRmFpbGVkIHRvIGNyZWF0ZSBXZWJHTCBjb250ZXh0LiIpLCB2b2lkICh3aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0ICYmIGNvbnNvbGUuZXJyb3IoIllvdXIgYnJvd3NlciBkb24ndCBzdXBwb3J0IFdlYkdMLCBjaGVjayBodHRwczovL2dldC53ZWJnbC5vcmcvIGZvciBmdXRoZXIgaW5mb3JtYXRpb24uIikpOwogICAgd2luZG93LkxpdmUyRC5zZXRHTChGKSwgRi5jbGVhckNvbG9yKDAsIDAsIDAsIDApLCBhKHQpLCBzKCk7CiAgfQoKICBmdW5jdGlvbiBzKCkgewogICAgYiB8fCAoYiA9ICEwLCBmdW5jdGlvbiB0KCkgewogICAgICBfKCk7CgogICAgICB2YXIgaSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZTsKCiAgICAgIGlmICh3aW5kb3cuTGl2ZTJELmNhcHR1cmVGcmFtZSkgewogICAgICAgIHdpbmRvdy5MaXZlMkQuY2FwdHVyZUZyYW1lID0gITE7CiAgICAgICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKSwgZS5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiaGlkZGVuIiksIGUuaHJlZiA9IEMudG9EYXRhVVJMKCksIGUuZG93bmxvYWQgPSB3aW5kb3cuTGl2ZTJELmNhcHR1cmVOYW1lIHx8ICJsaXZlMmQucG5nIiwgZS5jbGljaygpOwogICAgICB9CgogICAgICBpKHQsIEMpOwogICAgfSgpKTsKICB9CgogIGZ1bmN0aW9uIF8oKSB7CiAgICBPWyJkZWZhdWx0Il0ucmVzZXQoKSwgT1siZGVmYXVsdCJdLmxvYWRJZGVudGl0eSgpLCBOLnVwZGF0ZSgpLCBSLnNldERyYWcoTi5nZXRYKCksIE4uZ2V0WSgpKSwgRi5jbGVhcihGLkNPTE9SX0JVRkZFUl9CSVQpLCBPWyJkZWZhdWx0Il0ubXVsdE1hdHJpeChVLmdldEFycmF5KCkpLCBPWyJkZWZhdWx0Il0ubXVsdE1hdHJpeChCLmdldEFycmF5KCkpLCBPWyJkZWZhdWx0Il0ucHVzaCgpOwoKICAgIGZvciAodmFyIHQgPSAwOyB0IDwgUi5udW1Nb2RlbHMoKTsgdCsrKSB7CiAgICAgIHZhciBpID0gUi5nZXRNb2RlbCh0KTsKICAgICAgaWYgKG51bGwgPT0gaSkgcmV0dXJuOwogICAgICBpLmluaXRpYWxpemVkICYmICFpLnVwZGF0aW5nICYmIChpLnVwZGF0ZSgpLCBpLmRyYXcoRikpOwogICAgfQoKICAgIE9bImRlZmF1bHQiXS5wb3AoKTsKICB9CgogIGZ1bmN0aW9uIGEodCkgewogICAgUi5yZWxvYWRGbGcgPSAhMCwgUi5jb3VudCsrLCBSLmNoYW5nZU1vZGVsKEYsIHQpOwogIH0KCiAgZnVuY3Rpb24gaCh0LCBpKSB7CiAgICByZXR1cm4gdC54ICogaS54ICsgdC55ICogaS55OwogIH0KCiAgZnVuY3Rpb24gbCh0LCBpKSB7CiAgICB2YXIgZSA9IE1hdGguc3FydCh0ICogdCArIGkgKiBpKTsKICAgIHJldHVybiB7CiAgICAgIHg6IHQgLyBlLAogICAgICB5OiBpIC8gZQogICAgfTsKICB9CgogIGZ1bmN0aW9uICQodCwgaSwgZSkgewogICAgZnVuY3Rpb24gcih0LCBpKSB7CiAgICAgIHJldHVybiAxODAgKiBNYXRoLmFjb3MoaCh7CiAgICAgICAgeDogMCwKICAgICAgICB5OiAxCiAgICAgIH0sIGwodCwgaSkpKSAvIE1hdGguUEk7CiAgICB9CgogICAgaWYgKGkueCA8IGUubGVmdCArIGUud2lkdGggJiYgaS55IDwgZS50b3AgKyBlLmhlaWdodCAmJiBpLnggPiBlLmxlZnQgJiYgaS55ID4gZS50b3ApIHJldHVybiBpOwogICAgdmFyIG8gPSB0LnggLSBpLngsCiAgICAgICAgbiA9IHQueSAtIGkueSwKICAgICAgICBzID0gcihvLCBuKTsKICAgIGkueCA8IHQueCAmJiAocyA9IDM2MCAtIHMpOwoKICAgIHZhciBfID0gMzYwIC0gcihlLmxlZnQgLSB0LngsIC0xICogKGUudG9wIC0gdC55KSksCiAgICAgICAgYSA9IDM2MCAtIHIoZS5sZWZ0IC0gdC54LCAtMSAqIChlLnRvcCArIGUuaGVpZ2h0IC0gdC55KSksCiAgICAgICAgJCA9IHIoZS5sZWZ0ICsgZS53aWR0aCAtIHQueCwgLTEgKiAoZS50b3AgLSB0LnkpKSwKICAgICAgICB1ID0gcihlLmxlZnQgKyBlLndpZHRoIC0gdC54LCAtMSAqIChlLnRvcCArIGUuaGVpZ2h0IC0gdC55KSksCiAgICAgICAgcCA9IG4gLyBvLAogICAgICAgIGYgPSB7fTsKCiAgICBpZiAocyA8ICQpIHsKICAgICAgdmFyIGMgPSBlLnRvcCAtIHQueSwKICAgICAgICAgIGQgPSBjIC8gcDsKICAgICAgZiA9IHsKICAgICAgICB5OiB0LnkgKyBjLAogICAgICAgIHg6IHQueCArIGQKICAgICAgfTsKICAgIH0gZWxzZSBpZiAocyA8IHUpIHsKICAgICAgdmFyIGcgPSBlLmxlZnQgKyBlLndpZHRoIC0gdC54LAogICAgICAgICAgeSA9IGcgKiBwOwogICAgICBmID0gewogICAgICAgIHk6IHQueSArIHksCiAgICAgICAgeDogdC54ICsgZwogICAgICB9OwogICAgfSBlbHNlIGlmIChzIDwgYSkgewogICAgICB2YXIgbSA9IGUudG9wICsgZS5oZWlnaHQgLSB0LnksCiAgICAgICAgICBUID0gbSAvIHA7CiAgICAgIGYgPSB7CiAgICAgICAgeTogdC55ICsgbSwKICAgICAgICB4OiB0LnggKyBUCiAgICAgIH07CiAgICB9IGVsc2UgaWYgKHMgPCBfKSB7CiAgICAgIHZhciBQID0gdC54IC0gZS5sZWZ0LAogICAgICAgICAgUyA9IFAgKiBwOwogICAgICBmID0gewogICAgICAgIHk6IHQueSAtIFMsCiAgICAgICAgeDogdC54IC0gUAogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgdmFyIHYgPSBlLnRvcCAtIHQueSwKICAgICAgICAgIEwgPSB2IC8gcDsKICAgICAgZiA9IHsKICAgICAgICB5OiB0LnkgKyB2LAogICAgICAgIHg6IHQueCArIEwKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4gZjsKICB9CgogIGZ1bmN0aW9uIHUodCkgewogICAgWSA9ICEwOwogICAgdmFyIGkgPSBDLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgIGUgPSBQKHQuY2xpZW50WCAtIGkubGVmdCksCiAgICAgICAgciA9IFModC5jbGllbnRZIC0gaS50b3ApLAogICAgICAgIG8gPSAkKHsKICAgICAgeDogaS5sZWZ0ICsgaS53aWR0aCAvIDIsCiAgICAgIHk6IGkudG9wICsgaS5oZWlnaHQgKiBYCiAgICB9LCB7CiAgICAgIHg6IHQuY2xpZW50WCwKICAgICAgeTogdC5jbGllbnRZCiAgICB9LCBpKSwKICAgICAgICBuID0gbShvLnggLSBpLmxlZnQpLAogICAgICAgIHMgPSBUKG8ueSAtIGkudG9wKTsKICAgIHdbImRlZmF1bHQiXS5ERUJVR19NT1VTRV9MT0cgJiYgY29uc29sZS5sb2coIm9uTW91c2VNb3ZlIGRldmljZSggeDoiICsgdC5jbGllbnRYICsgIiB5OiIgKyB0LmNsaWVudFkgKyAiICkgdmlldyggeDoiICsgbiArICIgeToiICsgcyArICIpIiksIGsgPSBlLCBWID0gciwgTi5zZXRQb2ludChuLCBzKTsKICB9CgogIGZ1bmN0aW9uIHAodCkgewogICAgWSA9ICEwOwogICAgdmFyIGkgPSBDLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgIGUgPSBQKHQuY2xpZW50WCAtIGkubGVmdCksCiAgICAgICAgciA9IFModC5jbGllbnRZIC0gaS50b3ApLAogICAgICAgIG8gPSAkKHsKICAgICAgeDogaS5sZWZ0ICsgaS53aWR0aCAvIDIsCiAgICAgIHk6IGkudG9wICsgaS5oZWlnaHQgKiBYCiAgICB9LCB7CiAgICAgIHg6IHQuY2xpZW50WCwKICAgICAgeTogdC5jbGllbnRZCiAgICB9LCBpKSwKICAgICAgICBuID0gbShvLnggLSBpLmxlZnQpLAogICAgICAgIHMgPSBUKG8ueSAtIGkudG9wKTsKICAgIHdbImRlZmF1bHQiXS5ERUJVR19NT1VTRV9MT0cgJiYgY29uc29sZS5sb2coIm9uTW91c2VEb3duIGRldmljZSggeDoiICsgdC5jbGllbnRYICsgIiB5OiIgKyB0LmNsaWVudFkgKyAiICkgdmlldyggeDoiICsgbiArICIgeToiICsgcyArICIpIiksIGsgPSBlLCBWID0gcjsgLy8gUi50YXBFdmVudChuLCBzKQogIH0KCiAgZnVuY3Rpb24gZih0KSB7CiAgICB2YXIgaSA9IEMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgZSA9IFAodC5jbGllbnRYIC0gaS5sZWZ0KSwKICAgICAgICByID0gUyh0LmNsaWVudFkgLSBpLnRvcCksCiAgICAgICAgbyA9ICQoewogICAgICB4OiBpLmxlZnQgKyBpLndpZHRoIC8gMiwKICAgICAgeTogaS50b3AgKyBpLmhlaWdodCAqIFgKICAgIH0sIHsKICAgICAgeDogdC5jbGllbnRYLAogICAgICB5OiB0LmNsaWVudFkKICAgIH0sIGkpLAogICAgICAgIG4gPSBtKG8ueCAtIGkubGVmdCksCiAgICAgICAgcyA9IFQoby55IC0gaS50b3ApOwogICAgd1siZGVmYXVsdCJdLkRFQlVHX01PVVNFX0xPRyAmJiBjb25zb2xlLmxvZygib25Nb3VzZU1vdmUgZGV2aWNlKCB4OiIgKyB0LmNsaWVudFggKyAiIHk6IiArIHQuY2xpZW50WSArICIgKSB2aWV3KCB4OiIgKyBuICsgIiB5OiIgKyBzICsgIikiKSwgWSAmJiAoayA9IGUsIFYgPSByLCBOLnNldFBvaW50KG4sIHMpKTsKICB9CgogIGZ1bmN0aW9uIGMoKSB7CiAgICBZICYmIChZID0gITEpLCBOLnNldFBvaW50KDAsIDApOwogIH0KCiAgZnVuY3Rpb24gZCgpIHsKICAgIHdbImRlZmF1bHQiXS5ERUJVR19MT0cgJiYgY29uc29sZS5sb2coIlNldCBTZXNzaW9uIFN0b3JhZ2UuIiksIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oIlNsZWVweSIsICIxIik7CiAgfQoKICBmdW5jdGlvbiBnKHQpIHsKICAgIGlmICgibW91c2V3aGVlbCIgPT0gdC50eXBlKSA7ZWxzZSBpZiAoIm1vdXNlZG93biIgPT0gdC50eXBlKSBwKHQpO2Vsc2UgaWYgKCJtb3VzZW1vdmUiID09IHQudHlwZSkgewogICAgICB2YXIgaSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oIlNsZWVweSIpOwogICAgICAiMSIgPT09IGkgJiYgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiU2xlZXB5IiwgIjAiKSwgdSh0KTsKICAgIH0gZWxzZSBpZiAoIm1vdXNldXAiID09IHQudHlwZSkgewogICAgICBpZiAoImJ1dHRvbiIgaW4gdCAmJiAwICE9IHQuYnV0dG9uKSByZXR1cm47CiAgICB9IGVsc2UgaWYgKCJtb3VzZW91dCIgPT0gdC50eXBlKSB7CiAgICAgIHdbImRlZmF1bHQiXS5ERUJVR19MT0cgJiYgY29uc29sZS5sb2coIk1vdXNlIG91dCBXaW5kb3cuIiksIGMoKTsKICAgICAgdmFyIGUgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJTbGVlcHlUaW1lciIpOwogICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGUpLCBlID0gd2luZG93LnNldFRpbWVvdXQoZCwgNWU0KSwgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiU2xlZXB5VGltZXIiLCBlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHkodCkgewogICAgdmFyIGkgPSB0LnRvdWNoZXNbMF07CiAgICAidG91Y2hzdGFydCIgPT0gdC50eXBlID8gMSA9PSB0LnRvdWNoZXMubGVuZ3RoICYmIHUoaSkgOiAidG91Y2htb3ZlIiA9PSB0LnR5cGUgPyBmKGkpIDogInRvdWNoZW5kIiA9PSB0LnR5cGUgJiYgYygpOwogIH0KCiAgZnVuY3Rpb24gbSh0KSB7CiAgICB2YXIgaSA9IEcudHJhbnNmb3JtWCh0KTsKICAgIHJldHVybiBCLmludmVydFRyYW5zZm9ybVgoaSk7CiAgfQoKICBmdW5jdGlvbiBUKHQpIHsKICAgIHZhciBpID0gRy50cmFuc2Zvcm1ZKHQpOwogICAgcmV0dXJuIEIuaW52ZXJ0VHJhbnNmb3JtWShpKTsKICB9CgogIGZ1bmN0aW9uIFAodCkgewogICAgcmV0dXJuIEcudHJhbnNmb3JtWCh0KTsKICB9CgogIGZ1bmN0aW9uIFModCkgewogICAgcmV0dXJuIEcudHJhbnNmb3JtWSh0KTsKICB9CgogIGZ1bmN0aW9uIHYoKSB7CiAgICBmb3IgKHZhciB0ID0gWyJ3ZWJnbCIsICJleHBlcmltZW50YWwtd2ViZ2wiLCAid2Via2l0LTNkIiwgIm1vei13ZWJnbCJdLCBpID0gMDsgaSA8IHQubGVuZ3RoOyBpKyspIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgZSA9IEMuZ2V0Q29udGV4dCh0W2ldLCB7CiAgICAgICAgICBwcmVtdWx0aXBsaWVkQWxwaGE6ICEwCiAgICAgICAgfSk7CiAgICAgICAgaWYgKGUpIHJldHVybiBlOwogICAgICB9IGNhdGNoICh0KSB7fQogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0KCiAgZnVuY3Rpb24gTCh0LCBpLCBlKSB7CiAgICBYID0gdm9pZCAwID09PSBlID8gLjUgOiBlLCBvKHQpLCBuKGkpOwogIH0KCiAgZSg2KTsKICB2YXIgTSA9IGUoMCksCiAgICAgIEUgPSBlKDgpLAogICAgICBBID0gcihFKSwKICAgICAgSSA9IGUoMSksCiAgICAgIHcgPSByKEkpLAogICAgICB4ID0gZSgzKSwKICAgICAgTyA9IHIoeCksCiAgICAgIEQgPSBlKDIpLAogICAgICBSID0gKHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm0udG9Mb3dlckNhc2UoKSwgbmV3IEFbImRlZmF1bHQiXSgpKSwKICAgICAgYiA9ICExLAogICAgICBGID0gbnVsbCwKICAgICAgQyA9IG51bGwsCiAgICAgIE4gPSBudWxsLAogICAgICBCID0gbnVsbCwKICAgICAgVSA9IG51bGwsCiAgICAgIEcgPSBudWxsLAogICAgICBZID0gITEsCiAgICAgIGsgPSAwLAogICAgICBWID0gMCwKICAgICAgWCA9IC41OwogIHdpbmRvdy5sb2FkbGl2ZTJkID0gTDsKfSwgZnVuY3Rpb24gKHQsIGksIGUpIHsKICAidXNlIHN0cmljdCI7CgogIChmdW5jdGlvbiAodCkgewogICAgIWZ1bmN0aW9uICgpIHsKICAgICAgZnVuY3Rpb24gaSgpIHsKICAgICAgICBBdCB8fCAodGhpcy5fJE1UID0gbnVsbCwgdGhpcy5fJDVTID0gbnVsbCwgdGhpcy5fJE5QID0gMCwgaS5fJDQyKyssIHRoaXMuXyQ1UyA9IG5ldyBZKHRoaXMpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZSh0KSB7CiAgICAgICAgaWYgKCFBdCkgewogICAgICAgICAgdGhpcy5jbGlwQ29udGV4dExpc3QgPSBuZXcgQXJyYXkoKSwgdGhpcy5nbGNvbnRleHQgPSB0LmdsLCB0aGlzLmRwX3dlYmdsID0gdCwgdGhpcy5jdXJGcmFtZU5vID0gMCwgdGhpcy5maXJzdEVycm9yX2NsaXBJbk5vdFVwZGF0ZSA9ICEwLCB0aGlzLmNvbG9yQnVmZmVyID0gMCwgdGhpcy5pc0luaXRHTEZCRnVuYyA9ICExLCB0aGlzLnRtcEJvdW5kc09uTW9kZWwgPSBuZXcgUygpLCBhdC5nbENvbnRleHQubGVuZ3RoID4gYXQuZnJhbWVCdWZmZXJzLmxlbmd0aCAmJiAodGhpcy5jdXJGcmFtZU5vID0gdGhpcy5nZXRNYXNrUmVuZGVyVGV4dHVyZSgpKSwgdGhpcy50bXBNb2RlbFRvVmlld01hdHJpeCA9IG5ldyBSKCksIHRoaXMudG1wTWF0cml4MiA9IG5ldyBSKCksIHRoaXMudG1wTWF0cml4Rm9yTWFzayA9IG5ldyBSKCksIHRoaXMudG1wTWF0cml4Rm9yRHJhdyA9IG5ldyBSKCksIHRoaXMuQ0hBTk5FTF9DT0xPUlMgPSBuZXcgQXJyYXkoKTsKICAgICAgICAgIHZhciBpID0gbmV3IEEoKTsKICAgICAgICAgIGkgPSBuZXcgQSgpLCBpLnIgPSAwLCBpLmcgPSAwLCBpLmIgPSAwLCBpLmEgPSAxLCB0aGlzLkNIQU5ORUxfQ09MT1JTLnB1c2goaSksIGkgPSBuZXcgQSgpLCBpLnIgPSAxLCBpLmcgPSAwLCBpLmIgPSAwLCBpLmEgPSAwLCB0aGlzLkNIQU5ORUxfQ09MT1JTLnB1c2goaSksIGkgPSBuZXcgQSgpLCBpLnIgPSAwLCBpLmcgPSAxLCBpLmIgPSAwLCBpLmEgPSAwLCB0aGlzLkNIQU5ORUxfQ09MT1JTLnB1c2goaSksIGkgPSBuZXcgQSgpLCBpLnIgPSAwLCBpLmcgPSAwLCBpLmIgPSAxLCBpLmEgPSAwLCB0aGlzLkNIQU5ORUxfQ09MT1JTLnB1c2goaSk7CgogICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCB0aGlzLkNIQU5ORUxfQ09MT1JTLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgIHRoaXMuZHBfd2ViZ2wuc2V0Q2hhbm5lbEZsYWdBc0NvbG9yKGUsIHRoaXMuQ0hBTk5FTF9DT0xPUlNbZV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gcih0LCBpLCBlKSB7CiAgICAgICAgdGhpcy5jbGlwSURMaXN0ID0gbmV3IEFycmF5KCksIHRoaXMuY2xpcElETGlzdCA9IGUsIHRoaXMuY2xpcHBpbmdNYXNrRHJhd0luZGV4TGlzdCA9IG5ldyBBcnJheSgpOwoKICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IGUubGVuZ3RoOyByKyspIHsKICAgICAgICAgIHRoaXMuY2xpcHBpbmdNYXNrRHJhd0luZGV4TGlzdC5wdXNoKGkuZ2V0RHJhd0RhdGFJbmRleChlW3JdKSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmNsaXBwZWREcmF3Q29udGV4dExpc3QgPSBuZXcgQXJyYXkoKSwgdGhpcy5pc1VzaW5nID0gITAsIHRoaXMubGF5b3V0Q2hhbm5lbE5vID0gMCwgdGhpcy5sYXlvdXRCb3VuZHMgPSBuZXcgUygpLCB0aGlzLmFsbENsaXBwZWREcmF3UmVjdCA9IG5ldyBTKCksIHRoaXMubWF0cml4Rm9yTWFzayA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpLCB0aGlzLm1hdHJpeEZvckRyYXcgPSBuZXcgRmxvYXQzMkFycmF5KDE2KSwgdGhpcy5vd25lciA9IHQ7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG8odCwgaSkgewogICAgICAgIHRoaXMuXyRnUCA9IHQsIHRoaXMuZHJhd0RhdGFJbmRleCA9IGk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgQXQgfHwgKHRoaXMuY29sb3IgPSBudWxsKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcygpIHsKICAgICAgICBBdCB8fCAodGhpcy5fJGRQID0gbnVsbCwgdGhpcy5fJGVvID0gbnVsbCwgdGhpcy5fJFYwID0gbnVsbCwgdGhpcy5fJGRQID0gMWUzLCB0aGlzLl8kZW8gPSAxZTMsIHRoaXMuXyRWMCA9IDEsIHRoaXMuXyRhMCgpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gXygpIHt9CgogICAgICBmdW5jdGlvbiBhKCkgewogICAgICAgIHRoaXMuXyRyID0gbnVsbCwgdGhpcy5fJDBTID0gbnVsbDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gaCgpIHsKICAgICAgICBBdCB8fCAodGhpcy54ID0gbnVsbCwgdGhpcy55ID0gbnVsbCwgdGhpcy53aWR0aCA9IG51bGwsIHRoaXMuaGVpZ2h0ID0gbnVsbCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGwodCkgewogICAgICAgIEF0IHx8IGV0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHQpOwogICAgICB9CgogICAgICBmdW5jdGlvbiAkKCkge30KCiAgICAgIGZ1bmN0aW9uIHUodCkgewogICAgICAgIEF0IHx8IGV0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHQpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBwKCkgewogICAgICAgIEF0IHx8ICh0aGlzLl8kdm8gPSBudWxsLCB0aGlzLl8kRjIgPSBudWxsLCB0aGlzLl8kYW8gPSA0MDAsIHRoaXMuXyQxUyA9IDQwMCwgcC5fJDQyKyspOwogICAgICB9CgogICAgICBmdW5jdGlvbiBmKCkgewogICAgICAgIEF0IHx8ICh0aGlzLnAxID0gbmV3IGMoKSwgdGhpcy5wMiA9IG5ldyBjKCksIHRoaXMuXyRGbyA9IDAsIHRoaXMuXyREYiA9IDAsIHRoaXMuXyRMMiA9IDAsIHRoaXMuXyRNMiA9IDAsIHRoaXMuXyRrcyA9IDAsIHRoaXMuXyQ5YiA9IDAsIHRoaXMuXyRpUCA9IDAsIHRoaXMuXyRpVCA9IDAsIHRoaXMuXyRsTCA9IG5ldyBBcnJheSgpLCB0aGlzLl8kcVAgPSBuZXcgQXJyYXkoKSwgdGhpcy5zZXR1cCguMywgLjUsIC4xKSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGMoKSB7CiAgICAgICAgdGhpcy5fJHAgPSAxLCB0aGlzLnggPSAwLCB0aGlzLnkgPSAwLCB0aGlzLnZ4ID0gMCwgdGhpcy52eSA9IDAsIHRoaXMuYXggPSAwLCB0aGlzLmF5ID0gMCwgdGhpcy5meCA9IDAsIHRoaXMuZnkgPSAwLCB0aGlzLl8kczAgPSAwLCB0aGlzLl8kNzAgPSAwLCB0aGlzLl8kN0wgPSAwLCB0aGlzLl8kSEwgPSAwOwogICAgICB9CgogICAgICBmdW5jdGlvbiBkKHQsIGksIGUpIHsKICAgICAgICB0aGlzLl8kd0wgPSBudWxsLCB0aGlzLnNjYWxlID0gbnVsbCwgdGhpcy5fJFYwID0gbnVsbCwgdGhpcy5fJHdMID0gdCwgdGhpcy5zY2FsZSA9IGksIHRoaXMuXyRWMCA9IGU7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGcodCwgaSwgZSwgcikgewogICAgICAgIGQucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgaSwgZSwgciksIHRoaXMuXyR0TCA9IG51bGwsIHRoaXMuXyR0TCA9IHQ7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHkodCwgaSwgZSkgewogICAgICAgIHRoaXMuXyR3TCA9IG51bGwsIHRoaXMuc2NhbGUgPSBudWxsLCB0aGlzLl8kVjAgPSBudWxsLCB0aGlzLl8kd0wgPSB0LCB0aGlzLnNjYWxlID0gaSwgdGhpcy5fJFYwID0gZTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gVCh0LCBpLCBlLCByKSB7CiAgICAgICAgeS5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBpLCBlLCByKSwgdGhpcy5fJFlQID0gbnVsbCwgdGhpcy5fJFlQID0gdDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gUCgpIHsKICAgICAgICBBdCB8fCAodGhpcy5fJGZMID0gMCwgdGhpcy5fJGdMID0gMCwgdGhpcy5fJEIwID0gMSwgdGhpcy5fJHowID0gMSwgdGhpcy5fJHFUID0gMCwgdGhpcy5yZWZsZWN0WCA9ICExLCB0aGlzLnJlZmxlY3RZID0gITEpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBTKCkgewogICAgICAgIEF0IHx8ICh0aGlzLnggPSBudWxsLCB0aGlzLnkgPSBudWxsLCB0aGlzLndpZHRoID0gbnVsbCwgdGhpcy5oZWlnaHQgPSBudWxsKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdigpIHt9CgogICAgICBmdW5jdGlvbiBMKCkgewogICAgICAgIEF0IHx8ICh0aGlzLnggPSBudWxsLCB0aGlzLnkgPSBudWxsKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gTSgpIHsKICAgICAgICBBdCB8fCAodGhpcy5fJGdQID0gbnVsbCwgdGhpcy5fJGRyID0gbnVsbCwgdGhpcy5fJEdTID0gbnVsbCwgdGhpcy5fJHFiID0gbnVsbCwgdGhpcy5fJExiID0gbnVsbCwgdGhpcy5fJG1TID0gbnVsbCwgdGhpcy5jbGlwSUQgPSBudWxsLCB0aGlzLmNsaXBJRExpc3QgPSBuZXcgQXJyYXkoKSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIEUoKSB7CiAgICAgICAgQXQgfHwgKHRoaXMuXyRFYiA9IEUuXyRwcywgdGhpcy5fJGxUID0gMSwgdGhpcy5fJEMwID0gMSwgdGhpcy5fJHRUID0gMSwgdGhpcy5fJFdMID0gMSwgdGhpcy5jdWxsaW5nID0gITEsIHRoaXMubWF0cml4NHg0ID0gbmV3IEZsb2F0MzJBcnJheSgxNiksIHRoaXMucHJlbXVsdGlwbGllZEFscGhhID0gITEsIHRoaXMuYW5pc290cm9weSA9IDAsIHRoaXMuY2xpcHBpbmdQcm9jZXNzID0gRS5DTElQUElOR19QUk9DRVNTX05PTkUsIHRoaXMuY2xpcEJ1ZlByZV9jbGlwQ29udGV4dE1hc2sgPSBudWxsLCB0aGlzLmNsaXBCdWZQcmVfY2xpcENvbnRleHREcmF3ID0gbnVsbCwgdGhpcy5DSEFOTkVMX0NPTE9SUyA9IG5ldyBBcnJheSgpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gQSgpIHsKICAgICAgICBBdCB8fCAodGhpcy5hID0gMSwgdGhpcy5yID0gMSwgdGhpcy5nID0gMSwgdGhpcy5iID0gMSwgdGhpcy5zY2FsZSA9IDEsIHRoaXMuXyRobyA9IDEsIHRoaXMuYmxlbmRNb2RlID0gYXQuTDJEX0NPTE9SX0JMRU5EX01PREVfTVVMVCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIEkoKSB7CiAgICAgICAgQXQgfHwgKHRoaXMuXyRrUCA9IG51bGwsIHRoaXMuXyRkciA9IG51bGwsIHRoaXMuXyRBaSA9ICEwLCB0aGlzLl8kbVMgPSBudWxsKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdygpIHt9CgogICAgICBmdW5jdGlvbiB4KCkgewogICAgICAgIEF0IHx8ICh0aGlzLl8kVlAgPSAwLCB0aGlzLl8kd0wgPSBudWxsLCB0aGlzLl8kR1AgPSBudWxsLCB0aGlzLl8kOG8gPSB4Ll8kZHMsIHRoaXMuXyQyciA9IC0xLCB0aGlzLl8kTzIgPSAwLCB0aGlzLl8kcmkgPSAwKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gTygpIHt9CgogICAgICBmdW5jdGlvbiBEKCkgewogICAgICAgIEF0IHx8ICh0aGlzLl8kT2IgPSBudWxsKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gUigpIHsKICAgICAgICB0aGlzLm0gPSBuZXcgRmxvYXQzMkFycmF5KDE2KSwgdGhpcy5pZGVudGl0eSgpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBiKHQpIHsKICAgICAgICBBdCB8fCBldC5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLCB0KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gRigpIHsKICAgICAgICBBdCB8fCAodGhpcy5fJDcgPSAxLCB0aGlzLl8kZiA9IDAsIHRoaXMuXyRIID0gMCwgdGhpcy5fJGcgPSAxLCB0aGlzLl8kayA9IDAsIHRoaXMuXyR3ID0gMCwgdGhpcy5fJGhpID0gU1RBVEVfSURFTlRJVFksIHRoaXMuXyRaID0gXyRwUyk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIEMoKSB7CiAgICAgICAgQXQgfHwgKHMucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMubW90aW9ucyA9IG5ldyBBcnJheSgpLCB0aGlzLl8kN3IgPSBudWxsLCB0aGlzLl8kN3IgPSBDLl8kQ28rKywgdGhpcy5fJEQwID0gMzAsIHRoaXMuXyR5VCA9IDAsIHRoaXMuXyRFID0gITAsIHRoaXMubG9vcEZhZGVJbiA9ICEwLCB0aGlzLl8kQVMgPSAtMSwgXyRhMCgpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gTigpIHsKICAgICAgICB0aGlzLl8kUCA9IG5ldyBGbG9hdDMyQXJyYXkoMTAwKSwgdGhpcy5zaXplID0gMDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gQigpIHsKICAgICAgICB0aGlzLl8kNFAgPSBudWxsLCB0aGlzLl8kSTAgPSBudWxsLCB0aGlzLl8kUlAgPSBudWxsOwogICAgICB9CgogICAgICBmdW5jdGlvbiBVKCkge30KCiAgICAgIGZ1bmN0aW9uIEcoKSB7fQoKICAgICAgZnVuY3Rpb24gWSh0KSB7CiAgICAgICAgQXQgfHwgKHRoaXMuXyRRVCA9ICEwLCB0aGlzLl8kY28gPSAtMSwgdGhpcy5fJHFvID0gMCwgdGhpcy5fJHBiID0gbmV3IEFycmF5KFkuXyRpcyksIHRoaXMuXyRfMiA9IG5ldyBGbG9hdDMyQXJyYXkoWS5fJGlzKSwgdGhpcy5fJHZyID0gbmV3IEZsb2F0MzJBcnJheShZLl8kaXMpLCB0aGlzLl8kUnIgPSBuZXcgRmxvYXQzMkFycmF5KFkuXyRpcyksIHRoaXMuXyRPciA9IG5ldyBGbG9hdDMyQXJyYXkoWS5fJGlzKSwgdGhpcy5fJGZzID0gbmV3IEZsb2F0MzJBcnJheShZLl8kaXMpLCB0aGlzLl8kSnMgPSBuZXcgQXJyYXkoWS5fJGlzKSwgdGhpcy5fJDNTID0gbmV3IEFycmF5KCksIHRoaXMuXyRhUyA9IG5ldyBBcnJheSgpLCB0aGlzLl8kQm8gPSBudWxsLCB0aGlzLl8kRjIgPSBuZXcgQXJyYXkoKSwgdGhpcy5fJGRiID0gbmV3IEFycmF5KCksIHRoaXMuXyQ4YiA9IG5ldyBBcnJheSgpLCB0aGlzLl8kSHIgPSBuZXcgQXJyYXkoKSwgdGhpcy5fJFdzID0gbnVsbCwgdGhpcy5fJFZzID0gbnVsbCwgdGhpcy5fJEVyID0gbnVsbCwgdGhpcy5fJEVzID0gbmV3IEludDE2QXJyYXkoVS5fJFFiKSwgdGhpcy5fJFpQID0gbmV3IEZsb2F0MzJBcnJheSgyICogVS5fJDFyKSwgdGhpcy5fJFJpID0gdCwgdGhpcy5fJGIwID0gWS5fJEhQKyssIHRoaXMuY2xpcE1hbmFnZXIgPSBudWxsLCB0aGlzLmRwX3dlYmdsID0gbnVsbCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGsoKSB7fQoKICAgICAgZnVuY3Rpb24gVigpIHsKICAgICAgICBBdCB8fCAodGhpcy5fJDEyID0gbnVsbCwgdGhpcy5fJGJiID0gbnVsbCwgdGhpcy5fJF9MID0gbnVsbCwgdGhpcy5fJGpvID0gbnVsbCwgdGhpcy5fJGlMID0gbnVsbCwgdGhpcy5fJDBMID0gbnVsbCwgdGhpcy5fJEJyID0gbnVsbCwgdGhpcy5fJERyID0gbnVsbCwgdGhpcy5fJENiID0gbnVsbCwgdGhpcy5fJG1yID0gbnVsbCwgdGhpcy5fJF9MID0gd3QuU1RBVEVfRklSU1QsIHRoaXMuXyRCciA9IDRlMywgdGhpcy5fJERyID0gMTAwLCB0aGlzLl8kQ2IgPSA1MCwgdGhpcy5fJG1yID0gMTUwLCB0aGlzLl8kam8gPSAhMCwgdGhpcy5fJGlMID0gIlBBUkFNX0VZRV9MX09QRU4iLCB0aGlzLl8kMEwgPSAiUEFSQU1fRVlFX1JfT1BFTiIpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBYKCkgewogICAgICAgIEF0IHx8IChFLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLl8kc2IgPSBuZXcgSW50MzJBcnJheShYLl8kQXMpLCB0aGlzLl8kVTIgPSBuZXcgQXJyYXkoKSwgdGhpcy50cmFuc2Zvcm0gPSBudWxsLCB0aGlzLmdsID0gbnVsbCwgbnVsbCA9PSBYLl8kTlQgJiYgKFguXyROVCA9IFguXyQ5cigyNTYpLCBYLl8kdlMgPSBYLl8kOXIoMjU2KSwgWC5fJG5vID0gWC5fJHZiKDI1NikpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24geigpIHsKICAgICAgICBBdCB8fCAoSS5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy5fJEdTID0gbnVsbCwgdGhpcy5fJFkwID0gbnVsbCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIEgodCkgewogICAgICAgIF90LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHQpLCB0aGlzLl8kOHIgPSBJLl8kdXIsIHRoaXMuXyRZciA9IG51bGwsIHRoaXMuXyRXciA9IG51bGw7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIFcoKSB7CiAgICAgICAgQXQgfHwgKE0ucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuXyRnUCA9IG51bGwsIHRoaXMuXyRkciA9IG51bGwsIHRoaXMuXyRHUyA9IG51bGwsIHRoaXMuXyRxYiA9IG51bGwsIHRoaXMuXyRMYiA9IG51bGwsIHRoaXMuXyRtUyA9IG51bGwpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBqKCkgewogICAgICAgIEF0IHx8ICh0aGlzLl8kTkwgPSBudWxsLCB0aGlzLl8kM1MgPSBudWxsLCB0aGlzLl8kYVMgPSBudWxsLCBqLl8kNDIrKyk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHEoKSB7CiAgICAgICAgQXQgfHwgKGkucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuXyR6byA9IG5ldyBYKCkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBKKCkgewogICAgICAgIEF0IHx8IChzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLm1vdGlvbnMgPSBuZXcgQXJyYXkoKSwgdGhpcy5fJG8yID0gbnVsbCwgdGhpcy5fJDdyID0gSi5fJENvKyssIHRoaXMuXyREMCA9IDMwLCB0aGlzLl8keVQgPSAwLCB0aGlzLl8kRSA9ICExLCB0aGlzLmxvb3BGYWRlSW4gPSAhMCwgdGhpcy5fJHJyID0gLTEsIHRoaXMuXyRlUCA9IDApOwogICAgICB9CgogICAgICBmdW5jdGlvbiBRKHQsIGkpIHsKICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSh0LmdldFVpbnQ4KGkpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gTigpIHsKICAgICAgICB0aGlzLl8kUCA9IG5ldyBGbG9hdDMyQXJyYXkoMTAwKSwgdGhpcy5zaXplID0gMDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gQigpIHsKICAgICAgICB0aGlzLl8kNFAgPSBudWxsLCB0aGlzLl8kSTAgPSBudWxsLCB0aGlzLl8kUlAgPSBudWxsOwogICAgICB9CgogICAgICBmdW5jdGlvbiBaKCkgewogICAgICAgIEF0IHx8IChJLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLl8kbyA9IDAsIHRoaXMuXyRBID0gMCwgdGhpcy5fJEdTID0gbnVsbCwgdGhpcy5fJEVvID0gbnVsbCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIEsodCkgewogICAgICAgIF90LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHQpLCB0aGlzLl8kOHIgPSBJLl8kdXIsIHRoaXMuXyRDciA9IG51bGwsIHRoaXMuXyRociA9IG51bGw7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHR0KCkgewogICAgICAgIEF0IHx8ICh0aGlzLnZpc2libGUgPSAhMCwgdGhpcy5fJGcwID0gITEsIHRoaXMuXyROTCA9IG51bGwsIHRoaXMuXyQzUyA9IG51bGwsIHRoaXMuXyRhUyA9IG51bGwsIHR0Ll8kNDIrKyk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGl0KHQpIHsKICAgICAgICB0aGlzLl8kVlMgPSBudWxsLCB0aGlzLl8kZTAgPSBudWxsLCB0aGlzLl8kZTAgPSB0OwogICAgICB9CgogICAgICBmdW5jdGlvbiBldCh0KSB7CiAgICAgICAgQXQgfHwgKHRoaXMuaWQgPSB0KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcnQoKSB7fQoKICAgICAgZnVuY3Rpb24gb3QoKSB7CiAgICAgICAgQXQgfHwgKHRoaXMuXyQ0UyA9IG51bGwpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBudCh0LCBpKSB7CiAgICAgICAgdGhpcy5jYW52YXMgPSB0LCB0aGlzLmNvbnRleHQgPSBpLCB0aGlzLnZpZXdwb3J0ID0gbmV3IEFycmF5KDAsIDAsIHQud2lkdGgsIHQuaGVpZ2h0KSwgdGhpcy5fJDZyID0gMSwgdGhpcy5fJHhQID0gMCwgdGhpcy5fJDNyID0gMSwgdGhpcy5fJHVQID0gMCwgdGhpcy5fJFFvID0gLTEsIHRoaXMuY2FjaGVJbWFnZXMgPSB7fTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gc3QoKSB7CiAgICAgICAgQXQgfHwgKHRoaXMuXyRUVCA9IG51bGwsIHRoaXMuXyRMVCA9IG51bGwsIHRoaXMuXyRGUyA9IG51bGwsIHRoaXMuXyR3TCA9IG51bGwpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBfdCh0KSB7CiAgICAgICAgQXQgfHwgKHRoaXMuXyRlMCA9IG51bGwsIHRoaXMuXyRJUCA9IG51bGwsIHRoaXMuXyRKUyA9ICExLCB0aGlzLl8kQVQgPSAhMCwgdGhpcy5fJGUwID0gdCwgdGhpcy50b3RhbFNjYWxlID0gMSwgdGhpcy5fJDdzID0gMSwgdGhpcy50b3RhbE9wYWNpdHkgPSAxKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYXQoKSB7fQoKICAgICAgZnVuY3Rpb24gaHQoKSB7fQoKICAgICAgZnVuY3Rpb24gbHQodCkgewogICAgICAgIEF0IHx8ICh0aGlzLl8kaWIgPSB0KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gJHQoKSB7CiAgICAgICAgQXQgfHwgKFcucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMuXyRMUCA9IC0xLCB0aGlzLl8kZDAgPSAwLCB0aGlzLl8kWW8gPSAwLCB0aGlzLl8kSlAgPSBudWxsLCB0aGlzLl8kNVAgPSBudWxsLCB0aGlzLl8kQlAgPSBudWxsLCB0aGlzLl8kRW8gPSBudWxsLCB0aGlzLl8kUWkgPSBudWxsLCB0aGlzLl8kNnMgPSAkdC5fJG1zLCB0aGlzLmN1bGxpbmcgPSAhMCwgdGhpcy5nbF9jYWNoZUltYWdlID0gbnVsbCwgdGhpcy5pbnN0YW5jZU5vID0gJHQuXyQ0MisrKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdXQodCkgewogICAgICAgIE10LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHQpLCB0aGlzLl8kOHIgPSBXLl8kdXIsIHRoaXMuXyRDciA9IG51bGwsIHRoaXMuXyRociA9IG51bGw7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHB0KCkgewogICAgICAgIEF0IHx8ICh0aGlzLnggPSBudWxsLCB0aGlzLnkgPSBudWxsKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZnQodCkgewogICAgICAgIEF0IHx8IChpLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpLCB0aGlzLmRyYXdQYXJhbVdlYkdMID0gbmV3IG10KHQpLCB0aGlzLmRyYXdQYXJhbVdlYkdMLnNldEdMKGF0LmdldEdMKHQpKSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGN0KCkgewogICAgICAgIEF0IHx8ICh0aGlzLm1vdGlvbnMgPSBudWxsLCB0aGlzLl8kZWIgPSAhMSwgdGhpcy5tb3Rpb25zID0gbmV3IEFycmF5KCkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBkdCgpIHsKICAgICAgICB0aGlzLl8kdzAgPSBudWxsLCB0aGlzLl8kQVQgPSAhMCwgdGhpcy5fJDlMID0gITEsIHRoaXMuXyR6MiA9IC0xLCB0aGlzLl8kYnMgPSAtMSwgdGhpcy5fJERvID0gLTEsIHRoaXMuXyRzciA9IG51bGwsIHRoaXMuXyRzciA9IGR0Ll8kR3MrKzsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gZ3QoKSB7CiAgICAgICAgdGhpcy5tID0gbmV3IEFycmF5KDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDEpOwogICAgICB9CgogICAgICBmdW5jdGlvbiB5dCh0KSB7CiAgICAgICAgQXQgfHwgZXQucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgdCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG10KHQpIHsKICAgICAgICBBdCB8fCAoRS5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKSwgdGhpcy50ZXh0dXJlcyA9IG5ldyBBcnJheSgpLCB0aGlzLnRyYW5zZm9ybSA9IG51bGwsIHRoaXMuZ2wgPSBudWxsLCB0aGlzLmdsbm8gPSB0LCB0aGlzLmZpcnN0RHJhdyA9ICEwLCB0aGlzLmFuaXNvdHJvcHlFeHQgPSBudWxsLCB0aGlzLm1heEFuaXNvdHJvcHkgPSAwLCB0aGlzLl8kQXMgPSAzMiwgdGhpcy5fJEdyID0gITEsIHRoaXMuXyROVCA9IG51bGwsIHRoaXMuXyR2UyA9IG51bGwsIHRoaXMuXyRubyA9IG51bGwsIHRoaXMudmVydFNoYWRlciA9IG51bGwsIHRoaXMuZnJhZ1NoYWRlciA9IG51bGwsIHRoaXMudmVydFNoYWRlck9mZiA9IG51bGwsIHRoaXMuZnJhZ1NoYWRlck9mZiA9IG51bGwpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBUdCh0LCBpLCBlKSB7CiAgICAgICAgcmV0dXJuIG51bGwgPT0gaSAmJiAoaSA9IHQuY3JlYXRlQnVmZmVyKCkpLCB0LmJpbmRCdWZmZXIodC5BUlJBWV9CVUZGRVIsIGkpLCB0LmJ1ZmZlckRhdGEodC5BUlJBWV9CVUZGRVIsIGUsIHQuRFlOQU1JQ19EUkFXKSwgaTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gUHQodCwgaSwgZSkgewogICAgICAgIHJldHVybiBudWxsID09IGkgJiYgKGkgPSB0LmNyZWF0ZUJ1ZmZlcigpKSwgdC5iaW5kQnVmZmVyKHQuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGkpLCB0LmJ1ZmZlckRhdGEodC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgZSwgdC5EWU5BTUlDX0RSQVcpLCBpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBTdCh0KSB7CiAgICAgICAgQXQgfHwgKHRoaXMuXyRQID0gbmV3IEludDhBcnJheSg4KSwgdGhpcy5fJFIwID0gbmV3IERhdGFWaWV3KHRoaXMuXyRQLmJ1ZmZlciksIHRoaXMuXyQzaSA9IG5ldyBJbnQ4QXJyYXkoMWUzKSwgdGhpcy5fJGhMID0gMCwgdGhpcy5fJHYwID0gMCwgdGhpcy5fJFMyID0gMCwgdGhpcy5fJEtvID0gbmV3IEFycmF5KCksIHRoaXMuXyRUID0gdCwgdGhpcy5fJEYgPSAwKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdnQoKSB7fQoKICAgICAgZnVuY3Rpb24gTHQoKSB7fQoKICAgICAgZnVuY3Rpb24gTXQodCkgewogICAgICAgIEF0IHx8ICh0aGlzLl8kZTAgPSBudWxsLCB0aGlzLl8kSVAgPSBudWxsLCB0aGlzLl8kVXMgPSBudWxsLCB0aGlzLl8kN3MgPSBudWxsLCB0aGlzLl8kSVMgPSBbITFdLCB0aGlzLl8kVlMgPSBudWxsLCB0aGlzLl8kQVQgPSAhMCwgdGhpcy5iYXNlT3BhY2l0eSA9IDEsIHRoaXMuY2xpcEJ1ZlByZV9jbGlwQ29udGV4dCA9IG51bGwsIHRoaXMuXyRlMCA9IHQpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBFdCgpIHt9CgogICAgICB2YXIgQXQgPSAhMDsKICAgICAgaS5fJDBzID0gMSwgaS5fJDRzID0gMiwgaS5fJDQyID0gMCwgaS5fJDYyID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciAmJiAoZSA9IG5ldyBEYXRhVmlldyhlKSksICEoZSBpbnN0YW5jZW9mIERhdGFWaWV3KSkgdGhyb3cgbmV3IGx0KCJfJFNTI2xvYWRNb2RlbChiKSAvIGIgXyR4IGJlIERhdGFWaWV3IG9yIEFycmF5QnVmZmVyIik7CgogICAgICAgICAgdmFyIHIsCiAgICAgICAgICAgICAgbyA9IG5ldyBTdChlKSwKICAgICAgICAgICAgICBuID0gby5fJFNUKCksCiAgICAgICAgICAgICAgcyA9IG8uXyRTVCgpLAogICAgICAgICAgICAgIGEgPSBvLl8kU1QoKTsKCiAgICAgICAgICBpZiAoMTA5ICE9IG4gfHwgMTExICE9IHMgfHwgOTkgIT0gYSkgdGhyb3cgbmV3IGx0KCJfJGdpIF8kQyBfJGxpICwgXyRRMCBfJFAwLiIpOwoKICAgICAgICAgIGlmIChyID0gby5fJFNUKCksIG8uXyRncihyKSwgciA+IEcuXyRUNykgewogICAgICAgICAgICB0Ll8kTlAgfD0gaS5fJDRzOwogICAgICAgICAgICB0aHJvdyBuZXcgbHQoIl8kZ2kgXyRDIF8kbGkgLCBfJG4wIF8kXyB2ZXJzaW9uIF8kbGkgKCBTREsgOiAiICsgRy5fJFQ3ICsgIiA8IF8kZjAgOiAiICsgciArICIgKUBfJFNTI2xvYWRNb2RlbCgpXG4iKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgaCA9IG8uXyRuUCgpOwoKICAgICAgICAgIGlmIChyID49IEcuXyRzNykgewogICAgICAgICAgICB2YXIgbCA9IG8uXyQ5VCgpLAogICAgICAgICAgICAgICAgJCA9IG8uXyQ5VCgpOwoKICAgICAgICAgICAgaWYgKC0zMDU4NCAhPSBsIHx8IC0zMDU4NCAhPSAkKSB0aHJvdyB0Ll8kTlAgfD0gaS5fJDBzLCBuZXcgbHQoIl8kZ2kgXyRDIF8kbGkgLCBfJDAgXyQ2IF8kVWkuIik7CiAgICAgICAgICB9CgogICAgICAgICAgdC5fJEtTKGgpOwoKICAgICAgICAgIHZhciB1ID0gdC5nZXRNb2RlbENvbnRleHQoKTsKICAgICAgICAgIHUuc2V0RHJhd1BhcmFtKHQuZ2V0RHJhd1BhcmFtKCkpLCB1LmluaXQoKTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICBfLl8kUmIodCk7CiAgICAgICAgfQogICAgICB9LCBpLnByb3RvdHlwZS5fJEtTID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kTVQgPSB0OwogICAgICB9LCBpLnByb3RvdHlwZS5nZXRNb2RlbEltcGwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG51bGwgPT0gdGhpcy5fJE1UICYmICh0aGlzLl8kTVQgPSBuZXcgcCgpLCB0aGlzLl8kTVQuXyR6UCgpKSwgdGhpcy5fJE1UOwogICAgICB9LCBpLnByb3RvdHlwZS5nZXRDYW52YXNXaWR0aCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLl8kTVQgPyAwIDogdGhpcy5fJE1ULmdldENhbnZhc1dpZHRoKCk7CiAgICAgIH0sIGkucHJvdG90eXBlLmdldENhbnZhc0hlaWdodCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLl8kTVQgPyAwIDogdGhpcy5fJE1ULmdldENhbnZhc0hlaWdodCgpOwogICAgICB9LCBpLnByb3RvdHlwZS5nZXRQYXJhbUZsb2F0ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gIm51bWJlciIgIT0gdHlwZW9mIHQgJiYgKHQgPSB0aGlzLl8kNVMuZ2V0UGFyYW1JbmRleCh1LmdldElEKHQpKSksIHRoaXMuXyQ1Uy5nZXRQYXJhbUZsb2F0KHQpOwogICAgICB9LCBpLnByb3RvdHlwZS5zZXRQYXJhbUZsb2F0ID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICAibnVtYmVyIiAhPSB0eXBlb2YgdCAmJiAodCA9IHRoaXMuXyQ1Uy5nZXRQYXJhbUluZGV4KHUuZ2V0SUQodCkpKSwgYXJndW1lbnRzLmxlbmd0aCA8IDMgJiYgKGUgPSAxKSwgdGhpcy5fJDVTLnNldFBhcmFtRmxvYXQodCwgdGhpcy5fJDVTLmdldFBhcmFtRmxvYXQodCkgKiAoMSAtIGUpICsgaSAqIGUpOwogICAgICB9LCBpLnByb3RvdHlwZS5hZGRUb1BhcmFtRmxvYXQgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICJudW1iZXIiICE9IHR5cGVvZiB0ICYmICh0ID0gdGhpcy5fJDVTLmdldFBhcmFtSW5kZXgodS5nZXRJRCh0KSkpLCBhcmd1bWVudHMubGVuZ3RoIDwgMyAmJiAoZSA9IDEpLCB0aGlzLl8kNVMuc2V0UGFyYW1GbG9hdCh0LCB0aGlzLl8kNVMuZ2V0UGFyYW1GbG9hdCh0KSArIGkgKiBlKTsKICAgICAgfSwgaS5wcm90b3R5cGUubXVsdFBhcmFtRmxvYXQgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgICJudW1iZXIiICE9IHR5cGVvZiB0ICYmICh0ID0gdGhpcy5fJDVTLmdldFBhcmFtSW5kZXgodS5nZXRJRCh0KSkpLCBhcmd1bWVudHMubGVuZ3RoIDwgMyAmJiAoZSA9IDEpLCB0aGlzLl8kNVMuc2V0UGFyYW1GbG9hdCh0LCB0aGlzLl8kNVMuZ2V0UGFyYW1GbG9hdCh0KSAqICgxICsgKGkgLSAxKSAqIGUpKTsKICAgICAgfSwgaS5wcm90b3R5cGUuZ2V0UGFyYW1JbmRleCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyQ1Uy5nZXRQYXJhbUluZGV4KHUuZ2V0SUQodCkpOwogICAgICB9LCBpLnByb3RvdHlwZS5sb2FkUGFyYW0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fJDVTLmxvYWRQYXJhbSgpOwogICAgICB9LCBpLnByb3RvdHlwZS5zYXZlUGFyYW0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fJDVTLnNhdmVQYXJhbSgpOwogICAgICB9LCBpLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuXyQ1Uy5pbml0KCk7CiAgICAgIH0sIGkucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLl8kNVMudXBkYXRlKCk7CiAgICAgIH0sIGkucHJvdG90eXBlLl8kUnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF8uXyRsaSgiXyQ2MCBfJFBUIF8kUnMoKSIpLCAtMTsKICAgICAgfSwgaS5wcm90b3R5cGUuXyREcyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgXy5fJGxpKCJfJDYwIF8kUFQgXyRTUyNfJERzKCkgXG4iKTsKICAgICAgfSwgaS5wcm90b3R5cGUuXyRLMiA9IGZ1bmN0aW9uICgpIHt9LCBpLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKCkge30sIGkucHJvdG90eXBlLmdldE1vZGVsQ29udGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJDVTOwogICAgICB9LCBpLnByb3RvdHlwZS5fJHMyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kTlA7CiAgICAgIH0sIGkucHJvdG90eXBlLl8kUDcgPSBmdW5jdGlvbiAodCwgaSwgZSwgcikgewogICAgICAgIHZhciBvID0gLTEsCiAgICAgICAgICAgIG4gPSAwLAogICAgICAgICAgICBzID0gdGhpczsKICAgICAgICBpZiAoMCAhPSBlKSB7CiAgICAgICAgICBpZiAoMSA9PSB0Lmxlbmd0aCkgewogICAgICAgICAgICB2YXIgXyA9IHRbMF0sCiAgICAgICAgICAgICAgICBhID0gMCAhPSBzLmdldFBhcmFtRmxvYXQoXyksCiAgICAgICAgICAgICAgICBoID0gaVswXSwKICAgICAgICAgICAgICAgIGwgPSBzLmdldFBhcnRzT3BhY2l0eShoKSwKICAgICAgICAgICAgICAgICQgPSBlIC8gcjsKICAgICAgICAgICAgYSA/IChsICs9ICQpID4gMSAmJiAobCA9IDEpIDogKGwgLT0gJCkgPCAwICYmIChsID0gMCksIHMuc2V0UGFydHNPcGFjaXR5KGgsIGwpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCB0Lmxlbmd0aDsgdSsrKSB7CiAgICAgICAgICAgICAgdmFyIF8gPSB0W3VdLAogICAgICAgICAgICAgICAgICBwID0gMCAhPSBzLmdldFBhcmFtRmxvYXQoXyk7CgogICAgICAgICAgICAgIGlmIChwKSB7CiAgICAgICAgICAgICAgICBpZiAobyA+PSAwKSBicmVhazsKICAgICAgICAgICAgICAgIG8gPSB1OwogICAgICAgICAgICAgICAgdmFyIGggPSBpW3VdOwogICAgICAgICAgICAgICAgbiA9IHMuZ2V0UGFydHNPcGFjaXR5KGgpLCBuICs9IGUgLyByLCBuID4gMSAmJiAobiA9IDEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbyA8IDAgJiYgKGNvbnNvbGUubG9nKCJObyBfJHdpIF8kcTAvIF8kVSBkZWZhdWx0WyVzXSIsIHRbMF0pLCBvID0gMCwgbiA9IDEsIHMubG9hZFBhcmFtKCksIHMuc2V0UGFyYW1GbG9hdCh0W29dLCBuKSwgcy5zYXZlUGFyYW0oKSk7CgogICAgICAgICAgICBmb3IgKHZhciB1ID0gMDsgdSA8IHQubGVuZ3RoOyB1KyspIHsKICAgICAgICAgICAgICB2YXIgaCA9IGlbdV07CiAgICAgICAgICAgICAgaWYgKG8gPT0gdSkgcy5zZXRQYXJ0c09wYWNpdHkoaCwgbik7ZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgZiwKICAgICAgICAgICAgICAgICAgICBjID0gcy5nZXRQYXJ0c09wYWNpdHkoaCk7CiAgICAgICAgICAgICAgICBmID0gbiA8IC41ID8gLS41ICogbiAvIC41ICsgMSA6IC41ICogKDEgLSBuKSAvIC41OwogICAgICAgICAgICAgICAgdmFyIGQgPSAoMSAtIGYpICogKDEgLSBuKTsKICAgICAgICAgICAgICAgIGQgPiAuMTUgJiYgKGYgPSAxIC0gLjE1IC8gKDEgLSBuKSksIGMgPiBmICYmIChjID0gZiksIHMuc2V0UGFydHNPcGFjaXR5KGgsIGMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBmb3IgKHZhciB1ID0gMDsgdSA8IHQubGVuZ3RoOyB1KyspIHsKICAgICAgICAgIHZhciBfID0gdFt1XSwKICAgICAgICAgICAgICBoID0gaVt1XSwKICAgICAgICAgICAgICBwID0gMCAhPSBzLmdldFBhcmFtRmxvYXQoXyk7CiAgICAgICAgICBzLnNldFBhcnRzT3BhY2l0eShoLCBwID8gMSA6IDApOwogICAgICAgIH0KICAgICAgfSwgaS5wcm90b3R5cGUuc2V0UGFydHNPcGFjaXR5ID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICAibnVtYmVyIiAhPSB0eXBlb2YgdCAmJiAodCA9IHRoaXMuXyQ1Uy5nZXRQYXJ0c0RhdGFJbmRleChsLmdldElEKHQpKSksIHRoaXMuXyQ1Uy5zZXRQYXJ0c09wYWNpdHkodCwgaSk7CiAgICAgIH0sIGkucHJvdG90eXBlLmdldFBhcnRzRGF0YUluZGV4ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGwgfHwgKHQgPSBsLmdldElEKHQpKSwgdGhpcy5fJDVTLmdldFBhcnRzRGF0YUluZGV4KHQpOwogICAgICB9LCBpLnByb3RvdHlwZS5nZXRQYXJ0c09wYWNpdHkgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiAibnVtYmVyIiAhPSB0eXBlb2YgdCAmJiAodCA9IHRoaXMuXyQ1Uy5nZXRQYXJ0c0RhdGFJbmRleChsLmdldElEKHQpKSksIHQgPCAwID8gMCA6IHRoaXMuXyQ1Uy5nZXRQYXJ0c09wYWNpdHkodCk7CiAgICAgIH0sIGkucHJvdG90eXBlLmdldERyYXdQYXJhbSA9IGZ1bmN0aW9uICgpIHt9LCBpLnByb3RvdHlwZS5nZXREcmF3RGF0YUluZGV4ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJDVTLmdldERyYXdEYXRhSW5kZXgoYi5nZXRJRCh0KSk7CiAgICAgIH0sIGkucHJvdG90eXBlLmdldERyYXdEYXRhID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJDVTLmdldERyYXdEYXRhKHQpOwogICAgICB9LCBpLnByb3RvdHlwZS5nZXRUcmFuc2Zvcm1lZFBvaW50cyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGkgPSB0aGlzLl8kNVMuXyRDMih0KTsKCiAgICAgICAgcmV0dXJuIGkgaW5zdGFuY2VvZiB1dCA/IGkuZ2V0VHJhbnNmb3JtZWRQb2ludHMoKSA6IG51bGw7CiAgICAgIH0sIGkucHJvdG90eXBlLmdldEluZGV4QXJyYXkgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGlmICh0IDwgMCB8fCB0ID49IHRoaXMuXyQ1Uy5fJGFTLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgICAgICAgdmFyIGkgPSB0aGlzLl8kNVMuXyRhU1t0XTsKICAgICAgICByZXR1cm4gbnVsbCAhPSBpICYmIGkuZ2V0VHlwZSgpID09IFcuXyR3YiAmJiBpIGluc3RhbmNlb2YgJHQgPyBpLmdldEluZGV4QXJyYXkoKSA6IG51bGw7CiAgICAgIH0sIGUuQ0hBTk5FTF9DT1VOVCA9IDQsIGUuUkVOREVSX1RFWFRVUkVfVVNFX01JUE1BUCA9ICExLCBlLk5PVF9VU0VEX0ZSQU1FID0gLTEwMCwgZS5wcm90b3R5cGUuXyRMNyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy50bXBNb2RlbFRvVmlld01hdHJpeCAmJiAodGhpcy50bXBNb2RlbFRvVmlld01hdHJpeCA9IG51bGwpLCB0aGlzLnRtcE1hdHJpeDIgJiYgKHRoaXMudG1wTWF0cml4MiA9IG51bGwpLCB0aGlzLnRtcE1hdHJpeEZvck1hc2sgJiYgKHRoaXMudG1wTWF0cml4Rm9yTWFzayA9IG51bGwpLCB0aGlzLnRtcE1hdHJpeEZvckRyYXcgJiYgKHRoaXMudG1wTWF0cml4Rm9yRHJhdyA9IG51bGwpLCB0aGlzLnRtcEJvdW5kc09uTW9kZWwgJiYgKHRoaXMudG1wQm91bmRzT25Nb2RlbCA9IG51bGwpLCB0aGlzLkNIQU5ORUxfQ09MT1JTKSB7CiAgICAgICAgICBmb3IgKHZhciB0ID0gdGhpcy5DSEFOTkVMX0NPTE9SUy5sZW5ndGggLSAxOyB0ID49IDA7IC0tdCkgewogICAgICAgICAgICB0aGlzLkNIQU5ORUxfQ09MT1JTLnNwbGljZSh0LCAxKTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLkNIQU5ORUxfQ09MT1JTID0gW107CiAgICAgICAgfQoKICAgICAgICB0aGlzLnJlbGVhc2VTaGFkZXIoKTsKICAgICAgfSwgZS5wcm90b3R5cGUucmVsZWFzZVNoYWRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciB0ID0gYXQuZnJhbWVCdWZmZXJzLmxlbmd0aCwgaSA9IDA7IGkgPCB0OyBpKyspIHsKICAgICAgICAgIHRoaXMuZ2wuZGVsZXRlRnJhbWVidWZmZXIoYXQuZnJhbWVCdWZmZXJzW2ldLmZyYW1lYnVmZmVyKTsKICAgICAgICB9CgogICAgICAgIGF0LmZyYW1lQnVmZmVycyA9IFtdLCBhdC5nbENvbnRleHQgPSBbXTsKICAgICAgfSwgZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICAgICAgZm9yICh2YXIgbyA9IDA7IG8gPCBpLmxlbmd0aDsgbysrKSB7CiAgICAgICAgICB2YXIgbiA9IGlbb10uZ2V0Q2xpcElETGlzdCgpOwoKICAgICAgICAgIGlmIChudWxsICE9IG4pIHsKICAgICAgICAgICAgdmFyIHMgPSB0aGlzLmZpbmRTYW1lQ2xpcChuKTsKICAgICAgICAgICAgbnVsbCA9PSBzICYmIChzID0gbmV3IHIodGhpcywgdCwgbiksIHRoaXMuY2xpcENvbnRleHRMaXN0LnB1c2gocykpOwoKICAgICAgICAgICAgdmFyIF8gPSBpW29dLmdldERyYXdEYXRhSUQoKSwKICAgICAgICAgICAgICAgIGEgPSB0LmdldERyYXdEYXRhSW5kZXgoXyk7CgogICAgICAgICAgICBzLmFkZENsaXBwZWREcmF3RGF0YShfLCBhKTsKICAgICAgICAgICAgZVtvXS5jbGlwQnVmUHJlX2NsaXBDb250ZXh0ID0gczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIGUucHJvdG90eXBlLmdldE1hc2tSZW5kZXJUZXh0dXJlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0ID0gbnVsbDsKICAgICAgICByZXR1cm4gdCA9IHRoaXMuZHBfd2ViZ2wuY3JlYXRlRnJhbWVidWZmZXIoKSwgYXQuZnJhbWVCdWZmZXJzW3RoaXMuZHBfd2ViZ2wuZ2xub10gPSB0LCB0aGlzLmRwX3dlYmdsLmdsbm87CiAgICAgIH0sIGUucHJvdG90eXBlLnNldHVwQ2xpcCA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgZm9yICh2YXIgZSA9IDAsIHIgPSAwOyByIDwgdGhpcy5jbGlwQ29udGV4dExpc3QubGVuZ3RoOyByKyspIHsKICAgICAgICAgIHZhciBvID0gdGhpcy5jbGlwQ29udGV4dExpc3Rbcl07CiAgICAgICAgICB0aGlzLmNhbGNDbGlwcGVkRHJhd1RvdGFsQm91bmRzKHQsIG8pLCBvLmlzVXNpbmcgJiYgZSsrOwogICAgICAgIH0KCiAgICAgICAgaWYgKGUgPiAwKSB7CiAgICAgICAgICB2YXIgbiA9IGkuZ2wuZ2V0UGFyYW1ldGVyKGkuZ2wuRlJBTUVCVUZGRVJfQklORElORyksCiAgICAgICAgICAgICAgcyA9IG5ldyBBcnJheSg0KTsKICAgICAgICAgIHNbMF0gPSAwLCBzWzFdID0gMCwgc1syXSA9IGkuZ2wuY2FudmFzLndpZHRoLCBzWzNdID0gaS5nbC5jYW52YXMuaGVpZ2h0LCBpLmdsLnZpZXdwb3J0KDAsIDAsIGF0LmNsaXBwaW5nTWFza0J1ZmZlclNpemUsIGF0LmNsaXBwaW5nTWFza0J1ZmZlclNpemUpLCB0aGlzLnNldHVwTGF5b3V0Qm91bmRzKGUpLCBpLmdsLmJpbmRGcmFtZWJ1ZmZlcihpLmdsLkZSQU1FQlVGRkVSLCBhdC5mcmFtZUJ1ZmZlcnNbdGhpcy5jdXJGcmFtZU5vXS5mcmFtZWJ1ZmZlciksIGkuZ2wuY2xlYXJDb2xvcigwLCAwLCAwLCAwKSwgaS5nbC5jbGVhcihpLmdsLkNPTE9SX0JVRkZFUl9CSVQpOwoKICAgICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdGhpcy5jbGlwQ29udGV4dExpc3QubGVuZ3RoOyByKyspIHsKICAgICAgICAgICAgdmFyIG8gPSB0aGlzLmNsaXBDb250ZXh0TGlzdFtyXSwKICAgICAgICAgICAgICAgIF8gPSBvLmFsbENsaXBwZWREcmF3UmVjdCwKICAgICAgICAgICAgICAgIGEgPSAoby5sYXlvdXRDaGFubmVsTm8sIG8ubGF5b3V0Qm91bmRzKTsKICAgICAgICAgICAgdGhpcy50bXBCb3VuZHNPbk1vZGVsLl8kakwoXyksIHRoaXMudG1wQm91bmRzT25Nb2RlbC5leHBhbmQoLjA1ICogXy53aWR0aCwgLjA1ICogXy5oZWlnaHQpOwogICAgICAgICAgICB2YXIgaCA9IGEud2lkdGggLyB0aGlzLnRtcEJvdW5kc09uTW9kZWwud2lkdGgsCiAgICAgICAgICAgICAgICBsID0gYS5oZWlnaHQgLyB0aGlzLnRtcEJvdW5kc09uTW9kZWwuaGVpZ2h0OwogICAgICAgICAgICB0aGlzLnRtcE1hdHJpeDIuaWRlbnRpdHkoKSwgdGhpcy50bXBNYXRyaXgyLnRyYW5zbGF0ZSgtMSwgLTEsIDApLCB0aGlzLnRtcE1hdHJpeDIuc2NhbGUoMiwgMiwgMSksIHRoaXMudG1wTWF0cml4Mi50cmFuc2xhdGUoYS54LCBhLnksIDApLCB0aGlzLnRtcE1hdHJpeDIuc2NhbGUoaCwgbCwgMSksIHRoaXMudG1wTWF0cml4Mi50cmFuc2xhdGUoLXRoaXMudG1wQm91bmRzT25Nb2RlbC54LCAtdGhpcy50bXBCb3VuZHNPbk1vZGVsLnksIDApLCB0aGlzLnRtcE1hdHJpeEZvck1hc2suc2V0TWF0cml4KHRoaXMudG1wTWF0cml4Mi5tKSwgdGhpcy50bXBNYXRyaXgyLmlkZW50aXR5KCksIHRoaXMudG1wTWF0cml4Mi50cmFuc2xhdGUoYS54LCBhLnksIDApLCB0aGlzLnRtcE1hdHJpeDIuc2NhbGUoaCwgbCwgMSksIHRoaXMudG1wTWF0cml4Mi50cmFuc2xhdGUoLXRoaXMudG1wQm91bmRzT25Nb2RlbC54LCAtdGhpcy50bXBCb3VuZHNPbk1vZGVsLnksIDApLCB0aGlzLnRtcE1hdHJpeEZvckRyYXcuc2V0TWF0cml4KHRoaXMudG1wTWF0cml4Mi5tKTsKCiAgICAgICAgICAgIGZvciAodmFyICQgPSB0aGlzLnRtcE1hdHJpeEZvck1hc2suZ2V0QXJyYXkoKSwgdSA9IDA7IHUgPCAxNjsgdSsrKSB7CiAgICAgICAgICAgICAgby5tYXRyaXhGb3JNYXNrW3VdID0gJFt1XTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yICh2YXIgcCA9IHRoaXMudG1wTWF0cml4Rm9yRHJhdy5nZXRBcnJheSgpLCB1ID0gMDsgdSA8IDE2OyB1KyspIHsKICAgICAgICAgICAgICBvLm1hdHJpeEZvckRyYXdbdV0gPSBwW3VdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKHZhciBmID0gby5jbGlwcGluZ01hc2tEcmF3SW5kZXhMaXN0Lmxlbmd0aCwgYyA9IDA7IGMgPCBmOyBjKyspIHsKICAgICAgICAgICAgICB2YXIgZCA9IG8uY2xpcHBpbmdNYXNrRHJhd0luZGV4TGlzdFtjXSwKICAgICAgICAgICAgICAgICAgZyA9IHQuZ2V0RHJhd0RhdGEoZCksCiAgICAgICAgICAgICAgICAgIHkgPSB0Ll8kQzIoZCk7CgogICAgICAgICAgICAgIGkuc2V0Q2xpcEJ1ZlByZV9jbGlwQ29udGV4dEZvck1hc2sobyksIGcuZHJhdyhpLCB0LCB5KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGkuZ2wuYmluZEZyYW1lYnVmZmVyKGkuZ2wuRlJBTUVCVUZGRVIsIG4pLCBpLnNldENsaXBCdWZQcmVfY2xpcENvbnRleHRGb3JNYXNrKG51bGwpLCBpLmdsLnZpZXdwb3J0KHNbMF0sIHNbMV0sIHNbMl0sIHNbM10pOwogICAgICAgIH0KICAgICAgfSwgZS5wcm90b3R5cGUuZ2V0Q29sb3JCdWZmZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3JCdWZmZXI7CiAgICAgIH0sIGUucHJvdG90eXBlLmZpbmRTYW1lQ2xpcCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNsaXBDb250ZXh0TGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIGUgPSB0aGlzLmNsaXBDb250ZXh0TGlzdFtpXSwKICAgICAgICAgICAgICByID0gZS5jbGlwSURMaXN0Lmxlbmd0aDsKCiAgICAgICAgICBpZiAociA9PSB0Lmxlbmd0aCkgewogICAgICAgICAgICBmb3IgKHZhciBvID0gMCwgbiA9IDA7IG4gPCByOyBuKyspIHsKICAgICAgICAgICAgICBmb3IgKHZhciBzID0gZS5jbGlwSURMaXN0W25dLCBfID0gMDsgXyA8IHI7IF8rKykgewogICAgICAgICAgICAgICAgaWYgKHRbX10gPT0gcykgewogICAgICAgICAgICAgICAgICBvKys7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG8gPT0gcikgcmV0dXJuIGU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSwgZS5wcm90b3R5cGUuY2FsY0NsaXBwZWREcmF3VG90YWxCb3VuZHMgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIGZvciAodmFyIGUgPSB0Ll8kUmkuZ2V0TW9kZWxJbXBsKCkuZ2V0Q2FudmFzV2lkdGgoKSwgciA9IHQuXyRSaS5nZXRNb2RlbEltcGwoKS5nZXRDYW52YXNIZWlnaHQoKSwgbyA9IGUgPiByID8gZSA6IHIsIG4gPSBvLCBzID0gbywgXyA9IDAsIGEgPSAwLCBoID0gaS5jbGlwcGVkRHJhd0NvbnRleHRMaXN0Lmxlbmd0aCwgbCA9IDA7IGwgPCBoOyBsKyspIHsKICAgICAgICAgIHZhciAkID0gaS5jbGlwcGVkRHJhd0NvbnRleHRMaXN0W2xdLAogICAgICAgICAgICAgIHUgPSAkLmRyYXdEYXRhSW5kZXgsCiAgICAgICAgICAgICAgcCA9IHQuXyRDMih1KTsKCiAgICAgICAgICBpZiAocC5fJHlvKCkpIHsKICAgICAgICAgICAgZm9yICh2YXIgZiA9IHAuZ2V0VHJhbnNmb3JtZWRQb2ludHMoKSwgYyA9IGYubGVuZ3RoLCBkID0gW10sIGcgPSBbXSwgeSA9IDAsIG0gPSBVLl8kaTI7IG0gPCBjOyBtICs9IFUuXyRObykgewogICAgICAgICAgICAgIGRbeV0gPSBmW21dLCBnW3ldID0gZlttICsgMV0sIHkrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIFQgPSBNYXRoLm1pbi5hcHBseShudWxsLCBkKSwKICAgICAgICAgICAgICAgIFAgPSBNYXRoLm1pbi5hcHBseShudWxsLCBnKSwKICAgICAgICAgICAgICAgIFMgPSBNYXRoLm1heC5hcHBseShudWxsLCBkKSwKICAgICAgICAgICAgICAgIHYgPSBNYXRoLm1heC5hcHBseShudWxsLCBnKTsKICAgICAgICAgICAgVCA8IG4gJiYgKG4gPSBUKSwgUCA8IHMgJiYgKHMgPSBQKSwgUyA+IF8gJiYgKF8gPSBTKSwgdiA+IGEgJiYgKGEgPSB2KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChuID09IG8pIGkuYWxsQ2xpcHBlZERyYXdSZWN0LnggPSAwLCBpLmFsbENsaXBwZWREcmF3UmVjdC55ID0gMCwgaS5hbGxDbGlwcGVkRHJhd1JlY3Qud2lkdGggPSAwLCBpLmFsbENsaXBwZWREcmF3UmVjdC5oZWlnaHQgPSAwLCBpLmlzVXNpbmcgPSAhMTtlbHNlIHsKICAgICAgICAgIHZhciBMID0gXyAtIG4sCiAgICAgICAgICAgICAgTSA9IGEgLSBzOwogICAgICAgICAgaS5hbGxDbGlwcGVkRHJhd1JlY3QueCA9IG4sIGkuYWxsQ2xpcHBlZERyYXdSZWN0LnkgPSBzLCBpLmFsbENsaXBwZWREcmF3UmVjdC53aWR0aCA9IEwsIGkuYWxsQ2xpcHBlZERyYXdSZWN0LmhlaWdodCA9IE0sIGkuaXNVc2luZyA9ICEwOwogICAgICAgIH0KICAgICAgfSwgZS5wcm90b3R5cGUuc2V0dXBMYXlvdXRCb3VuZHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBpID0gdCAvIGUuQ0hBTk5FTF9DT1VOVCwKICAgICAgICAgICAgciA9IHQgJSBlLkNIQU5ORUxfQ09VTlQ7CiAgICAgICAgaSA9IH5+aSwgciA9IH5+cjsKCiAgICAgICAgZm9yICh2YXIgbyA9IDAsIG4gPSAwOyBuIDwgZS5DSEFOTkVMX0NPVU5UOyBuKyspIHsKICAgICAgICAgIHZhciBzID0gaSArIChuIDwgciA/IDEgOiAwKTsKICAgICAgICAgIGlmICgwID09IHMpIDtlbHNlIGlmICgxID09IHMpIHsKICAgICAgICAgICAgdmFyIGEgPSB0aGlzLmNsaXBDb250ZXh0TGlzdFtvKytdOwogICAgICAgICAgICBhLmxheW91dENoYW5uZWxObyA9IG4sIGEubGF5b3V0Qm91bmRzLnggPSAwLCBhLmxheW91dEJvdW5kcy55ID0gMCwgYS5sYXlvdXRCb3VuZHMud2lkdGggPSAxLCBhLmxheW91dEJvdW5kcy5oZWlnaHQgPSAxOwogICAgICAgICAgfSBlbHNlIGlmICgyID09IHMpIGZvciAodmFyIGggPSAwOyBoIDwgczsgaCsrKSB7CiAgICAgICAgICAgIHZhciBsID0gaCAlIDIsCiAgICAgICAgICAgICAgICAkID0gMDsKICAgICAgICAgICAgbCA9IH5+bDsKICAgICAgICAgICAgdmFyIGEgPSB0aGlzLmNsaXBDb250ZXh0TGlzdFtvKytdOwogICAgICAgICAgICBhLmxheW91dENoYW5uZWxObyA9IG4sIGEubGF5b3V0Qm91bmRzLnggPSAuNSAqIGwsIGEubGF5b3V0Qm91bmRzLnkgPSAwLCBhLmxheW91dEJvdW5kcy53aWR0aCA9IC41LCBhLmxheW91dEJvdW5kcy5oZWlnaHQgPSAxOwogICAgICAgICAgfSBlbHNlIGlmIChzIDw9IDQpIGZvciAodmFyIGggPSAwOyBoIDwgczsgaCsrKSB7CiAgICAgICAgICAgIHZhciBsID0gaCAlIDIsCiAgICAgICAgICAgICAgICAkID0gaCAvIDI7CiAgICAgICAgICAgIGwgPSB+fmwsICQgPSB+fiQ7CiAgICAgICAgICAgIHZhciBhID0gdGhpcy5jbGlwQ29udGV4dExpc3RbbysrXTsKICAgICAgICAgICAgYS5sYXlvdXRDaGFubmVsTm8gPSBuLCBhLmxheW91dEJvdW5kcy54ID0gLjUgKiBsLCBhLmxheW91dEJvdW5kcy55ID0gLjUgKiAkLCBhLmxheW91dEJvdW5kcy53aWR0aCA9IC41LCBhLmxheW91dEJvdW5kcy5oZWlnaHQgPSAuNTsKICAgICAgICAgIH0gZWxzZSBpZiAocyA8PSA5KSBmb3IgKHZhciBoID0gMDsgaCA8IHM7IGgrKykgewogICAgICAgICAgICB2YXIgbCA9IGggJSAzLAogICAgICAgICAgICAgICAgJCA9IGggLyAzOwogICAgICAgICAgICBsID0gfn5sLCAkID0gfn4kOwogICAgICAgICAgICB2YXIgYSA9IHRoaXMuY2xpcENvbnRleHRMaXN0W28rK107CiAgICAgICAgICAgIGEubGF5b3V0Q2hhbm5lbE5vID0gbiwgYS5sYXlvdXRCb3VuZHMueCA9IGwgLyAzLCBhLmxheW91dEJvdW5kcy55ID0gJCAvIDMsIGEubGF5b3V0Qm91bmRzLndpZHRoID0gMSAvIDMsIGEubGF5b3V0Qm91bmRzLmhlaWdodCA9IDEgLyAzOwogICAgICAgICAgfSBlbHNlIF8uXyRsaSgiXyQ2IF8kMFAgbWFzayBjb3VudCA6ICVkIiwgcyk7CiAgICAgICAgfQogICAgICB9LCByLnByb3RvdHlwZS5hZGRDbGlwcGVkRHJhd0RhdGEgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHZhciBlID0gbmV3IG8odCwgaSk7CiAgICAgICAgdGhpcy5jbGlwcGVkRHJhd0NvbnRleHRMaXN0LnB1c2goZSk7CiAgICAgIH0sIHMuXyRKVCA9IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICAgICAgdmFyIHIgPSB0IC8gaSwKICAgICAgICAgICAgbyA9IGUgLyBpLAogICAgICAgICAgICBuID0gbywKICAgICAgICAgICAgcyA9IDEgLSAoMSAtIG8pICogKDEgLSBvKSwKICAgICAgICAgICAgXyA9IDEgLSAoMSAtIG4pICogKDEgLSBuKSwKICAgICAgICAgICAgYSA9IDEgLyAzICogKDEgLSBvKSAqIHMgKyAobiAqICgyIC8gMykgKyAxIC8gMyAqICgxIC0gbikpICogKDEgLSBzKSwKICAgICAgICAgICAgaCA9IChuICsgMiAvIDMgKiAoMSAtIG4pKSAqIF8gKyAobyAqICgxIC8gMykgKyAyIC8gMyAqICgxIC0gbykpICogKDEgLSBfKSwKICAgICAgICAgICAgbCA9IDEgLSAzICogaCArIDMgKiBhIC0gMCwKICAgICAgICAgICAgJCA9IDMgKiBoIC0gNiAqIGEgKyAwLAogICAgICAgICAgICB1ID0gMyAqIGEgLSAwOwoKICAgICAgICBpZiAociA8PSAwKSByZXR1cm4gMDsKICAgICAgICBpZiAociA+PSAxKSByZXR1cm4gMTsKICAgICAgICB2YXIgcCA9IHIsCiAgICAgICAgICAgIGYgPSBwICogcDsKICAgICAgICByZXR1cm4gbCAqIChwICogZikgKyAkICogZiArIHUgKiBwICsgMDsKICAgICAgfSwgcy5wcm90b3R5cGUuXyRhMCA9IGZ1bmN0aW9uICgpIHt9LCBzLnByb3RvdHlwZS5zZXRGYWRlSW4gPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRkUCA9IHQ7CiAgICAgIH0sIHMucHJvdG90eXBlLnNldEZhZGVPdXQgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRlbyA9IHQ7CiAgICAgIH0sIHMucHJvdG90eXBlLl8kcFQgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRWMCA9IHQ7CiAgICAgIH0sIHMucHJvdG90eXBlLmdldEZhZGVPdXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRlbzsKICAgICAgfSwgcy5wcm90b3R5cGUuXyQ0VCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJGVvOwogICAgICB9LCBzLnByb3RvdHlwZS5fJG1UID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kVjA7CiAgICAgIH0sIHMucHJvdG90eXBlLmdldER1cmF0aW9uTVNlYyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0sIHMucHJvdG90eXBlLmdldExvb3BEdXJhdGlvbk1TZWMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9LCBzLnByb3RvdHlwZS51cGRhdGVQYXJhbSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgaWYgKGkuXyRBVCAmJiAhaS5fJDlMKSB7CiAgICAgICAgICB2YXIgZSA9IHcuZ2V0VXNlclRpbWVNU2VjKCk7CgogICAgICAgICAgaWYgKGkuXyR6MiA8IDApIHsKICAgICAgICAgICAgaS5fJHoyID0gZSwgaS5fJGJzID0gZTsKICAgICAgICAgICAgdmFyIHIgPSB0aGlzLmdldER1cmF0aW9uTVNlYygpOwogICAgICAgICAgICBpLl8kRG8gPCAwICYmIChpLl8kRG8gPSByIDw9IDAgPyAtMSA6IGkuXyR6MiArIHIpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBvID0gdGhpcy5fJFYwOwogICAgICAgICAgbyA9IG8gKiAoMCA9PSB0aGlzLl8kZFAgPyAxIDogaHQuXyRyMigoZSAtIGkuXyRicykgLyB0aGlzLl8kZFApKSAqICgwID09IHRoaXMuXyRlbyB8fCBpLl8kRG8gPCAwID8gMSA6IGh0Ll8kcjIoKGkuXyREbyAtIGUpIC8gdGhpcy5fJGVvKSksIDAgPD0gbyAmJiBvIDw9IDEgfHwgY29uc29sZS5sb2coIiMjIyBhc3NlcnQhISAjIyMgIiksIHRoaXMudXBkYXRlUGFyYW1FeGUodCwgZSwgbywgaSksIGkuXyREbyA+IDAgJiYgaS5fJERvIDwgZSAmJiAoaS5fJDlMID0gITApOwogICAgICAgIH0KICAgICAgfSwgcy5wcm90b3R5cGUudXBkYXRlUGFyYW1FeGUgPSBmdW5jdGlvbiAodCwgaSwgZSwgcikge30sIF8uXyQ4cyA9IDAsIF8uXyRmVCA9IG5ldyBPYmplY3QoKSwgXy5zdGFydCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGkgPSBfLl8kZlRbdF07CiAgICAgICAgbnVsbCA9PSBpICYmIChpID0gbmV3IGEoKSwgaS5fJHIgPSB0LCBfLl8kZlRbdF0gPSBpKSwgaS5fJDBTID0gdy5nZXRTeXN0ZW1UaW1lTVNlYygpOwogICAgICB9LCBfLmR1bXAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBpID0gXy5fJGZUW3RdOwoKICAgICAgICBpZiAobnVsbCAhPSBpKSB7CiAgICAgICAgICB2YXIgZSA9IHcuZ2V0U3lzdGVtVGltZU1TZWMoKSwKICAgICAgICAgICAgICByID0gZSAtIGkuXyQwUzsKICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyh0ICsgIiA6ICIgKyByICsgIm1zIiksIHI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0sIF8uZW5kID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IF8uXyRmVFt0XTsKCiAgICAgICAgaWYgKG51bGwgIT0gaSkgewogICAgICAgICAgcmV0dXJuIHcuZ2V0U3lzdGVtVGltZU1TZWMoKSAtIGkuXyQwUzsKICAgICAgICB9CgogICAgICAgIHJldHVybiAtMTsKICAgICAgfSwgXy5fJGxpID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICBjb25zb2xlLmxvZygiXyRsaSA6ICIgKyB0ICsgIlxuIiwgaSk7CiAgICAgIH0sIF8uXyRKaSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgY29uc29sZS5sb2codCwgaSk7CiAgICAgIH0sIF8uXyRkTCA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgY29uc29sZS5sb2codCwgaSksIGNvbnNvbGUubG9nKCJcbiIpOwogICAgICB9LCBfLl8kS0wgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgaTsgZSsrKSB7CiAgICAgICAgICBlICUgMTYgPT0gMCAmJiBlID4gMCA/IGNvbnNvbGUubG9nKCJcbiIpIDogZSAlIDggPT0gMCAmJiBlID4gMCAmJiBjb25zb2xlLmxvZygiICAiKSwgY29uc29sZS5sb2coIiUwMlggIiwgMjU1ICYgdFtlXSk7CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygiXG4iKTsKICAgICAgfSwgXy5fJG5yID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiJXNcbiIsIHQpOwoKICAgICAgICBmb3IgKHZhciByID0gaS5sZW5ndGgsIG8gPSAwOyBvIDwgcjsgKytvKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiJTVkIiwgaVtvXSksIGNvbnNvbGUubG9nKCIlc1xuIiwgZSksIGNvbnNvbGUubG9nKCIsIik7CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygiXG4iKTsKICAgICAgfSwgXy5fJFJiID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICBjb25zb2xlLmxvZygiZHVtcCBleGNlcHRpb24gOiAiICsgdCksIGNvbnNvbGUubG9nKCJzdGFjayA6OiAiICsgdC5zdGFjayk7CiAgICAgIH0sIGgucHJvdG90eXBlLl8kOFAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIC41ICogKHRoaXMueCArIHRoaXMueCArIHRoaXMud2lkdGgpOwogICAgICB9LCBoLnByb3RvdHlwZS5fJDZQID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAuNSAqICh0aGlzLnkgKyB0aGlzLnkgKyB0aGlzLmhlaWdodCk7CiAgICAgIH0sIGgucHJvdG90eXBlLl8kRUwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMueCArIHRoaXMud2lkdGg7CiAgICAgIH0sIGgucHJvdG90eXBlLl8kNVQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMueSArIHRoaXMuaGVpZ2h0OwogICAgICB9LCBoLnByb3RvdHlwZS5fJGpMID0gZnVuY3Rpb24gKHQsIGksIGUsIHIpIHsKICAgICAgICB0aGlzLnggPSB0LCB0aGlzLnkgPSBpLCB0aGlzLndpZHRoID0gZSwgdGhpcy5oZWlnaHQgPSByOwogICAgICB9LCBoLnByb3RvdHlwZS5fJGpMID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLnggPSB0LngsIHRoaXMueSA9IHQueSwgdGhpcy53aWR0aCA9IHQud2lkdGgsIHRoaXMuaGVpZ2h0ID0gdC5oZWlnaHQ7CiAgICAgIH0sIGwucHJvdG90eXBlID0gbmV3IGV0KCksIGwuXyR0UCA9IG5ldyBPYmplY3QoKSwgbC5fJDI3ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGwuXyR0UC5jbGVhcigpOwogICAgICB9LCBsLmdldElEID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IGwuXyR0UFt0XTsKICAgICAgICByZXR1cm4gbnVsbCA9PSBpICYmIChpID0gbmV3IGwodCksIGwuXyR0UFt0XSA9IGkpLCBpOwogICAgICB9LCBsLnByb3RvdHlwZS5fJDNzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBuZXcgbCgpOwogICAgICB9LCB1LnByb3RvdHlwZSA9IG5ldyBldCgpLCB1Ll8kdFAgPSBuZXcgT2JqZWN0KCksIHUuXyQyNyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB1Ll8kdFAuY2xlYXIoKTsKICAgICAgfSwgdS5nZXRJRCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGkgPSB1Ll8kdFBbdF07CiAgICAgICAgcmV0dXJuIG51bGwgPT0gaSAmJiAoaSA9IG5ldyB1KHQpLCB1Ll8kdFBbdF0gPSBpKSwgaTsKICAgICAgfSwgdS5wcm90b3R5cGUuXyQzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbmV3IHUoKTsKICAgICAgfSwgcC5fJDQyID0gMCwgcC5wcm90b3R5cGUuXyR6UCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBudWxsID09IHRoaXMuXyR2byAmJiAodGhpcy5fJHZvID0gbmV3IG90KCkpLCBudWxsID09IHRoaXMuXyRGMiAmJiAodGhpcy5fJEYyID0gbmV3IEFycmF5KCkpOwogICAgICB9LCBwLnByb3RvdHlwZS5nZXRDYW52YXNXaWR0aCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJGFvOwogICAgICB9LCBwLnByb3RvdHlwZS5nZXRDYW52YXNIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyQxUzsKICAgICAgfSwgcC5wcm90b3R5cGUuXyRGMCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJHZvID0gdC5fJG5QKCksIHRoaXMuXyRGMiA9IHQuXyRuUCgpLCB0aGlzLl8kYW8gPSB0Ll8kNkwoKSwgdGhpcy5fJDFTID0gdC5fJDZMKCk7CiAgICAgIH0sIHAucHJvdG90eXBlLl8kNlMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRGMi5wdXNoKHQpOwogICAgICB9LCBwLnByb3RvdHlwZS5fJFhyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kRjI7CiAgICAgIH0sIHAucHJvdG90eXBlLl8kRTIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyR2bzsKICAgICAgfSwgZi5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgIHRoaXMuXyRrcyA9IHRoaXMuXyRZYigpLCB0aGlzLnAyLl8keFQoKSwgMyA9PSBhcmd1bWVudHMubGVuZ3RoICYmICh0aGlzLl8kRm8gPSB0LCB0aGlzLl8kTDIgPSBpLCB0aGlzLnAxLl8kcCA9IGUsIHRoaXMucDIuXyRwID0gZSwgdGhpcy5wMi55ID0gdCwgdGhpcy5zZXR1cCgpKTsKICAgICAgfSwgZi5wcm90b3R5cGUuZ2V0UGh5c2ljc1BvaW50MSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5wMTsKICAgICAgfSwgZi5wcm90b3R5cGUuZ2V0UGh5c2ljc1BvaW50MiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5wMjsKICAgICAgfSwgZi5wcm90b3R5cGUuXyRxciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJERiOwogICAgICB9LCBmLnByb3RvdHlwZS5fJHByID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kRGIgPSB0OwogICAgICB9LCBmLnByb3RvdHlwZS5fJDVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kTTI7CiAgICAgIH0sIGYucHJvdG90eXBlLl8kQ3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyQ5YjsKICAgICAgfSwgZi5wcm90b3R5cGUuXyRZYiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gLTE4MCAqIE1hdGguYXRhbjIodGhpcy5wMS54IC0gdGhpcy5wMi54LCAtKHRoaXMucDEueSAtIHRoaXMucDIueSkpIC8gTWF0aC5QSTsKICAgICAgfSwgZi5wcm90b3R5cGUuYWRkU3JjUGFyYW0gPSBmdW5jdGlvbiAodCwgaSwgZSwgcikgewogICAgICAgIHZhciBvID0gbmV3IGcodCwgaSwgZSwgcik7CgogICAgICAgIHRoaXMuXyRsTC5wdXNoKG8pOwogICAgICB9LCBmLnByb3RvdHlwZS5hZGRUYXJnZXRQYXJhbSA9IGZ1bmN0aW9uICh0LCBpLCBlLCByKSB7CiAgICAgICAgdmFyIG8gPSBuZXcgVCh0LCBpLCBlLCByKTsKCiAgICAgICAgdGhpcy5fJHFQLnB1c2gobyk7CiAgICAgIH0sIGYucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgaWYgKDAgPT0gdGhpcy5fJGlQKSByZXR1cm4gdGhpcy5fJGlQID0gdGhpcy5fJGlUID0gaSwgdm9pZCAodGhpcy5fJEZvID0gTWF0aC5zcXJ0KCh0aGlzLnAxLnggLSB0aGlzLnAyLngpICogKHRoaXMucDEueCAtIHRoaXMucDIueCkgKyAodGhpcy5wMS55IC0gdGhpcy5wMi55KSAqICh0aGlzLnAxLnkgLSB0aGlzLnAyLnkpKSk7CiAgICAgICAgdmFyIGUgPSAoaSAtIHRoaXMuXyRpVCkgLyAxZTM7CgogICAgICAgIGlmICgwICE9IGUpIHsKICAgICAgICAgIGZvciAodmFyIHIgPSB0aGlzLl8kbEwubGVuZ3RoIC0gMTsgciA+PSAwOyAtLXIpIHsKICAgICAgICAgICAgdGhpcy5fJGxMW3JdLl8kb1AodCwgdGhpcyk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5fJG9vKHQsIGUpLCB0aGlzLl8kTTIgPSB0aGlzLl8kWWIoKSwgdGhpcy5fJDliID0gKHRoaXMuXyRNMiAtIHRoaXMuXyRrcykgLyBlLCB0aGlzLl8ka3MgPSB0aGlzLl8kTTI7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciByID0gdGhpcy5fJHFQLmxlbmd0aCAtIDE7IHIgPj0gMDsgLS1yKSB7CiAgICAgICAgICB0aGlzLl8kcVBbcl0uXyRZUyh0LCB0aGlzKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuXyRpVCA9IGk7CiAgICAgIH0sIGYucHJvdG90eXBlLl8kb28gPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIGkgPCAuMDMzICYmIChpID0gLjAzMyk7CiAgICAgICAgdmFyIGUgPSAxIC8gaTsKICAgICAgICB0aGlzLnAxLnZ4ID0gKHRoaXMucDEueCAtIHRoaXMucDEuXyRzMCkgKiBlLCB0aGlzLnAxLnZ5ID0gKHRoaXMucDEueSAtIHRoaXMucDEuXyQ3MCkgKiBlLCB0aGlzLnAxLmF4ID0gKHRoaXMucDEudnggLSB0aGlzLnAxLl8kN0wpICogZSwgdGhpcy5wMS5heSA9ICh0aGlzLnAxLnZ5IC0gdGhpcy5wMS5fJEhMKSAqIGUsIHRoaXMucDEuZnggPSB0aGlzLnAxLmF4ICogdGhpcy5wMS5fJHAsIHRoaXMucDEuZnkgPSB0aGlzLnAxLmF5ICogdGhpcy5wMS5fJHAsIHRoaXMucDEuXyR4VCgpOwoKICAgICAgICB2YXIgciwKICAgICAgICAgICAgbywKICAgICAgICAgICAgbiA9IC1NYXRoLmF0YW4yKHRoaXMucDEueSAtIHRoaXMucDIueSwgdGhpcy5wMS54IC0gdGhpcy5wMi54KSwKICAgICAgICAgICAgcyA9IE1hdGguY29zKG4pLAogICAgICAgICAgICBfID0gTWF0aC5zaW4obiksCiAgICAgICAgICAgIGEgPSA5LjggKiB0aGlzLnAyLl8kcCwKICAgICAgICAgICAgaCA9IHRoaXMuXyREYiAqIEx0Ll8kYlMsCiAgICAgICAgICAgIGwgPSBhICogTWF0aC5jb3MobiAtIGgpOwoKICAgICAgICByID0gbCAqIF8sIG8gPSBsICogczsKICAgICAgICB2YXIgJCA9IC10aGlzLnAxLmZ4ICogXyAqIF8sCiAgICAgICAgICAgIHUgPSAtdGhpcy5wMS5meSAqIF8gKiBzLAogICAgICAgICAgICBwID0gLXRoaXMucDIudnggKiB0aGlzLl8kTDIsCiAgICAgICAgICAgIGYgPSAtdGhpcy5wMi52eSAqIHRoaXMuXyRMMjsKICAgICAgICB0aGlzLnAyLmZ4ID0gciArICQgKyBwLCB0aGlzLnAyLmZ5ID0gbyArIHUgKyBmLCB0aGlzLnAyLmF4ID0gdGhpcy5wMi5meCAvIHRoaXMucDIuXyRwLCB0aGlzLnAyLmF5ID0gdGhpcy5wMi5meSAvIHRoaXMucDIuXyRwLCB0aGlzLnAyLnZ4ICs9IHRoaXMucDIuYXggKiBpLCB0aGlzLnAyLnZ5ICs9IHRoaXMucDIuYXkgKiBpLCB0aGlzLnAyLnggKz0gdGhpcy5wMi52eCAqIGksIHRoaXMucDIueSArPSB0aGlzLnAyLnZ5ICogaTsKICAgICAgICB2YXIgYyA9IE1hdGguc3FydCgodGhpcy5wMS54IC0gdGhpcy5wMi54KSAqICh0aGlzLnAxLnggLSB0aGlzLnAyLngpICsgKHRoaXMucDEueSAtIHRoaXMucDIueSkgKiAodGhpcy5wMS55IC0gdGhpcy5wMi55KSk7CiAgICAgICAgdGhpcy5wMi54ID0gdGhpcy5wMS54ICsgdGhpcy5fJEZvICogKHRoaXMucDIueCAtIHRoaXMucDEueCkgLyBjLCB0aGlzLnAyLnkgPSB0aGlzLnAxLnkgKyB0aGlzLl8kRm8gKiAodGhpcy5wMi55IC0gdGhpcy5wMS55KSAvIGMsIHRoaXMucDIudnggPSAodGhpcy5wMi54IC0gdGhpcy5wMi5fJHMwKSAqIGUsIHRoaXMucDIudnkgPSAodGhpcy5wMi55IC0gdGhpcy5wMi5fJDcwKSAqIGUsIHRoaXMucDIuXyR4VCgpOwogICAgICB9LCBjLnByb3RvdHlwZS5fJHhUID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuXyRzMCA9IHRoaXMueCwgdGhpcy5fJDcwID0gdGhpcy55LCB0aGlzLl8kN0wgPSB0aGlzLnZ4LCB0aGlzLl8kSEwgPSB0aGlzLnZ5OwogICAgICB9LCBkLnByb3RvdHlwZS5fJG9QID0gZnVuY3Rpb24gKHQsIGkpIHt9LCBnLnByb3RvdHlwZSA9IG5ldyBkKCksIGcucHJvdG90eXBlLl8kb1AgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHZhciBlID0gdGhpcy5zY2FsZSAqIHQuZ2V0UGFyYW1GbG9hdCh0aGlzLl8kd0wpLAogICAgICAgICAgICByID0gaS5nZXRQaHlzaWNzUG9pbnQxKCk7CgogICAgICAgIHN3aXRjaCAodGhpcy5fJHRMKSB7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgY2FzZSBmLlNyYy5TUkNfVE9fWDoKICAgICAgICAgICAgci54ID0gci54ICsgKGUgLSByLngpICogdGhpcy5fJFYwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIGYuU3JjLlNSQ19UT19ZOgogICAgICAgICAgICByLnkgPSByLnkgKyAoZSAtIHIueSkgKiB0aGlzLl8kVjA7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgZi5TcmMuU1JDX1RPX0dfQU5HTEU6CiAgICAgICAgICAgIHZhciBvID0gaS5fJHFyKCk7CgogICAgICAgICAgICBvICs9IChlIC0gbykgKiB0aGlzLl8kVjAsIGkuXyRwcihvKTsKICAgICAgICB9CiAgICAgIH0sIHkucHJvdG90eXBlLl8kWVMgPSBmdW5jdGlvbiAodCwgaSkge30sIFQucHJvdG90eXBlID0gbmV3IHkoKSwgVC5wcm90b3R5cGUuXyRZUyA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgc3dpdGNoICh0aGlzLl8kWVApIHsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBjYXNlIGYuVGFyZ2V0LlRBUkdFVF9GUk9NX0FOR0xFOgogICAgICAgICAgICB0LnNldFBhcmFtRmxvYXQodGhpcy5fJHdMLCB0aGlzLnNjYWxlICogaS5fJDVyKCksIHRoaXMuXyRWMCk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgZi5UYXJnZXQuVEFSR0VUX0ZST01fQU5HTEVfVjoKICAgICAgICAgICAgdC5zZXRQYXJhbUZsb2F0KHRoaXMuXyR3TCwgdGhpcy5zY2FsZSAqIGkuXyRDcygpLCB0aGlzLl8kVjApOwogICAgICAgIH0KICAgICAgfSwgZi5TcmMgPSBmdW5jdGlvbiAoKSB7fSwgZi5TcmMuU1JDX1RPX1ggPSAiU1JDX1RPX1giLCBmLlNyYy5TUkNfVE9fWSA9ICJTUkNfVE9fWSIsIGYuU3JjLlNSQ19UT19HX0FOR0xFID0gIlNSQ19UT19HX0FOR0xFIiwgZi5UYXJnZXQgPSBmdW5jdGlvbiAoKSB7fSwgZi5UYXJnZXQuVEFSR0VUX0ZST01fQU5HTEUgPSAiVEFSR0VUX0ZST01fQU5HTEUiLCBmLlRhcmdldC5UQVJHRVRfRlJPTV9BTkdMRV9WID0gIlRBUkdFVF9GUk9NX0FOR0xFX1YiLCBQLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kZkwgPSB0Ll8kZkwsIHRoaXMuXyRnTCA9IHQuXyRnTCwgdGhpcy5fJEIwID0gdC5fJEIwLCB0aGlzLl8kejAgPSB0Ll8kejAsIHRoaXMuXyRxVCA9IHQuXyRxVCwgdGhpcy5yZWZsZWN0WCA9IHQucmVmbGVjdFgsIHRoaXMucmVmbGVjdFkgPSB0LnJlZmxlY3RZOwogICAgICB9LCBQLnByb3RvdHlwZS5fJEYwID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kZkwgPSB0Ll8kX1QoKSwgdGhpcy5fJGdMID0gdC5fJF9UKCksIHRoaXMuXyRCMCA9IHQuXyRfVCgpLCB0aGlzLl8kejAgPSB0Ll8kX1QoKSwgdGhpcy5fJHFUID0gdC5fJF9UKCksIHQuZ2V0Rm9ybWF0VmVyc2lvbigpID49IEcuTElWRTJEX0ZPUk1BVF9WRVJTSU9OX1YyXzEwX1NESzIgJiYgKHRoaXMucmVmbGVjdFggPSB0Ll8kcG8oKSwgdGhpcy5yZWZsZWN0WSA9IHQuXyRwbygpKTsKICAgICAgfSwgUC5wcm90b3R5cGUuXyRlID0gZnVuY3Rpb24gKCkge307CgogICAgICB2YXIgSXQgPSBmdW5jdGlvbiBJdCgpIHt9OwoKICAgICAgSXQuXyRuaSA9IGZ1bmN0aW9uICh0LCBpLCBlLCByLCBvLCBuLCBzLCBfLCBhKSB7CiAgICAgICAgdmFyIGggPSBzICogbiAtIF8gKiBvOwogICAgICAgIGlmICgwID09IGgpIHJldHVybiBudWxsOwogICAgICAgIHZhciBsLAogICAgICAgICAgICAkID0gKCh0IC0gZSkgKiBuIC0gKGkgLSByKSAqIG8pIC8gaDsKICAgICAgICByZXR1cm4gbCA9IDAgIT0gbyA/ICh0IC0gZSAtICQgKiBzKSAvIG8gOiAoaSAtIHIgLSAkICogXykgLyBuLCBpc05hTihsKSAmJiAobCA9ICh0IC0gZSAtICQgKiBzKSAvIG8sIGlzTmFOKGwpICYmIChsID0gKGkgLSByIC0gJCAqIF8pIC8gbiksIGlzTmFOKGwpICYmIChjb25zb2xlLmxvZygiYSBpcyBOYU4gQFV0VmVjdG9yI18kbmkoKSAiKSwgY29uc29sZS5sb2coInYxeCA6ICIgKyBvKSwgY29uc29sZS5sb2coInYxeCAhPSAwID8gIiArICgwICE9IG8pKSkpLCBudWxsID09IGEgPyBuZXcgQXJyYXkobCwgJCkgOiAoYVswXSA9IGwsIGFbMV0gPSAkLCBhKTsKICAgICAgfSwgUy5wcm90b3R5cGUuXyQ4UCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy54ICsgLjUgKiB0aGlzLndpZHRoOwogICAgICB9LCBTLnByb3RvdHlwZS5fJDZQID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLnkgKyAuNSAqIHRoaXMuaGVpZ2h0OwogICAgICB9LCBTLnByb3RvdHlwZS5fJEVMID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLnggKyB0aGlzLndpZHRoOwogICAgICB9LCBTLnByb3RvdHlwZS5fJDVUID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLnkgKyB0aGlzLmhlaWdodDsKICAgICAgfSwgUy5wcm90b3R5cGUuXyRqTCA9IGZ1bmN0aW9uICh0LCBpLCBlLCByKSB7CiAgICAgICAgdGhpcy54ID0gdCwgdGhpcy55ID0gaSwgdGhpcy53aWR0aCA9IGUsIHRoaXMuaGVpZ2h0ID0gcjsKICAgICAgfSwgUy5wcm90b3R5cGUuXyRqTCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy54ID0gdC54LCB0aGlzLnkgPSB0LnksIHRoaXMud2lkdGggPSB0LndpZHRoLCB0aGlzLmhlaWdodCA9IHQuaGVpZ2h0OwogICAgICB9LCBTLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMueCA8PSB0aGlzLnggJiYgdGhpcy55IDw9IHRoaXMueSAmJiB0aGlzLnggPD0gdGhpcy54ICsgdGhpcy53aWR0aCAmJiB0aGlzLnkgPD0gdGhpcy55ICsgdGhpcy5oZWlnaHQ7CiAgICAgIH0sIFMucHJvdG90eXBlLmV4cGFuZCA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdGhpcy54IC09IHQsIHRoaXMueSAtPSBpLCB0aGlzLndpZHRoICs9IDIgKiB0LCB0aGlzLmhlaWdodCArPSAyICogaTsKICAgICAgfSwgdi5fJFoyID0gZnVuY3Rpb24gKHQsIGksIGUsIHIpIHsKICAgICAgICB2YXIgbyA9IGkuXyRRMih0LCBlKSwKICAgICAgICAgICAgbiA9IHQuXyR2cygpLAogICAgICAgICAgICBzID0gdC5fJFRyKCk7CgogICAgICAgIGlmIChpLl8kenIobiwgcywgbyksIG8gPD0gMCkgcmV0dXJuIHJbblswXV07CgogICAgICAgIGlmICgxID09IG8pIHsKICAgICAgICAgIHZhciBfID0gcltuWzBdXSwKICAgICAgICAgICAgICBhID0gcltuWzFdXSwKICAgICAgICAgICAgICBoID0gc1swXTsKICAgICAgICAgIHJldHVybiBfICsgKGEgLSBfKSAqIGggfCAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKDIgPT0gbykgewogICAgICAgICAgdmFyIF8gPSByW25bMF1dLAogICAgICAgICAgICAgIGEgPSByW25bMV1dLAogICAgICAgICAgICAgIGwgPSByW25bMl1dLAogICAgICAgICAgICAgICQgPSByW25bM11dLAogICAgICAgICAgICAgIGggPSBzWzBdLAogICAgICAgICAgICAgIHUgPSBzWzFdLAogICAgICAgICAgICAgIHAgPSBfICsgKGEgLSBfKSAqIGggfCAwLAogICAgICAgICAgICAgIGYgPSBsICsgKCQgLSBsKSAqIGggfCAwOwogICAgICAgICAgcmV0dXJuIHAgKyAoZiAtIHApICogdSB8IDA7CiAgICAgICAgfQoKICAgICAgICBpZiAoMyA9PSBvKSB7CiAgICAgICAgICB2YXIgYyA9IHJbblswXV0sCiAgICAgICAgICAgICAgZCA9IHJbblsxXV0sCiAgICAgICAgICAgICAgZyA9IHJbblsyXV0sCiAgICAgICAgICAgICAgeSA9IHJbblszXV0sCiAgICAgICAgICAgICAgbSA9IHJbbls0XV0sCiAgICAgICAgICAgICAgVCA9IHJbbls1XV0sCiAgICAgICAgICAgICAgUCA9IHJbbls2XV0sCiAgICAgICAgICAgICAgUyA9IHJbbls3XV0sCiAgICAgICAgICAgICAgaCA9IHNbMF0sCiAgICAgICAgICAgICAgdSA9IHNbMV0sCiAgICAgICAgICAgICAgdiA9IHNbMl0sCiAgICAgICAgICAgICAgXyA9IGMgKyAoZCAtIGMpICogaCB8IDAsCiAgICAgICAgICAgICAgYSA9IGcgKyAoeSAtIGcpICogaCB8IDAsCiAgICAgICAgICAgICAgbCA9IG0gKyAoVCAtIG0pICogaCB8IDAsCiAgICAgICAgICAgICAgJCA9IFAgKyAoUyAtIFApICogaCB8IDAsCiAgICAgICAgICAgICAgcCA9IF8gKyAoYSAtIF8pICogdSB8IDAsCiAgICAgICAgICAgICAgZiA9IGwgKyAoJCAtIGwpICogdSB8IDA7CgogICAgICAgICAgcmV0dXJuIHAgKyAoZiAtIHApICogdiB8IDA7CiAgICAgICAgfQoKICAgICAgICBpZiAoNCA9PSBvKSB7CiAgICAgICAgICB2YXIgTCA9IHJbblswXV0sCiAgICAgICAgICAgICAgTSA9IHJbblsxXV0sCiAgICAgICAgICAgICAgRSA9IHJbblsyXV0sCiAgICAgICAgICAgICAgQSA9IHJbblszXV0sCiAgICAgICAgICAgICAgSSA9IHJbbls0XV0sCiAgICAgICAgICAgICAgdyA9IHJbbls1XV0sCiAgICAgICAgICAgICAgeCA9IHJbbls2XV0sCiAgICAgICAgICAgICAgTyA9IHJbbls3XV0sCiAgICAgICAgICAgICAgRCA9IHJbbls4XV0sCiAgICAgICAgICAgICAgUiA9IHJbbls5XV0sCiAgICAgICAgICAgICAgYiA9IHJbblsxMF1dLAogICAgICAgICAgICAgIEYgPSByW25bMTFdXSwKICAgICAgICAgICAgICBDID0gcltuWzEyXV0sCiAgICAgICAgICAgICAgTiA9IHJbblsxM11dLAogICAgICAgICAgICAgIEIgPSByW25bMTRdXSwKICAgICAgICAgICAgICBVID0gcltuWzE1XV0sCiAgICAgICAgICAgICAgaCA9IHNbMF0sCiAgICAgICAgICAgICAgdSA9IHNbMV0sCiAgICAgICAgICAgICAgdiA9IHNbMl0sCiAgICAgICAgICAgICAgRyA9IHNbM10sCiAgICAgICAgICAgICAgYyA9IEwgKyAoTSAtIEwpICogaCB8IDAsCiAgICAgICAgICAgICAgZCA9IEUgKyAoQSAtIEUpICogaCB8IDAsCiAgICAgICAgICAgICAgZyA9IEkgKyAodyAtIEkpICogaCB8IDAsCiAgICAgICAgICAgICAgeSA9IHggKyAoTyAtIHgpICogaCB8IDAsCiAgICAgICAgICAgICAgbSA9IEQgKyAoUiAtIEQpICogaCB8IDAsCiAgICAgICAgICAgICAgVCA9IGIgKyAoRiAtIGIpICogaCB8IDAsCiAgICAgICAgICAgICAgUCA9IEMgKyAoTiAtIEMpICogaCB8IDAsCiAgICAgICAgICAgICAgUyA9IEIgKyAoVSAtIEIpICogaCB8IDAsCiAgICAgICAgICAgICAgXyA9IGMgKyAoZCAtIGMpICogdSB8IDAsCiAgICAgICAgICAgICAgYSA9IGcgKyAoeSAtIGcpICogdSB8IDAsCiAgICAgICAgICAgICAgbCA9IG0gKyAoVCAtIG0pICogdSB8IDAsCiAgICAgICAgICAgICAgJCA9IFAgKyAoUyAtIFApICogdSB8IDAsCiAgICAgICAgICAgICAgcCA9IF8gKyAoYSAtIF8pICogdiB8IDAsCiAgICAgICAgICAgICAgZiA9IGwgKyAoJCAtIGwpICogdiB8IDA7CgogICAgICAgICAgcmV0dXJuIHAgKyAoZiAtIHApICogRyB8IDA7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBZID0gMSA8PCBvLCBrID0gbmV3IEZsb2F0MzJBcnJheShZKSwgViA9IDA7IFYgPCBZOyBWKyspIHsKICAgICAgICAgIGZvciAodmFyIFggPSBWLCB6ID0gMSwgSCA9IDA7IEggPCBvOyBIKyspIHsKICAgICAgICAgICAgeiAqPSBYICUgMiA9PSAwID8gMSAtIHNbSF0gOiBzW0hdLCBYIC89IDI7CiAgICAgICAgICB9CgogICAgICAgICAga1tWXSA9IHo7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBXID0gbmV3IEZsb2F0MzJBcnJheShZKSwgaiA9IDA7IGogPCBZOyBqKyspIHsKICAgICAgICAgIFdbal0gPSByW25bal1dOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgcSA9IDAsIGogPSAwOyBqIDwgWTsgaisrKSB7CiAgICAgICAgICBxICs9IGtbal0gKiBXW2pdOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHEgKyAuNSB8IDA7CiAgICAgIH0sIHYuXyRiciA9IGZ1bmN0aW9uICh0LCBpLCBlLCByKSB7CiAgICAgICAgdmFyIG8gPSBpLl8kUTIodCwgZSksCiAgICAgICAgICAgIG4gPSB0Ll8kdnMoKSwKICAgICAgICAgICAgcyA9IHQuXyRUcigpOwoKICAgICAgICBpZiAoaS5fJHpyKG4sIHMsIG8pLCBvIDw9IDApIHJldHVybiByW25bMF1dOwoKICAgICAgICBpZiAoMSA9PSBvKSB7CiAgICAgICAgICB2YXIgXyA9IHJbblswXV0sCiAgICAgICAgICAgICAgYSA9IHJbblsxXV0sCiAgICAgICAgICAgICAgaCA9IHNbMF07CiAgICAgICAgICByZXR1cm4gXyArIChhIC0gXykgKiBoOwogICAgICAgIH0KCiAgICAgICAgaWYgKDIgPT0gbykgewogICAgICAgICAgdmFyIF8gPSByW25bMF1dLAogICAgICAgICAgICAgIGEgPSByW25bMV1dLAogICAgICAgICAgICAgIGwgPSByW25bMl1dLAogICAgICAgICAgICAgICQgPSByW25bM11dLAogICAgICAgICAgICAgIGggPSBzWzBdLAogICAgICAgICAgICAgIHUgPSBzWzFdOwogICAgICAgICAgcmV0dXJuICgxIC0gdSkgKiAoXyArIChhIC0gXykgKiBoKSArIHUgKiAobCArICgkIC0gbCkgKiBoKTsKICAgICAgICB9CgogICAgICAgIGlmICgzID09IG8pIHsKICAgICAgICAgIHZhciBwID0gcltuWzBdXSwKICAgICAgICAgICAgICBmID0gcltuWzFdXSwKICAgICAgICAgICAgICBjID0gcltuWzJdXSwKICAgICAgICAgICAgICBkID0gcltuWzNdXSwKICAgICAgICAgICAgICBnID0gcltuWzRdXSwKICAgICAgICAgICAgICB5ID0gcltuWzVdXSwKICAgICAgICAgICAgICBtID0gcltuWzZdXSwKICAgICAgICAgICAgICBUID0gcltuWzddXSwKICAgICAgICAgICAgICBoID0gc1swXSwKICAgICAgICAgICAgICB1ID0gc1sxXSwKICAgICAgICAgICAgICBQID0gc1syXTsKICAgICAgICAgIHJldHVybiAoMSAtIFApICogKCgxIC0gdSkgKiAocCArIChmIC0gcCkgKiBoKSArIHUgKiAoYyArIChkIC0gYykgKiBoKSkgKyBQICogKCgxIC0gdSkgKiAoZyArICh5IC0gZykgKiBoKSArIHUgKiAobSArIChUIC0gbSkgKiBoKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoNCA9PSBvKSB7CiAgICAgICAgICB2YXIgUyA9IHJbblswXV0sCiAgICAgICAgICAgICAgdiA9IHJbblsxXV0sCiAgICAgICAgICAgICAgTCA9IHJbblsyXV0sCiAgICAgICAgICAgICAgTSA9IHJbblszXV0sCiAgICAgICAgICAgICAgRSA9IHJbbls0XV0sCiAgICAgICAgICAgICAgQSA9IHJbbls1XV0sCiAgICAgICAgICAgICAgSSA9IHJbbls2XV0sCiAgICAgICAgICAgICAgdyA9IHJbbls3XV0sCiAgICAgICAgICAgICAgeCA9IHJbbls4XV0sCiAgICAgICAgICAgICAgTyA9IHJbbls5XV0sCiAgICAgICAgICAgICAgRCA9IHJbblsxMF1dLAogICAgICAgICAgICAgIFIgPSByW25bMTFdXSwKICAgICAgICAgICAgICBiID0gcltuWzEyXV0sCiAgICAgICAgICAgICAgRiA9IHJbblsxM11dLAogICAgICAgICAgICAgIEMgPSByW25bMTRdXSwKICAgICAgICAgICAgICBOID0gcltuWzE1XV0sCiAgICAgICAgICAgICAgaCA9IHNbMF0sCiAgICAgICAgICAgICAgdSA9IHNbMV0sCiAgICAgICAgICAgICAgUCA9IHNbMl0sCiAgICAgICAgICAgICAgQiA9IHNbM107CiAgICAgICAgICByZXR1cm4gKDEgLSBCKSAqICgoMSAtIFApICogKCgxIC0gdSkgKiAoUyArICh2IC0gUykgKiBoKSArIHUgKiAoTCArIChNIC0gTCkgKiBoKSkgKyBQICogKCgxIC0gdSkgKiAoRSArIChBIC0gRSkgKiBoKSArIHUgKiAoSSArICh3IC0gSSkgKiBoKSkpICsgQiAqICgoMSAtIFApICogKCgxIC0gdSkgKiAoeCArIChPIC0geCkgKiBoKSArIHUgKiAoRCArIChSIC0gRCkgKiBoKSkgKyBQICogKCgxIC0gdSkgKiAoYiArIChGIC0gYikgKiBoKSArIHUgKiAoQyArIChOIC0gQykgKiBoKSkpOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgVSA9IDEgPDwgbywgRyA9IG5ldyBGbG9hdDMyQXJyYXkoVSksIFkgPSAwOyBZIDwgVTsgWSsrKSB7CiAgICAgICAgICBmb3IgKHZhciBrID0gWSwgViA9IDEsIFggPSAwOyBYIDwgbzsgWCsrKSB7CiAgICAgICAgICAgIFYgKj0gayAlIDIgPT0gMCA/IDEgLSBzW1hdIDogc1tYXSwgayAvPSAyOwogICAgICAgICAgfQoKICAgICAgICAgIEdbWV0gPSBWOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgeiA9IG5ldyBGbG9hdDMyQXJyYXkoVSksIEggPSAwOyBIIDwgVTsgSCsrKSB7CiAgICAgICAgICB6W0hdID0gcltuW0hdXTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIFcgPSAwLCBIID0gMDsgSCA8IFU7IEgrKykgewogICAgICAgICAgVyArPSBHW0hdICogeltIXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBXOwogICAgICB9LCB2Ll8kVnIgPSBmdW5jdGlvbiAodCwgaSwgZSwgciwgbywgbiwgcywgXykgewogICAgICAgIHZhciBhID0gaS5fJFEyKHQsIGUpLAogICAgICAgICAgICBoID0gdC5fJHZzKCksCiAgICAgICAgICAgIGwgPSB0Ll8kVHIoKTsKCiAgICAgICAgaS5fJHpyKGgsIGwsIGEpOwoKICAgICAgICB2YXIgJCA9IDIgKiByLAogICAgICAgICAgICB1ID0gczsKCiAgICAgICAgaWYgKGEgPD0gMCkgewogICAgICAgICAgdmFyIHAgPSBoWzBdLAogICAgICAgICAgICAgIGYgPSBvW3BdOwogICAgICAgICAgaWYgKDIgPT0gXyAmJiAwID09IHMpIHcuXyRqVChmLCAwLCBuLCAwLCAkKTtlbHNlIGZvciAodmFyIGMgPSAwOyBjIDwgJDspIHsKICAgICAgICAgICAgblt1XSA9IGZbYysrXSwgblt1ICsgMV0gPSBmW2MrK10sIHUgKz0gXzsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKDEgPT0gYSkgZm9yICh2YXIgZiA9IG9baFswXV0sIGQgPSBvW2hbMV1dLCBnID0gbFswXSwgeSA9IDEgLSBnLCBjID0gMDsgYyA8ICQ7KSB7CiAgICAgICAgICBuW3VdID0gZltjXSAqIHkgKyBkW2NdICogZywgKytjLCBuW3UgKyAxXSA9IGZbY10gKiB5ICsgZFtjXSAqIGcsICsrYywgdSArPSBfOwogICAgICAgIH0gZWxzZSBpZiAoMiA9PSBhKSBmb3IgKHZhciBmID0gb1toWzBdXSwgZCA9IG9baFsxXV0sIG0gPSBvW2hbMl1dLCBUID0gb1toWzNdXSwgZyA9IGxbMF0sIFAgPSBsWzFdLCB5ID0gMSAtIGcsIFMgPSAxIC0gUCwgdiA9IFMgKiB5LCBMID0gUyAqIGcsIE0gPSBQICogeSwgRSA9IFAgKiBnLCBjID0gMDsgYyA8ICQ7KSB7CiAgICAgICAgICBuW3VdID0gdiAqIGZbY10gKyBMICogZFtjXSArIE0gKiBtW2NdICsgRSAqIFRbY10sICsrYywgblt1ICsgMV0gPSB2ICogZltjXSArIEwgKiBkW2NdICsgTSAqIG1bY10gKyBFICogVFtjXSwgKytjLCB1ICs9IF87CiAgICAgICAgfSBlbHNlIGlmICgzID09IGEpIGZvciAodmFyIEEgPSBvW2hbMF1dLCBJID0gb1toWzFdXSwgeCA9IG9baFsyXV0sIE8gPSBvW2hbM11dLCBEID0gb1toWzRdXSwgUiA9IG9baFs1XV0sIGIgPSBvW2hbNl1dLCBGID0gb1toWzddXSwgZyA9IGxbMF0sIFAgPSBsWzFdLCBDID0gbFsyXSwgeSA9IDEgLSBnLCBTID0gMSAtIFAsIE4gPSAxIC0gQywgQiA9IE4gKiBTICogeSwgVSA9IE4gKiBTICogZywgRyA9IE4gKiBQICogeSwgWSA9IE4gKiBQICogZywgayA9IEMgKiBTICogeSwgViA9IEMgKiBTICogZywgWCA9IEMgKiBQICogeSwgeiA9IEMgKiBQICogZywgYyA9IDA7IGMgPCAkOykgewogICAgICAgICAgblt1XSA9IEIgKiBBW2NdICsgVSAqIElbY10gKyBHICogeFtjXSArIFkgKiBPW2NdICsgayAqIERbY10gKyBWICogUltjXSArIFggKiBiW2NdICsgeiAqIEZbY10sICsrYywgblt1ICsgMV0gPSBCICogQVtjXSArIFUgKiBJW2NdICsgRyAqIHhbY10gKyBZICogT1tjXSArIGsgKiBEW2NdICsgViAqIFJbY10gKyBYICogYltjXSArIHogKiBGW2NdLCArK2MsIHUgKz0gXzsKICAgICAgICB9IGVsc2UgaWYgKDQgPT0gYSkgZm9yICh2YXIgSCA9IG9baFswXV0sIFcgPSBvW2hbMV1dLCBqID0gb1toWzJdXSwgcSA9IG9baFszXV0sIEogPSBvW2hbNF1dLCBRID0gb1toWzVdXSwgWiA9IG9baFs2XV0sIEsgPSBvW2hbN11dLCB0dCA9IG9baFs4XV0sIGl0ID0gb1toWzldXSwgZXQgPSBvW2hbMTBdXSwgcnQgPSBvW2hbMTFdXSwgb3QgPSBvW2hbMTJdXSwgbnQgPSBvW2hbMTNdXSwgc3QgPSBvW2hbMTRdXSwgX3QgPSBvW2hbMTVdXSwgZyA9IGxbMF0sIFAgPSBsWzFdLCBDID0gbFsyXSwgYXQgPSBsWzNdLCB5ID0gMSAtIGcsIFMgPSAxIC0gUCwgTiA9IDEgLSBDLCBodCA9IDEgLSBhdCwgbHQgPSBodCAqIE4gKiBTICogeSwgJHQgPSBodCAqIE4gKiBTICogZywgdXQgPSBodCAqIE4gKiBQICogeSwgcHQgPSBodCAqIE4gKiBQICogZywgZnQgPSBodCAqIEMgKiBTICogeSwgY3QgPSBodCAqIEMgKiBTICogZywgZHQgPSBodCAqIEMgKiBQICogeSwgZ3QgPSBodCAqIEMgKiBQICogZywgeXQgPSBhdCAqIE4gKiBTICogeSwgbXQgPSBhdCAqIE4gKiBTICogZywgVHQgPSBhdCAqIE4gKiBQICogeSwgUHQgPSBhdCAqIE4gKiBQICogZywgU3QgPSBhdCAqIEMgKiBTICogeSwgdnQgPSBhdCAqIEMgKiBTICogZywgTHQgPSBhdCAqIEMgKiBQICogeSwgTXQgPSBhdCAqIEMgKiBQICogZywgYyA9IDA7IGMgPCAkOykgewogICAgICAgICAgblt1XSA9IGx0ICogSFtjXSArICR0ICogV1tjXSArIHV0ICogaltjXSArIHB0ICogcVtjXSArIGZ0ICogSltjXSArIGN0ICogUVtjXSArIGR0ICogWltjXSArIGd0ICogS1tjXSArIHl0ICogdHRbY10gKyBtdCAqIGl0W2NdICsgVHQgKiBldFtjXSArIFB0ICogcnRbY10gKyBTdCAqIG90W2NdICsgdnQgKiBudFtjXSArIEx0ICogc3RbY10gKyBNdCAqIF90W2NdLCArK2MsIG5bdSArIDFdID0gbHQgKiBIW2NdICsgJHQgKiBXW2NdICsgdXQgKiBqW2NdICsgcHQgKiBxW2NdICsgZnQgKiBKW2NdICsgY3QgKiBRW2NdICsgZHQgKiBaW2NdICsgZ3QgKiBLW2NdICsgeXQgKiB0dFtjXSArIG10ICogaXRbY10gKyBUdCAqIGV0W2NdICsgUHQgKiBydFtjXSArIFN0ICogb3RbY10gKyB2dCAqIG50W2NdICsgTHQgKiBzdFtjXSArIE10ICogX3RbY10sICsrYywgdSArPSBfOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmb3IgKHZhciBFdCA9IDEgPDwgYSwgQXQgPSBuZXcgRmxvYXQzMkFycmF5KEV0KSwgSXQgPSAwOyBJdCA8IEV0OyBJdCsrKSB7CiAgICAgICAgICAgIGZvciAodmFyIHd0ID0gSXQsIHh0ID0gMSwgT3QgPSAwOyBPdCA8IGE7IE90KyspIHsKICAgICAgICAgICAgICB4dCAqPSB3dCAlIDIgPT0gMCA/IDEgLSBsW090XSA6IGxbT3RdLCB3dCAvPSAyOwogICAgICAgICAgICB9CgogICAgICAgICAgICBBdFtJdF0gPSB4dDsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciBEdCA9IG5ldyBGbG9hdDMyQXJyYXkoRXQpLCBSdCA9IDA7IFJ0IDwgRXQ7IFJ0KyspIHsKICAgICAgICAgICAgRHRbUnRdID0gb1toW1J0XV07CiAgICAgICAgICB9CgogICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCAkOykgewogICAgICAgICAgICBmb3IgKHZhciBidCA9IDAsIEZ0ID0gMCwgQ3QgPSBjICsgMSwgUnQgPSAwOyBSdCA8IEV0OyBSdCsrKSB7CiAgICAgICAgICAgICAgYnQgKz0gQXRbUnRdICogRHRbUnRdW2NdLCBGdCArPSBBdFtSdF0gKiBEdFtSdF1bQ3RdOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjICs9IDIsIG5bdV0gPSBidCwgblt1ICsgMV0gPSBGdCwgdSArPSBfOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgTC5wcm90b3R5cGUuXyRIVCA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdGhpcy54ID0gdCwgdGhpcy55ID0gaTsKICAgICAgfSwgTC5wcm90b3R5cGUuXyRIVCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy54ID0gdC54LCB0aGlzLnkgPSB0Lnk7CiAgICAgIH0sIE0uXyR1ciA9IC0yLCBNLl8kRVMgPSA1MDAsIE0uXyR3YiA9IDIsIE0uXyQ4UyA9IDMsIE0uXyQ1MiA9IE0uXyRFUywgTS5fJFIyID0gTS5fJEVTLCBNLl8kb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIE0uXyQ1MjsKICAgICAgfSwgTS5fJFByID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBNLl8kUjI7CiAgICAgIH0sIE0ucHJvdG90eXBlLmNvbnZlcnRDbGlwSURGb3JWMl8xMSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGkgPSBbXTsKICAgICAgICByZXR1cm4gbnVsbCA9PSB0ID8gbnVsbCA6IDAgPT0gdC5sZW5ndGggPyBudWxsIDogLywvLnRlc3QodCkgPyBpID0gdC5pZC5zcGxpdCgiLCIpIDogKGkucHVzaCh0LmlkKSwgaSk7CiAgICAgIH0sIE0ucHJvdG90eXBlLl8kRjAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRnUCA9IHQuXyRuUCgpLCB0aGlzLl8kZHIgPSB0Ll8kblAoKSwgdGhpcy5fJEdTID0gdC5fJG5QKCksIHRoaXMuXyRxYiA9IHQuXyQ2TCgpLCB0aGlzLl8kTGIgPSB0Ll8kY1MoKSwgdGhpcy5fJG1TID0gdC5fJFRiKCksIHQuZ2V0Rm9ybWF0VmVyc2lvbigpID49IEcuXyRUNyA/ICh0aGlzLmNsaXBJRCA9IHQuXyRuUCgpLCB0aGlzLmNsaXBJRExpc3QgPSB0aGlzLmNvbnZlcnRDbGlwSURGb3JWMl8xMSh0aGlzLmNsaXBJRCkpIDogdGhpcy5jbGlwSURMaXN0ID0gW10sIHRoaXMuXyRNUyh0aGlzLl8kTGIpOwogICAgICB9LCBNLnByb3RvdHlwZS5nZXRDbGlwSURMaXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmNsaXBJRExpc3Q7CiAgICAgIH0sIE0ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAodCkge30sIE0ucHJvdG90eXBlLl8kTnIgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIGlmIChpLl8kSVNbMF0gPSAhMSwgaS5fJFVzID0gdi5fJFoyKHQsIHRoaXMuXyRHUywgaS5fJElTLCB0aGlzLl8kTGIpLCBhdC5fJFpzKSA7ZWxzZSBpZiAoaS5fJElTWzBdKSByZXR1cm47CiAgICAgICAgaS5fJDdzID0gdi5fJGJyKHQsIHRoaXMuXyRHUywgaS5fJElTLCB0aGlzLl8kbVMpOwogICAgICB9LCBNLnByb3RvdHlwZS5fJDJiID0gZnVuY3Rpb24gKHQsIGkpIHt9LCBNLnByb3RvdHlwZS5nZXREcmF3RGF0YUlEID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kZ1A7CiAgICAgIH0sIE0ucHJvdG90eXBlLl8kajIgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRnUCA9IHQ7CiAgICAgIH0sIE0ucHJvdG90eXBlLmdldE9wYWNpdHkgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHJldHVybiBpLl8kN3M7CiAgICAgIH0sIE0ucHJvdG90eXBlLl8kelMgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHJldHVybiBpLl8kVXM7CiAgICAgIH0sIE0ucHJvdG90eXBlLl8kTVMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGZvciAodmFyIGkgPSB0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgICB2YXIgZSA9IHRbaV07CiAgICAgICAgICBlIDwgTS5fJDUyID8gTS5fJDUyID0gZSA6IGUgPiBNLl8kUjIgJiYgKE0uXyRSMiA9IGUpOwogICAgICAgIH0KICAgICAgfSwgTS5wcm90b3R5cGUuZ2V0VGFyZ2V0QmFzZURhdGFJRCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJGRyOwogICAgICB9LCBNLnByb3RvdHlwZS5fJGdzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kZHIgPSB0OwogICAgICB9LCBNLnByb3RvdHlwZS5fJDMyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuXyRkciAmJiB0aGlzLl8kZHIgIT0geXQuXyQybygpOwogICAgICB9LCBNLnByb3RvdHlwZS5wcmVEcmF3ID0gZnVuY3Rpb24gKHQsIGksIGUpIHt9LCBNLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKHQsIGksIGUpIHt9LCBNLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge30sIE0ucHJvdG90eXBlLl8kQjIgPSBmdW5jdGlvbiAodCwgaSwgZSkge30sIEUuXyRwcyA9IDMyLCBFLkNMSVBQSU5HX1BST0NFU1NfTk9ORSA9IDAsIEUuQ0xJUFBJTkdfUFJPQ0VTU19PVkVSV1JJVEVfQUxQSEEgPSAxLCBFLkNMSVBQSU5HX1BST0NFU1NfTVVMVElQTFlfQUxQSEEgPSAyLCBFLkNMSVBQSU5HX1BST0NFU1NfRFJBVyA9IDMsIEUuQ0xJUFBJTkdfUFJPQ0VTU19DTEVBUl9BTFBIQSA9IDQsIEUucHJvdG90eXBlLnNldENoYW5uZWxGbGFnQXNDb2xvciA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdGhpcy5DSEFOTkVMX0NPTE9SU1t0XSA9IGk7CiAgICAgIH0sIEUucHJvdG90eXBlLmdldENoYW5uZWxGbGFnQXNDb2xvciA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuQ0hBTk5FTF9DT0xPUlNbdF07CiAgICAgIH0sIEUucHJvdG90eXBlLl8kWlQgPSBmdW5jdGlvbiAoKSB7fSwgRS5wcm90b3R5cGUuXyRVbyA9IGZ1bmN0aW9uICh0LCBpLCBlLCByLCBvLCBuLCBzKSB7fSwgRS5wcm90b3R5cGUuXyRScyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0sIEUucHJvdG90eXBlLl8kRHMgPSBmdW5jdGlvbiAodCkge30sIEUucHJvdG90eXBlLnNldEJhc2VDb2xvciA9IGZ1bmN0aW9uICh0LCBpLCBlLCByKSB7CiAgICAgICAgdCA8IDAgPyB0ID0gMCA6IHQgPiAxICYmICh0ID0gMSksIGkgPCAwID8gaSA9IDAgOiBpID4gMSAmJiAoaSA9IDEpLCBlIDwgMCA/IGUgPSAwIDogZSA+IDEgJiYgKGUgPSAxKSwgciA8IDAgPyByID0gMCA6IHIgPiAxICYmIChyID0gMSksIHRoaXMuXyRsVCA9IHQsIHRoaXMuXyRDMCA9IGksIHRoaXMuXyR0VCA9IGUsIHRoaXMuXyRXTCA9IHI7CiAgICAgIH0sIEUucHJvdG90eXBlLl8kV1AgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuY3VsbGluZyA9IHQ7CiAgICAgIH0sIEUucHJvdG90eXBlLnNldE1hdHJpeCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKSB7CiAgICAgICAgICB0aGlzLm1hdHJpeDR4NFtpXSA9IHRbaV07CiAgICAgICAgfQogICAgICB9LCBFLnByb3RvdHlwZS5fJElUID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLm1hdHJpeDR4NDsKICAgICAgfSwgRS5wcm90b3R5cGUuc2V0UHJlbXVsdGlwbGllZEFscGhhID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLnByZW11bHRpcGxpZWRBbHBoYSA9IHQ7CiAgICAgIH0sIEUucHJvdG90eXBlLmlzUHJlbXVsdGlwbGllZEFscGhhID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLnByZW11bHRpcGxpZWRBbHBoYTsKICAgICAgfSwgRS5wcm90b3R5cGUuc2V0QW5pc290cm9weSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5hbmlzb3Ryb3B5ID0gdDsKICAgICAgfSwgRS5wcm90b3R5cGUuZ2V0QW5pc290cm9weSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5hbmlzb3Ryb3B5OwogICAgICB9LCBFLnByb3RvdHlwZS5nZXRDbGlwcGluZ1Byb2Nlc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY2xpcHBpbmdQcm9jZXNzOwogICAgICB9LCBFLnByb3RvdHlwZS5zZXRDbGlwcGluZ1Byb2Nlc3MgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuY2xpcHBpbmdQcm9jZXNzID0gdDsKICAgICAgfSwgRS5wcm90b3R5cGUuc2V0Q2xpcEJ1ZlByZV9jbGlwQ29udGV4dEZvck1hc2sgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuY2xpcEJ1ZlByZV9jbGlwQ29udGV4dE1hc2sgPSB0OwogICAgICB9LCBFLnByb3RvdHlwZS5nZXRDbGlwQnVmUHJlX2NsaXBDb250ZXh0TWFzayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5jbGlwQnVmUHJlX2NsaXBDb250ZXh0TWFzazsKICAgICAgfSwgRS5wcm90b3R5cGUuc2V0Q2xpcEJ1ZlByZV9jbGlwQ29udGV4dEZvckRyYXcgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuY2xpcEJ1ZlByZV9jbGlwQ29udGV4dERyYXcgPSB0OwogICAgICB9LCBFLnByb3RvdHlwZS5nZXRDbGlwQnVmUHJlX2NsaXBDb250ZXh0RHJhdyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5jbGlwQnVmUHJlX2NsaXBDb250ZXh0RHJhdzsKICAgICAgfSwgSS5fJHVyID0gLTIsIEkuXyRjMiA9IDEsIEkuXyRfYiA9IDIsIEkucHJvdG90eXBlLl8kRjAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRrUCA9IHQuXyRuUCgpLCB0aGlzLl8kZHIgPSB0Ll8kblAoKTsKICAgICAgfSwgSS5wcm90b3R5cGUucmVhZFYyX29wYWNpdHkgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHQuZ2V0Rm9ybWF0VmVyc2lvbigpID49IEcuTElWRTJEX0ZPUk1BVF9WRVJTSU9OX1YyXzEwX1NESzIgJiYgKHRoaXMuXyRtUyA9IHQuXyRUYigpKTsKICAgICAgfSwgSS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICh0KSB7fSwgSS5wcm90b3R5cGUuXyROciA9IGZ1bmN0aW9uICh0LCBpKSB7fSwgSS5wcm90b3R5cGUuaW50ZXJwb2xhdGVPcGFjaXR5ID0gZnVuY3Rpb24gKHQsIGksIGUsIHIpIHsKICAgICAgICBudWxsID09IHRoaXMuXyRtUyA/IGUuc2V0SW50ZXJwb2xhdGVkT3BhY2l0eSgxKSA6IGUuc2V0SW50ZXJwb2xhdGVkT3BhY2l0eSh2Ll8kYnIodCwgaSwgciwgdGhpcy5fJG1TKSk7CiAgICAgIH0sIEkucHJvdG90eXBlLl8kMmIgPSBmdW5jdGlvbiAodCwgaSkge30sIEkucHJvdG90eXBlLl8kbmIgPSBmdW5jdGlvbiAodCwgaSwgZSwgciwgbywgbiwgcykge30sIEkucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7fSwgSS5wcm90b3R5cGUuXyRncyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJGRyID0gdDsKICAgICAgfSwgSS5wcm90b3R5cGUuXyRhMiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJGtQID0gdDsKICAgICAgfSwgSS5wcm90b3R5cGUuZ2V0VGFyZ2V0QmFzZURhdGFJRCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJGRyOwogICAgICB9LCBJLnByb3RvdHlwZS5nZXRCYXNlRGF0YUlEID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8ka1A7CiAgICAgIH0sIEkucHJvdG90eXBlLl8kMzIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5fJGRyICYmIHRoaXMuXyRkciAhPSB5dC5fJDJvKCk7CiAgICAgIH0sIHcuXyRXMiA9IDAsIHcuXyRDUyA9IHcuXyRXMiwgdy5fJE1vID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAhMDsKICAgICAgfSwgdy5fJFhQID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgZm9yICh2YXIgaSA9IGdldFRpbWVNU2VjKCk7IGdldFRpbWVNU2VjKCkgLSBpIDwgdDspIHsKICAgICAgICAgICAgOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgIHQuXyRSYigpOwogICAgICAgIH0KICAgICAgfSwgdy5nZXRVc2VyVGltZU1TZWMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHcuXyRDUyA9PSB3Ll8kVzIgPyB3LmdldFN5c3RlbVRpbWVNU2VjKCkgOiB3Ll8kQ1M7CiAgICAgIH0sIHcuc2V0VXNlclRpbWVNU2VjID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB3Ll8kQ1MgPSB0OwogICAgICB9LCB3LnVwZGF0ZVVzZXJUaW1lTVNlYyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdy5fJENTID0gdy5nZXRTeXN0ZW1UaW1lTVNlYygpOwogICAgICB9LCB3LmdldFRpbWVNU2VjID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgfSwgdy5nZXRTeXN0ZW1UaW1lTVNlYyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgIH0sIHcuXyRRID0gZnVuY3Rpb24gKHQpIHt9LCB3Ll8kalQgPSBmdW5jdGlvbiAodCwgaSwgZSwgciwgbykgewogICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgbzsgbisrKSB7CiAgICAgICAgICBlW3IgKyBuXSA9IHRbaSArIG5dOwogICAgICAgIH0KICAgICAgfSwgeC5fJGRzID0gLTIsIHgucHJvdG90eXBlLl8kRjAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyR3TCA9IHQuXyRuUCgpLCB0aGlzLl8kVlAgPSB0Ll8kNkwoKSwgdGhpcy5fJEdQID0gdC5fJG5QKCk7CiAgICAgIH0sIHgucHJvdG90eXBlLmdldFBhcmFtSW5kZXggPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiB0aGlzLl8kMnIgIT0gdCAmJiAodGhpcy5fJDhvID0geC5fJGRzKSwgdGhpcy5fJDhvOwogICAgICB9LCB4LnByb3RvdHlwZS5fJFBiID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICB0aGlzLl8kOG8gPSB0LCB0aGlzLl8kMnIgPSBpOwogICAgICB9LCB4LnByb3RvdHlwZS5nZXRQYXJhbUlEID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kd0w7CiAgICAgIH0sIHgucHJvdG90eXBlLl8keVAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyR3TCA9IHQ7CiAgICAgIH0sIHgucHJvdG90eXBlLl8kTjIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRWUDsKICAgICAgfSwgeC5wcm90b3R5cGUuXyRkMiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJEdQOwogICAgICB9LCB4LnByb3RvdHlwZS5fJHQyID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICB0aGlzLl8kVlAgPSB0LCB0aGlzLl8kR1AgPSBpOwogICAgICB9LCB4LnByb3RvdHlwZS5fJExyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kTzI7CiAgICAgIH0sIHgucHJvdG90eXBlLl8kd3IgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRPMiA9IHQ7CiAgICAgIH0sIHgucHJvdG90eXBlLl8kU0wgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRyaTsKICAgICAgfSwgeC5wcm90b3R5cGUuXyRBTCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJHJpID0gdDsKICAgICAgfSwgTy5zdGFydHNXaXRoID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICB2YXIgciA9IGkgKyBlLmxlbmd0aDsKICAgICAgICBpZiAociA+PSB0Lmxlbmd0aCkgcmV0dXJuICExOwoKICAgICAgICBmb3IgKHZhciBvID0gaTsgbyA8IHI7IG8rKykgewogICAgICAgICAgaWYgKE8uZ2V0Q2hhcih0LCBvKSAhPSBlLmNoYXJBdChvIC0gaSkpIHJldHVybiAhMTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAhMDsKICAgICAgfSwgTy5nZXRDaGFyID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSh0LmdldFVpbnQ4KGkpKTsKICAgICAgfSwgTy5jcmVhdGVTdHJpbmcgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgIGZvciAodmFyIHIgPSBuZXcgQXJyYXlCdWZmZXIoMiAqIGUpLCBvID0gbmV3IFVpbnQxNkFycmF5KHIpLCBuID0gMDsgbiA8IGU7IG4rKykgewogICAgICAgICAgb1tuXSA9IHQuZ2V0VWludDgoaSArIG4pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbyk7CiAgICAgIH0sIE8uXyRMUyA9IGZ1bmN0aW9uICh0LCBpLCBlLCByKSB7CiAgICAgICAgdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyICYmICh0ID0gbmV3IERhdGFWaWV3KHQpKTsKICAgICAgICB2YXIgbyA9IGUsCiAgICAgICAgICAgIG4gPSAhMSwKICAgICAgICAgICAgcyA9ICExLAogICAgICAgICAgICBfID0gMCwKICAgICAgICAgICAgYSA9IE8uZ2V0Q2hhcih0LCBvKTsKICAgICAgICAiLSIgPT0gYSAmJiAobiA9ICEwLCBvKyspOwoKICAgICAgICBmb3IgKHZhciBoID0gITE7IG8gPCBpOyBvKyspIHsKICAgICAgICAgIHN3aXRjaCAoYSA9IE8uZ2V0Q2hhcih0LCBvKSkgewogICAgICAgICAgICBjYXNlICIwIjoKICAgICAgICAgICAgICBfICo9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiMSI6CiAgICAgICAgICAgICAgXyA9IDEwICogXyArIDE7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICIyIjoKICAgICAgICAgICAgICBfID0gMTAgKiBfICsgMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgIjMiOgogICAgICAgICAgICAgIF8gPSAxMCAqIF8gKyAzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiNCI6CiAgICAgICAgICAgICAgXyA9IDEwICogXyArIDQ7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICI1IjoKICAgICAgICAgICAgICBfID0gMTAgKiBfICsgNTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgIjYiOgogICAgICAgICAgICAgIF8gPSAxMCAqIF8gKyA2OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiNyI6CiAgICAgICAgICAgICAgXyA9IDEwICogXyArIDc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICI4IjoKICAgICAgICAgICAgICBfID0gMTAgKiBfICsgODsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgIjkiOgogICAgICAgICAgICAgIF8gPSAxMCAqIF8gKyA5OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiLiI6CiAgICAgICAgICAgICAgcyA9ICEwLCBvKyssIGggPSAhMDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgaCA9ICEwOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChoKSBicmVhazsKICAgICAgICB9CgogICAgICAgIGlmIChzKSBmb3IgKHZhciBsID0gLjEsICQgPSAhMTsgbyA8IGk7IG8rKykgewogICAgICAgICAgc3dpdGNoIChhID0gTy5nZXRDaGFyKHQsIG8pKSB7CiAgICAgICAgICAgIGNhc2UgIjAiOgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiMSI6CiAgICAgICAgICAgICAgXyArPSAxICogbDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgIjIiOgogICAgICAgICAgICAgIF8gKz0gMiAqIGw7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICIzIjoKICAgICAgICAgICAgICBfICs9IDMgKiBsOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiNCI6CiAgICAgICAgICAgICAgXyArPSA0ICogbDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgIjUiOgogICAgICAgICAgICAgIF8gKz0gNSAqIGw7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICI2IjoKICAgICAgICAgICAgICBfICs9IDYgKiBsOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiNyI6CiAgICAgICAgICAgICAgXyArPSA3ICogbDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgIjgiOgogICAgICAgICAgICAgIF8gKz0gOCAqIGw7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICI5IjoKICAgICAgICAgICAgICBfICs9IDkgKiBsOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAkID0gITA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGwgKj0gLjEsICQpIGJyZWFrOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbiAmJiAoXyA9IC1fKSwgclswXSA9IG8sIF87CiAgICAgIH0sIEQucHJvdG90eXBlLl8kelAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fJE9iID0gbmV3IEFycmF5KCk7CiAgICAgIH0sIEQucHJvdG90eXBlLl8kRjAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRPYiA9IHQuXyRuUCgpOwogICAgICB9LCBELnByb3RvdHlwZS5fJFVyID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAodC5fJFdTKCkpIHJldHVybiAhMDsKCiAgICAgICAgZm9yICh2YXIgaSA9IHQuXyR2MigpLCBlID0gdGhpcy5fJE9iLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7CiAgICAgICAgICB2YXIgciA9IHRoaXMuXyRPYltlXS5nZXRQYXJhbUluZGV4KGkpOwoKICAgICAgICAgIGlmIChyID09IHguXyRkcyAmJiAociA9IHQuZ2V0UGFyYW1JbmRleCh0aGlzLl8kT2JbZV0uZ2V0UGFyYW1JRCgpKSksIHQuXyRYYihyKSkgcmV0dXJuICEwOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICExOwogICAgICB9LCBELnByb3RvdHlwZS5fJFEyID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICBmb3IgKHZhciBlLCByLCBvID0gdGhpcy5fJE9iLmxlbmd0aCwgbiA9IHQuXyR2MigpLCBzID0gMCwgXyA9IDA7IF8gPCBvOyBfKyspIHsKICAgICAgICAgIHZhciBhID0gdGhpcy5fJE9iW19dOwogICAgICAgICAgaWYgKGUgPSBhLmdldFBhcmFtSW5kZXgobiksIGUgPT0geC5fJGRzICYmIChlID0gdC5nZXRQYXJhbUluZGV4KGEuZ2V0UGFyYW1JRCgpKSwgYS5fJFBiKGUsIG4pKSwgZSA8IDApIHRocm93IG5ldyBFeGNlcHRpb24oImVyciAyMzI0MiA6ICIgKyBhLmdldFBhcmFtSUQoKSk7CiAgICAgICAgICB2YXIgaCA9IGUgPCAwID8gMCA6IHQuZ2V0UGFyYW1GbG9hdChlKTsKICAgICAgICAgIHIgPSBhLl8kTjIoKTsKCiAgICAgICAgICB2YXIgbCwKICAgICAgICAgICAgICAkLAogICAgICAgICAgICAgIHUgPSBhLl8kZDIoKSwKICAgICAgICAgICAgICBwID0gLTEsCiAgICAgICAgICAgICAgZiA9IDA7CgogICAgICAgICAgaWYgKHIgPCAxKSA7ZWxzZSBpZiAoMSA9PSByKSBsID0gdVswXSwgbCAtIFUuXyRKIDwgaCAmJiBoIDwgbCArIFUuXyRKID8gKHAgPSAwLCBmID0gMCkgOiAocCA9IDAsIGlbMF0gPSAhMCk7ZWxzZSBpZiAobCA9IHVbMF0sIGggPCBsIC0gVS5fJEopIHAgPSAwLCBpWzBdID0gITA7ZWxzZSBpZiAoaCA8IGwgKyBVLl8kSikgcCA9IDA7ZWxzZSB7CiAgICAgICAgICAgIGZvciAodmFyIGMgPSAhMSwgZCA9IDE7IGQgPCByOyArK2QpIHsKICAgICAgICAgICAgICBpZiAoJCA9IHVbZF0sIGggPCAkICsgVS5fJEopIHsKICAgICAgICAgICAgICAgICQgLSBVLl8kSiA8IGggPyBwID0gZCA6IChwID0gZCAtIDEsIGYgPSAoaCAtIGwpIC8gKCQgLSBsKSwgcysrKSwgYyA9ICEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBsID0gJDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYyB8fCAocCA9IHIgLSAxLCBmID0gMCwgaVswXSA9ICEwKTsKICAgICAgICAgIH0KICAgICAgICAgIGEuXyR3cihwKSwgYS5fJEFMKGYpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHM7CiAgICAgIH0sIEQucHJvdG90eXBlLl8kenIgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgIHZhciByID0gMSA8PCBlOwogICAgICAgIHIgKyAxID4gVS5fJFFiICYmIGNvbnNvbGUubG9nKCJlcnIgMjMyNDVcbiIpOwoKICAgICAgICBmb3IgKHZhciBvID0gdGhpcy5fJE9iLmxlbmd0aCwgbiA9IDEsIHMgPSAxLCBfID0gMCwgYSA9IDA7IGEgPCByOyArK2EpIHsKICAgICAgICAgIHRbYV0gPSAwOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaCA9IDA7IGggPCBvOyArK2gpIHsKICAgICAgICAgIHZhciBsID0gdGhpcy5fJE9iW2hdOwoKICAgICAgICAgIGlmICgwID09IGwuXyRTTCgpKSB7CiAgICAgICAgICAgIHZhciAkID0gbC5fJExyKCkgKiBuOwogICAgICAgICAgICBpZiAoJCA8IDAgJiYgYXQuXyQzVCkgdGhyb3cgbmV3IEV4Y2VwdGlvbigiZXJyIDIzMjQ2Iik7CgogICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IHI7ICsrYSkgewogICAgICAgICAgICAgIHRbYV0gKz0gJDsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yICh2YXIgJCA9IG4gKiBsLl8kTHIoKSwgdSA9IG4gKiAobC5fJExyKCkgKyAxKSwgYSA9IDA7IGEgPCByOyArK2EpIHsKICAgICAgICAgICAgICB0W2FdICs9IChhIC8gcyB8IDApICUgMiA9PSAwID8gJCA6IHU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlbXysrXSA9IGwuXyRTTCgpLCBzICo9IDI7CiAgICAgICAgICB9CgogICAgICAgICAgbiAqPSBsLl8kTjIoKTsKICAgICAgICB9CgogICAgICAgIHRbcl0gPSA2NTUzNSwgaVtfXSA9IC0xOwogICAgICB9LCBELnByb3RvdHlwZS5fJGgyID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICBmb3IgKHZhciByID0gbmV3IEZsb2F0MzJBcnJheShpKSwgbyA9IDA7IG8gPCBpOyArK28pIHsKICAgICAgICAgIHJbb10gPSBlW29dOwogICAgICAgIH0KCiAgICAgICAgdmFyIG4gPSBuZXcgeCgpOwogICAgICAgIG4uXyR5UCh0KSwgbi5fJHQyKGksIHIpLCB0aGlzLl8kT2IucHVzaChuKTsKICAgICAgfSwgRC5wcm90b3R5cGUuXyRKMiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IHQsIGUgPSB0aGlzLl8kT2IubGVuZ3RoLCByID0gMDsgciA8IGU7ICsrcikgewogICAgICAgICAgdmFyIG8gPSB0aGlzLl8kT2Jbcl0sCiAgICAgICAgICAgICAgbiA9IG8uXyROMigpLAogICAgICAgICAgICAgIHMgPSBpICUgby5fJE4yKCksCiAgICAgICAgICAgICAgXyA9IG8uXyRkMigpW3NdOwoKICAgICAgICAgIGNvbnNvbGUubG9nKCIlc1slZF09JTcuMmYgLyAiLCBvLmdldFBhcmFtSUQoKSwgcywgXyksIGkgLz0gbjsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKCJcbiIpOwogICAgICB9LCBELnByb3RvdHlwZS5nZXRQYXJhbUNvdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kT2IubGVuZ3RoOwogICAgICB9LCBELnByb3RvdHlwZS5fJHpzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kT2I7CiAgICAgIH0sIFIucHJvdG90eXBlLmlkZW50aXR5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgMTY7IHQrKykgewogICAgICAgICAgdGhpcy5tW3RdID0gdCAlIDUgPT0gMCA/IDEgOiAwOwogICAgICAgIH0KICAgICAgfSwgUi5wcm90b3R5cGUuZ2V0QXJyYXkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubTsKICAgICAgfSwgUi5wcm90b3R5cGUuZ2V0Q29weU1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh0aGlzLm0pOwogICAgICB9LCBSLnByb3RvdHlwZS5zZXRNYXRyaXggPSBmdW5jdGlvbiAodCkgewogICAgICAgIGlmIChudWxsICE9IHQgJiYgMTYgPT0gdC5sZW5ndGgpIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7IGkrKykgewogICAgICAgICAgdGhpcy5tW2ldID0gdFtpXTsKICAgICAgICB9CiAgICAgIH0sIFIucHJvdG90eXBlLm11bHQgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgIHJldHVybiBudWxsID09IGkgPyBudWxsIDogKHRoaXMgPT0gaSA/IHRoaXMubXVsdF9zYWZlKHRoaXMubSwgdC5tLCBpLm0sIGUpIDogdGhpcy5tdWx0X2Zhc3QodGhpcy5tLCB0Lm0sIGkubSwgZSksIGkpOwogICAgICB9LCBSLnByb3RvdHlwZS5tdWx0X3NhZmUgPSBmdW5jdGlvbiAodCwgaSwgZSwgcikgewogICAgICAgIGlmICh0ID09IGUpIHsKICAgICAgICAgIHZhciBvID0gbmV3IEFycmF5KDE2KTsKICAgICAgICAgIHRoaXMubXVsdF9mYXN0KHQsIGksIG8sIHIpOwoKICAgICAgICAgIGZvciAodmFyIG4gPSAxNTsgbiA+PSAwOyAtLW4pIHsKICAgICAgICAgICAgZVtuXSA9IG9bbl07CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHRoaXMubXVsdF9mYXN0KHQsIGksIGUsIHIpOwogICAgICB9LCBSLnByb3RvdHlwZS5tdWx0X2Zhc3QgPSBmdW5jdGlvbiAodCwgaSwgZSwgcikgewogICAgICAgIHIgPyAoZVswXSA9IHRbMF0gKiBpWzBdICsgdFs0XSAqIGlbMV0gKyB0WzhdICogaVsyXSwgZVs0XSA9IHRbMF0gKiBpWzRdICsgdFs0XSAqIGlbNV0gKyB0WzhdICogaVs2XSwgZVs4XSA9IHRbMF0gKiBpWzhdICsgdFs0XSAqIGlbOV0gKyB0WzhdICogaVsxMF0sIGVbMTJdID0gdFswXSAqIGlbMTJdICsgdFs0XSAqIGlbMTNdICsgdFs4XSAqIGlbMTRdICsgdFsxMl0sIGVbMV0gPSB0WzFdICogaVswXSArIHRbNV0gKiBpWzFdICsgdFs5XSAqIGlbMl0sIGVbNV0gPSB0WzFdICogaVs0XSArIHRbNV0gKiBpWzVdICsgdFs5XSAqIGlbNl0sIGVbOV0gPSB0WzFdICogaVs4XSArIHRbNV0gKiBpWzldICsgdFs5XSAqIGlbMTBdLCBlWzEzXSA9IHRbMV0gKiBpWzEyXSArIHRbNV0gKiBpWzEzXSArIHRbOV0gKiBpWzE0XSArIHRbMTNdLCBlWzJdID0gdFsyXSAqIGlbMF0gKyB0WzZdICogaVsxXSArIHRbMTBdICogaVsyXSwgZVs2XSA9IHRbMl0gKiBpWzRdICsgdFs2XSAqIGlbNV0gKyB0WzEwXSAqIGlbNl0sIGVbMTBdID0gdFsyXSAqIGlbOF0gKyB0WzZdICogaVs5XSArIHRbMTBdICogaVsxMF0sIGVbMTRdID0gdFsyXSAqIGlbMTJdICsgdFs2XSAqIGlbMTNdICsgdFsxMF0gKiBpWzE0XSArIHRbMTRdLCBlWzNdID0gZVs3XSA9IGVbMTFdID0gMCwgZVsxNV0gPSAxKSA6IChlWzBdID0gdFswXSAqIGlbMF0gKyB0WzRdICogaVsxXSArIHRbOF0gKiBpWzJdICsgdFsxMl0gKiBpWzNdLCBlWzRdID0gdFswXSAqIGlbNF0gKyB0WzRdICogaVs1XSArIHRbOF0gKiBpWzZdICsgdFsxMl0gKiBpWzddLCBlWzhdID0gdFswXSAqIGlbOF0gKyB0WzRdICogaVs5XSArIHRbOF0gKiBpWzEwXSArIHRbMTJdICogaVsxMV0sIGVbMTJdID0gdFswXSAqIGlbMTJdICsgdFs0XSAqIGlbMTNdICsgdFs4XSAqIGlbMTRdICsgdFsxMl0gKiBpWzE1XSwgZVsxXSA9IHRbMV0gKiBpWzBdICsgdFs1XSAqIGlbMV0gKyB0WzldICogaVsyXSArIHRbMTNdICogaVszXSwgZVs1XSA9IHRbMV0gKiBpWzRdICsgdFs1XSAqIGlbNV0gKyB0WzldICogaVs2XSArIHRbMTNdICogaVs3XSwgZVs5XSA9IHRbMV0gKiBpWzhdICsgdFs1XSAqIGlbOV0gKyB0WzldICogaVsxMF0gKyB0WzEzXSAqIGlbMTFdLCBlWzEzXSA9IHRbMV0gKiBpWzEyXSArIHRbNV0gKiBpWzEzXSArIHRbOV0gKiBpWzE0XSArIHRbMTNdICogaVsxNV0sIGVbMl0gPSB0WzJdICogaVswXSArIHRbNl0gKiBpWzFdICsgdFsxMF0gKiBpWzJdICsgdFsxNF0gKiBpWzNdLCBlWzZdID0gdFsyXSAqIGlbNF0gKyB0WzZdICogaVs1XSArIHRbMTBdICogaVs2XSArIHRbMTRdICogaVs3XSwgZVsxMF0gPSB0WzJdICogaVs4XSArIHRbNl0gKiBpWzldICsgdFsxMF0gKiBpWzEwXSArIHRbMTRdICogaVsxMV0sIGVbMTRdID0gdFsyXSAqIGlbMTJdICsgdFs2XSAqIGlbMTNdICsgdFsxMF0gKiBpWzE0XSArIHRbMTRdICogaVsxNV0sIGVbM10gPSB0WzNdICogaVswXSArIHRbN10gKiBpWzFdICsgdFsxMV0gKiBpWzJdICsgdFsxNV0gKiBpWzNdLCBlWzddID0gdFszXSAqIGlbNF0gKyB0WzddICogaVs1XSArIHRbMTFdICogaVs2XSArIHRbMTVdICogaVs3XSwgZVsxMV0gPSB0WzNdICogaVs4XSArIHRbN10gKiBpWzldICsgdFsxMV0gKiBpWzEwXSArIHRbMTVdICogaVsxMV0sIGVbMTVdID0gdFszXSAqIGlbMTJdICsgdFs3XSAqIGlbMTNdICsgdFsxMV0gKiBpWzE0XSArIHRbMTVdICogaVsxNV0pOwogICAgICB9LCBSLnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgIHRoaXMubVsxMl0gPSB0aGlzLm1bMF0gKiB0ICsgdGhpcy5tWzRdICogaSArIHRoaXMubVs4XSAqIGUgKyB0aGlzLm1bMTJdLCB0aGlzLm1bMTNdID0gdGhpcy5tWzFdICogdCArIHRoaXMubVs1XSAqIGkgKyB0aGlzLm1bOV0gKiBlICsgdGhpcy5tWzEzXSwgdGhpcy5tWzE0XSA9IHRoaXMubVsyXSAqIHQgKyB0aGlzLm1bNl0gKiBpICsgdGhpcy5tWzEwXSAqIGUgKyB0aGlzLm1bMTRdLCB0aGlzLm1bMTVdID0gdGhpcy5tWzNdICogdCArIHRoaXMubVs3XSAqIGkgKyB0aGlzLm1bMTFdICogZSArIHRoaXMubVsxNV07CiAgICAgIH0sIFIucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICB0aGlzLm1bMF0gKj0gdCwgdGhpcy5tWzRdICo9IGksIHRoaXMubVs4XSAqPSBlLCB0aGlzLm1bMV0gKj0gdCwgdGhpcy5tWzVdICo9IGksIHRoaXMubVs5XSAqPSBlLCB0aGlzLm1bMl0gKj0gdCwgdGhpcy5tWzZdICo9IGksIHRoaXMubVsxMF0gKj0gZSwgdGhpcy5tWzNdICo9IHQsIHRoaXMubVs3XSAqPSBpLCB0aGlzLm1bMTFdICo9IGU7CiAgICAgIH0sIFIucHJvdG90eXBlLnJvdGF0ZVggPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBpID0gTHQuZmNvcyh0KSwKICAgICAgICAgICAgZSA9IEx0Ll8kOSh0KSwKICAgICAgICAgICAgciA9IHRoaXMubVs0XTsKCiAgICAgICAgdGhpcy5tWzRdID0gciAqIGkgKyB0aGlzLm1bOF0gKiBlLCB0aGlzLm1bOF0gPSByICogLWUgKyB0aGlzLm1bOF0gKiBpLCByID0gdGhpcy5tWzVdLCB0aGlzLm1bNV0gPSByICogaSArIHRoaXMubVs5XSAqIGUsIHRoaXMubVs5XSA9IHIgKiAtZSArIHRoaXMubVs5XSAqIGksIHIgPSB0aGlzLm1bNl0sIHRoaXMubVs2XSA9IHIgKiBpICsgdGhpcy5tWzEwXSAqIGUsIHRoaXMubVsxMF0gPSByICogLWUgKyB0aGlzLm1bMTBdICogaSwgciA9IHRoaXMubVs3XSwgdGhpcy5tWzddID0gciAqIGkgKyB0aGlzLm1bMTFdICogZSwgdGhpcy5tWzExXSA9IHIgKiAtZSArIHRoaXMubVsxMV0gKiBpOwogICAgICB9LCBSLnByb3RvdHlwZS5yb3RhdGVZID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IEx0LmZjb3ModCksCiAgICAgICAgICAgIGUgPSBMdC5fJDkodCksCiAgICAgICAgICAgIHIgPSB0aGlzLm1bMF07CgogICAgICAgIHRoaXMubVswXSA9IHIgKiBpICsgdGhpcy5tWzhdICogLWUsIHRoaXMubVs4XSA9IHIgKiBlICsgdGhpcy5tWzhdICogaSwgciA9IHRoaXMubVsxXSwgdGhpcy5tWzFdID0gciAqIGkgKyB0aGlzLm1bOV0gKiAtZSwgdGhpcy5tWzldID0gciAqIGUgKyB0aGlzLm1bOV0gKiBpLCByID0gbVsyXSwgdGhpcy5tWzJdID0gciAqIGkgKyB0aGlzLm1bMTBdICogLWUsIHRoaXMubVsxMF0gPSByICogZSArIHRoaXMubVsxMF0gKiBpLCByID0gbVszXSwgdGhpcy5tWzNdID0gciAqIGkgKyB0aGlzLm1bMTFdICogLWUsIHRoaXMubVsxMV0gPSByICogZSArIHRoaXMubVsxMV0gKiBpOwogICAgICB9LCBSLnByb3RvdHlwZS5yb3RhdGVaID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IEx0LmZjb3ModCksCiAgICAgICAgICAgIGUgPSBMdC5fJDkodCksCiAgICAgICAgICAgIHIgPSB0aGlzLm1bMF07CgogICAgICAgIHRoaXMubVswXSA9IHIgKiBpICsgdGhpcy5tWzRdICogZSwgdGhpcy5tWzRdID0gciAqIC1lICsgdGhpcy5tWzRdICogaSwgciA9IHRoaXMubVsxXSwgdGhpcy5tWzFdID0gciAqIGkgKyB0aGlzLm1bNV0gKiBlLCB0aGlzLm1bNV0gPSByICogLWUgKyB0aGlzLm1bNV0gKiBpLCByID0gdGhpcy5tWzJdLCB0aGlzLm1bMl0gPSByICogaSArIHRoaXMubVs2XSAqIGUsIHRoaXMubVs2XSA9IHIgKiAtZSArIHRoaXMubVs2XSAqIGksIHIgPSB0aGlzLm1bM10sIHRoaXMubVszXSA9IHIgKiBpICsgdGhpcy5tWzddICogZSwgdGhpcy5tWzddID0gciAqIC1lICsgdGhpcy5tWzddICogaTsKICAgICAgfSwgYi5wcm90b3R5cGUgPSBuZXcgZXQoKSwgYi5fJHRQID0gbmV3IE9iamVjdCgpLCBiLl8kMjcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgYi5fJHRQLmNsZWFyKCk7CiAgICAgIH0sIGIuZ2V0SUQgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBpID0gYi5fJHRQW3RdOwogICAgICAgIHJldHVybiBudWxsID09IGkgJiYgKGkgPSBuZXcgYih0KSwgYi5fJHRQW3RdID0gaSksIGk7CiAgICAgIH0sIGIucHJvdG90eXBlLl8kM3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG5ldyBiKCk7CiAgICAgIH0sIEYuXyRrUyA9IC0xLCBGLl8kcFMgPSAwLCBGLl8kaGIgPSAxLCBGLlNUQVRFX0lERU5USVRZID0gMCwgRi5fJGdiID0gMSwgRi5fJGZvID0gMiwgRi5fJGdvID0gNCwgRi5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICB2YXIgciwKICAgICAgICAgICAgbywKICAgICAgICAgICAgbiwKICAgICAgICAgICAgcywKICAgICAgICAgICAgXywKICAgICAgICAgICAgYSwKICAgICAgICAgICAgaCA9IDAsCiAgICAgICAgICAgIGwgPSAwOwoKICAgICAgICBzd2l0Y2ggKHRoaXMuXyRoaSkgewogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgRi5fJGdvIHwgRi5fJGZvIHwgRi5fJGdiOgogICAgICAgICAgICBmb3IgKHIgPSB0aGlzLl8kNywgbyA9IHRoaXMuXyRILCBuID0gdGhpcy5fJGssIHMgPSB0aGlzLl8kZiwgXyA9IHRoaXMuXyRnLCBhID0gdGhpcy5fJHc7IC0tZSA+PSAwOykgewogICAgICAgICAgICAgIHZhciAkID0gdFtoKytdLAogICAgICAgICAgICAgICAgICB1ID0gdFtoKytdOwogICAgICAgICAgICAgIGlbbCsrXSA9IHIgKiAkICsgbyAqIHUgKyBuLCBpW2wrK10gPSBzICogJCArIF8gKiB1ICsgYTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgRi5fJGdvIHwgRi5fJGZvOgogICAgICAgICAgICBmb3IgKHIgPSB0aGlzLl8kNywgbyA9IHRoaXMuXyRILCBzID0gdGhpcy5fJGYsIF8gPSB0aGlzLl8kZzsgLS1lID49IDA7KSB7CiAgICAgICAgICAgICAgdmFyICQgPSB0W2grK10sCiAgICAgICAgICAgICAgICAgIHUgPSB0W2grK107CiAgICAgICAgICAgICAgaVtsKytdID0gciAqICQgKyBvICogdSwgaVtsKytdID0gcyAqICQgKyBfICogdTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgRi5fJGdvIHwgRi5fJGdiOgogICAgICAgICAgICBmb3IgKG8gPSB0aGlzLl8kSCwgbiA9IHRoaXMuXyRrLCBzID0gdGhpcy5fJGYsIGEgPSB0aGlzLl8kdzsgLS1lID49IDA7KSB7CiAgICAgICAgICAgICAgdmFyICQgPSB0W2grK107CiAgICAgICAgICAgICAgaVtsKytdID0gbyAqIHRbaCsrXSArIG4sIGlbbCsrXSA9IHMgKiAkICsgYTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgRi5fJGdvOgogICAgICAgICAgICBmb3IgKG8gPSB0aGlzLl8kSCwgcyA9IHRoaXMuXyRmOyAtLWUgPj0gMDspIHsKICAgICAgICAgICAgICB2YXIgJCA9IHRbaCsrXTsKICAgICAgICAgICAgICBpW2wrK10gPSBvICogdFtoKytdLCBpW2wrK10gPSBzICogJDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgRi5fJGZvIHwgRi5fJGdiOgogICAgICAgICAgICBmb3IgKHIgPSB0aGlzLl8kNywgbiA9IHRoaXMuXyRrLCBfID0gdGhpcy5fJGcsIGEgPSB0aGlzLl8kdzsgLS1lID49IDA7KSB7CiAgICAgICAgICAgICAgaVtsKytdID0gciAqIHRbaCsrXSArIG4sIGlbbCsrXSA9IF8gKiB0W2grK10gKyBhOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgY2FzZSBGLl8kZm86CiAgICAgICAgICAgIGZvciAociA9IHRoaXMuXyQ3LCBfID0gdGhpcy5fJGc7IC0tZSA+PSAwOykgewogICAgICAgICAgICAgIGlbbCsrXSA9IHIgKiB0W2grK10sIGlbbCsrXSA9IF8gKiB0W2grK107CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgICBjYXNlIEYuXyRnYjoKICAgICAgICAgICAgZm9yIChuID0gdGhpcy5fJGssIGEgPSB0aGlzLl8kdzsgLS1lID49IDA7KSB7CiAgICAgICAgICAgICAgaVtsKytdID0gdFtoKytdICsgbiwgaVtsKytdID0gdFtoKytdICsgYTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuOwoKICAgICAgICAgIGNhc2UgRi5TVEFURV9JREVOVElUWToKICAgICAgICAgICAgcmV0dXJuIHZvaWQgKHQgPT0gaSAmJiBoID09IGwgfHwgdy5fJGpUKHQsIGgsIGksIGwsIDIgKiBlKSk7CiAgICAgICAgfQogICAgICB9LCBGLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgMCA9PSB0aGlzLl8kSCAmJiAwID09IHRoaXMuXyRmID8gMSA9PSB0aGlzLl8kNyAmJiAxID09IHRoaXMuXyRnID8gMCA9PSB0aGlzLl8kayAmJiAwID09IHRoaXMuXyR3ID8gKHRoaXMuXyRoaSA9IEYuU1RBVEVfSURFTlRJVFksIHRoaXMuXyRaID0gRi5fJHBTKSA6ICh0aGlzLl8kaGkgPSBGLl8kZ2IsIHRoaXMuXyRaID0gRi5fJGhiKSA6IDAgPT0gdGhpcy5fJGsgJiYgMCA9PSB0aGlzLl8kdyA/ICh0aGlzLl8kaGkgPSBGLl8kZm8sIHRoaXMuXyRaID0gRi5fJGtTKSA6ICh0aGlzLl8kaGkgPSBGLl8kZm8gfCBGLl8kZ2IsIHRoaXMuXyRaID0gRi5fJGtTKSA6IDAgPT0gdGhpcy5fJDcgJiYgMCA9PSB0aGlzLl8kZyA/IDAgPT0gdGhpcy5fJGsgJiYgMCA9PSB0aGlzLl8kdyA/ICh0aGlzLl8kaGkgPSBGLl8kZ28sIHRoaXMuXyRaID0gRi5fJGtTKSA6ICh0aGlzLl8kaGkgPSBGLl8kZ28gfCBGLl8kZ2IsIHRoaXMuXyRaID0gRi5fJGtTKSA6IDAgPT0gdGhpcy5fJGsgJiYgMCA9PSB0aGlzLl8kdyA/ICh0aGlzLl8kaGkgPSBGLl8kZ28gfCBGLl8kZm8sIHRoaXMuXyRaID0gRi5fJGtTKSA6ICh0aGlzLl8kaGkgPSBGLl8kZ28gfCBGLl8kZm8gfCBGLl8kZ2IsIHRoaXMuXyRaID0gRi5fJGtTKTsKICAgICAgfSwgRi5wcm90b3R5cGUuXyRSVCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJElUKHQpOwoKICAgICAgICB2YXIgaSA9IHRbMF0sCiAgICAgICAgICAgIGUgPSB0WzJdLAogICAgICAgICAgICByID0gdFsxXSwKICAgICAgICAgICAgbyA9IHRbM10sCiAgICAgICAgICAgIG4gPSBNYXRoLnNxcnQoaSAqIGkgKyByICogciksCiAgICAgICAgICAgIHMgPSBpICogbyAtIGUgKiByOwogICAgICAgIDAgPT0gbiA/IGF0Ll8kc28gJiYgY29uc29sZS5sb2coImFmZmluZS5fJFJUKCkgLyBydD09MCIpIDogKHRbMF0gPSBuLCB0WzFdID0gcyAvIG4sIHRbMl0gPSAociAqIG8gKyBpICogZSkgLyBzLCB0WzNdID0gTWF0aC5hdGFuMihyLCBpKSk7CiAgICAgIH0sIEYucHJvdG90eXBlLl8kaG8gPSBmdW5jdGlvbiAodCwgaSwgZSwgcikgewogICAgICAgIHZhciBvID0gbmV3IEZsb2F0MzJBcnJheSg2KSwKICAgICAgICAgICAgbiA9IG5ldyBGbG9hdDMyQXJyYXkoNik7CiAgICAgICAgdC5fJFJUKG8pLCBpLl8kUlQobik7CiAgICAgICAgdmFyIHMgPSBuZXcgRmxvYXQzMkFycmF5KDYpOwogICAgICAgIHNbMF0gPSBvWzBdICsgKG5bMF0gLSBvWzBdKSAqIGUsIHNbMV0gPSBvWzFdICsgKG5bMV0gLSBvWzFdKSAqIGUsIHNbMl0gPSBvWzJdICsgKG5bMl0gLSBvWzJdKSAqIGUsIHNbM10gPSBvWzNdICsgKG5bM10gLSBvWzNdKSAqIGUsIHNbNF0gPSBvWzRdICsgKG5bNF0gLSBvWzRdKSAqIGUsIHNbNV0gPSBvWzVdICsgKG5bNV0gLSBvWzVdKSAqIGUsIHIuXyRDVChzKTsKICAgICAgfSwgRi5wcm90b3R5cGUuXyRDVCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGkgPSBNYXRoLmNvcyh0WzNdKSwKICAgICAgICAgICAgZSA9IE1hdGguc2luKHRbM10pOwogICAgICAgIHRoaXMuXyQ3ID0gdFswXSAqIGksIHRoaXMuXyRmID0gdFswXSAqIGUsIHRoaXMuXyRIID0gdFsxXSAqICh0WzJdICogaSAtIGUpLCB0aGlzLl8kZyA9IHRbMV0gKiAodFsyXSAqIGUgKyBpKSwgdGhpcy5fJGsgPSB0WzRdLCB0aGlzLl8kdyA9IHRbNV0sIHRoaXMudXBkYXRlKCk7CiAgICAgIH0sIEYucHJvdG90eXBlLl8kSVQgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRbMF0gPSB0aGlzLl8kNywgdFsxXSA9IHRoaXMuXyRmLCB0WzJdID0gdGhpcy5fJEgsIHRbM10gPSB0aGlzLl8kZywgdFs0XSA9IHRoaXMuXyRrLCB0WzVdID0gdGhpcy5fJHc7CiAgICAgIH0sIEMucHJvdG90eXBlID0gbmV3IHMoKSwgQy5fJGNzID0gIlZJU0lCTEU6IiwgQy5fJGFyID0gIkxBWU9VVDoiLCBDLl8kQ28gPSAwLCBDLl8kRDIgPSBbXSwgQy5fJDFUID0gMSwgQy5sb2FkTW90aW9uID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IG5ldyBDKCksCiAgICAgICAgICAgIGUgPSBbMF0sCiAgICAgICAgICAgIHIgPSB0Lmxlbmd0aDsKICAgICAgICBpLl8keVQgPSAwOwoKICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IHI7ICsrbykgewogICAgICAgICAgdmFyIG4gPSAyNTUgJiB0W29dOwogICAgICAgICAgaWYgKCJcbiIgIT0gbiAmJiAiXHIiICE9IG4pIGlmICgiIyIgIT0gbikgewogICAgICAgICAgICBpZiAoIiQiICE9IG4pIHsKICAgICAgICAgICAgICBpZiAoImEiIDw9IG4gJiYgbiA8PSAieiIgfHwgIkEiIDw9IG4gJiYgbiA8PSAiWiIgfHwgIl8iID09IG4pIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSBvLCBfID0gLTE7IG8gPCByICYmICJcciIgIT0gKG4gPSAyNTUgJiB0W29dKSAmJiAiXG4iICE9IG47ICsrbykgewogICAgICAgICAgICAgICAgICBpZiAoIj0iID09IG4pIHsKICAgICAgICAgICAgICAgICAgICBfID0gbzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfID49IDApIHsKICAgICAgICAgICAgICAgICAgdmFyIGEgPSBuZXcgQigpOwogICAgICAgICAgICAgICAgICBPLnN0YXJ0c1dpdGgodCwgcywgQy5fJGNzKSA/IChhLl8kUlAgPSBCLl8kaHMsIGEuXyQ0UCA9IG5ldyBTdHJpbmcodCwgcywgXyAtIHMpKSA6IE8uc3RhcnRzV2l0aCh0LCBzLCBDLl8kYXIpID8gKGEuXyQ0UCA9IG5ldyBTdHJpbmcodCwgcyArIDcsIF8gLSBzIC0gNyksIE8uc3RhcnRzV2l0aCh0LCBzICsgNywgIkFOQ0hPUl9YIikgPyBhLl8kUlAgPSBCLl8keHMgOiBPLnN0YXJ0c1dpdGgodCwgcyArIDcsICJBTkNIT1JfWSIpID8gYS5fJFJQID0gQi5fJHVzIDogTy5zdGFydHNXaXRoKHQsIHMgKyA3LCAiU0NBTEVfWCIpID8gYS5fJFJQID0gQi5fJHFzIDogTy5zdGFydHNXaXRoKHQsIHMgKyA3LCAiU0NBTEVfWSIpID8gYS5fJFJQID0gQi5fJFlzIDogTy5zdGFydHNXaXRoKHQsIHMgKyA3LCAiWCIpID8gYS5fJFJQID0gQi5fJHdzIDogTy5zdGFydHNXaXRoKHQsIHMgKyA3LCAiWSIpICYmIChhLl8kUlAgPSBCLl8kTnMpKSA6IChhLl8kUlAgPSBCLl8kRnIsIGEuXyQ0UCA9IG5ldyBTdHJpbmcodCwgcywgXyAtIHMpKSwgaS5tb3Rpb25zLnB1c2goYSk7CiAgICAgICAgICAgICAgICAgIHZhciBoID0gMDsKCiAgICAgICAgICAgICAgICAgIGZvciAoQy5fJEQyLmNsZWFyKCksIG8gPSBfICsgMTsgbyA8IHIgJiYgIlxyIiAhPSAobiA9IDI1NSAmIHRbb10pICYmICJcbiIgIT0gbjsgKytvKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCIsIiAhPSBuICYmICIgIiAhPSBuICYmICJcdCIgIT0gbikgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBPLl8kTFModCwgciwgbywgZSk7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKGVbMF0gPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEMuXyREMi5wdXNoKGwpLCBoKys7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkID0gZVswXTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkIDwgbykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJfJG4wIF8kaGkgLiBATGl2ZTJETW90aW9uIGxvYWRNb3Rpb24oKVxuIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSAkOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgYS5fJEkwID0gQy5fJEQyLl8kQkwoKSwgaCA+IGkuXyR5VCAmJiAoaS5fJHlUID0gaCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGZvciAodmFyIHMgPSBvLCBfID0gLTE7IG8gPCByICYmICJcciIgIT0gKG4gPSAyNTUgJiB0W29dKSAmJiAiXG4iICE9IG47ICsrbykgewogICAgICAgICAgICAgICAgaWYgKCI9IiA9PSBuKSB7CiAgICAgICAgICAgICAgICAgIF8gPSBvOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhciB1ID0gITE7CiAgICAgICAgICAgICAgaWYgKF8gPj0gMCkgZm9yIChfID09IHMgKyA0ICYmICJmIiA9PSB0W3MgKyAxXSAmJiAicCIgPT0gdFtzICsgMl0gJiYgInMiID09IHRbcyArIDNdICYmICh1ID0gITApLCBvID0gXyArIDE7IG8gPCByICYmICJcciIgIT0gKG4gPSAyNTUgJiB0W29dKSAmJiAiXG4iICE9IG47ICsrbykgewogICAgICAgICAgICAgICAgaWYgKCIsIiAhPSBuICYmICIgIiAhPSBuICYmICJcdCIgIT0gbikgewogICAgICAgICAgICAgICAgICB2YXIgbCA9IE8uXyRMUyh0LCByLCBvLCBlKTsKCiAgICAgICAgICAgICAgICAgIGVbMF0gPiAwICYmIHUgJiYgNSA8IGwgJiYgbCA8IDEyMSAmJiAoaS5fJEQwID0gbCksIG8gPSBlWzBdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm9yICg7IG8gPCByICYmICJcbiIgIT0gdFtvXSAmJiAiXHIiICE9IHRbb107ICsrbykgewogICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGZvciAoOyBvIDwgciAmJiAiXG4iICE9IHRbb10gJiYgIlxyIiAhPSB0W29dOyArK28pIHsKICAgICAgICAgICAgOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGkuXyRBUyA9IDFlMyAqIGkuXyR5VCAvIGkuXyREMCB8IDAsIGk7CiAgICAgIH0sIEMucHJvdG90eXBlLmdldER1cmF0aW9uTVNlYyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJEFTOwogICAgICB9LCBDLnByb3RvdHlwZS5kdW1wID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy5tb3Rpb25zLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICB2YXIgaSA9IHRoaXMubW90aW9uc1t0XTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJfJHdMWyVzXSBbJWRdLiAiLCBpLl8kNFAsIGkuXyRJMC5sZW5ndGgpOwoKICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgaS5fJEkwLmxlbmd0aCAmJiBlIDwgMTA7IGUrKykgewogICAgICAgICAgICBjb25zb2xlLmxvZygiJTUuMmYgLCIsIGkuXyRJMFtlXSk7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc29sZS5sb2coIlxuIik7CiAgICAgICAgfQogICAgICB9LCBDLnByb3RvdHlwZS51cGRhdGVQYXJhbUV4ZSA9IGZ1bmN0aW9uICh0LCBpLCBlLCByKSB7CiAgICAgICAgZm9yICh2YXIgbyA9IGkgLSByLl8kejIsIG4gPSBvICogdGhpcy5fJEQwIC8gMWUzLCBzID0gMCB8IG4sIF8gPSBuIC0gcywgYSA9IDA7IGEgPCB0aGlzLm1vdGlvbnMubGVuZ3RoOyBhKyspIHsKICAgICAgICAgIHZhciBoID0gdGhpcy5tb3Rpb25zW2FdLAogICAgICAgICAgICAgIGwgPSBoLl8kSTAubGVuZ3RoLAogICAgICAgICAgICAgICQgPSBoLl8kNFA7CgogICAgICAgICAgaWYgKGguXyRSUCA9PSBCLl8kaHMpIHsKICAgICAgICAgICAgdmFyIHUgPSBoLl8kSTBbcyA+PSBsID8gbCAtIDEgOiBzXTsKICAgICAgICAgICAgdC5zZXRQYXJhbUZsb2F0KCQsIHUpOwogICAgICAgICAgfSBlbHNlIGlmIChCLl8kd3MgPD0gaC5fJFJQICYmIGguXyRSUCA8PSBCLl8kWXMpIDtlbHNlIHsKICAgICAgICAgICAgdmFyIHAgPSB0LmdldFBhcmFtRmxvYXQoJCksCiAgICAgICAgICAgICAgICBmID0gaC5fJEkwW3MgPj0gbCA/IGwgLSAxIDogc10sCiAgICAgICAgICAgICAgICBjID0gaC5fJEkwW3MgKyAxID49IGwgPyBsIC0gMSA6IHMgKyAxXSwKICAgICAgICAgICAgICAgIGQgPSBmICsgKGMgLSBmKSAqIF8sCiAgICAgICAgICAgICAgICBnID0gcCArIChkIC0gcCkgKiBlOwogICAgICAgICAgICB0LnNldFBhcmFtRmxvYXQoJCwgZyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBzID49IHRoaXMuXyR5VCAmJiAodGhpcy5fJEUgPyAoci5fJHoyID0gaSwgdGhpcy5sb29wRmFkZUluICYmIChyLl8kYnMgPSBpKSkgOiByLl8kOUwgPSAhMCk7CiAgICAgIH0sIEMucHJvdG90eXBlLl8kcjAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRFOwogICAgICB9LCBDLnByb3RvdHlwZS5fJGFMID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kRSA9IHQ7CiAgICAgIH0sIEMucHJvdG90eXBlLmlzTG9vcEZhZGVJbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5sb29wRmFkZUluOwogICAgICB9LCBDLnByb3RvdHlwZS5zZXRMb29wRmFkZUluID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLmxvb3BGYWRlSW4gPSB0OwogICAgICB9LCBOLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLnNpemUgPSAwOwogICAgICB9LCBOLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGlmICh0aGlzLl8kUC5sZW5ndGggPD0gdGhpcy5zaXplKSB7CiAgICAgICAgICB2YXIgaSA9IG5ldyBGbG9hdDMyQXJyYXkoMiAqIHRoaXMuc2l6ZSk7CiAgICAgICAgICB3Ll8kalQodGhpcy5fJFAsIDAsIGksIDAsIHRoaXMuc2l6ZSksIHRoaXMuXyRQID0gaTsKICAgICAgICB9CgogICAgICAgIHRoaXMuXyRQW3RoaXMuc2l6ZSsrXSA9IHQ7CiAgICAgIH0sIE4ucHJvdG90eXBlLl8kQkwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHQgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuc2l6ZSk7CiAgICAgICAgcmV0dXJuIHcuXyRqVCh0aGlzLl8kUCwgMCwgdCwgMCwgdGhpcy5zaXplKSwgdDsKICAgICAgfSwgQi5fJEZyID0gMCwgQi5fJGhzID0gMSwgQi5fJHdzID0gMTAwLCBCLl8kTnMgPSAxMDEsIEIuXyR4cyA9IDEwMiwgQi5fJHVzID0gMTAzLCBCLl8kcXMgPSAxMDQsIEIuXyRZcyA9IDEwNSwgVS5fJE1zID0gMSwgVS5fJFFzID0gMiwgVS5fJGkyID0gMCwgVS5fJE5vID0gMiwgVS5fJGRvID0gVS5fJE1zLCBVLl8kTHMgPSAhMCwgVS5fJDFyID0gNSwgVS5fJFFiID0gNjUsIFUuXyRKID0gMWUtNCwgVS5fJEZUID0gLjAwMSwgVS5fJFNzID0gMywgRy5fJG83ID0gNiwgRy5fJFM3ID0gNywgRy5fJHM3ID0gOCwgRy5fJDc3ID0gOSwgRy5MSVZFMkRfRk9STUFUX1ZFUlNJT05fVjJfMTBfU0RLMiA9IDEwLCBHLkxJVkUyRF9GT1JNQVRfVkVSU0lPTl9WMl8xMV9TREsyXzEgPSAxMSwgRy5fJFQ3ID0gRy5MSVZFMkRfRk9STUFUX1ZFUlNJT05fVjJfMTFfU0RLMl8xLCBHLl8kSXMgPSAtMjAwNDMxODA3MiwgRy5fJGgwID0gMCwgRy5fJDRMID0gMjMsIEcuXyQ3UCA9IDMzLCBHLl8kdVQgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGNvbnNvbGUubG9nKCJfJGJvIDo6IF8kNiBfJG1vIF8kRTAgOiAlZFxuIiwgdCk7CiAgICAgIH0sIEcuXyQ5byA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgaWYgKHQgPCA0MCkgcmV0dXJuIEcuXyR1VCh0KSwgbnVsbDsKICAgICAgICBpZiAodCA8IDUwKSByZXR1cm4gRy5fJHVUKHQpLCBudWxsOwogICAgICAgIGlmICh0IDwgNjApIHJldHVybiBHLl8kdVQodCksIG51bGw7CiAgICAgICAgaWYgKHQgPCAxMDApIHN3aXRjaCAodCkgewogICAgICAgICAgY2FzZSA2NToKICAgICAgICAgICAgcmV0dXJuIG5ldyBaKCk7CgogICAgICAgICAgY2FzZSA2NjoKICAgICAgICAgICAgcmV0dXJuIG5ldyBEKCk7CgogICAgICAgICAgY2FzZSA2NzoKICAgICAgICAgICAgcmV0dXJuIG5ldyB4KCk7CgogICAgICAgICAgY2FzZSA2ODoKICAgICAgICAgICAgcmV0dXJuIG5ldyB6KCk7CgogICAgICAgICAgY2FzZSA2OToKICAgICAgICAgICAgcmV0dXJuIG5ldyBQKCk7CgogICAgICAgICAgY2FzZSA3MDoKICAgICAgICAgICAgcmV0dXJuIG5ldyAkdCgpOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBHLl8kdVQodCksIG51bGw7CiAgICAgICAgfSBlbHNlIGlmICh0IDwgMTUwKSBzd2l0Y2ggKHQpIHsKICAgICAgICAgIGNhc2UgMTMxOgogICAgICAgICAgICByZXR1cm4gbmV3IHN0KCk7CgogICAgICAgICAgY2FzZSAxMzM6CiAgICAgICAgICAgIHJldHVybiBuZXcgdHQoKTsKCiAgICAgICAgICBjYXNlIDEzNjoKICAgICAgICAgICAgcmV0dXJuIG5ldyBwKCk7CgogICAgICAgICAgY2FzZSAxMzc6CiAgICAgICAgICAgIHJldHVybiBuZXcgb3QoKTsKCiAgICAgICAgICBjYXNlIDE0MjoKICAgICAgICAgICAgcmV0dXJuIG5ldyBqKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBHLl8kdVQodCksIG51bGw7CiAgICAgIH0sIFkuXyRIUCA9IDAsIFkuXyRfMCA9ICEwOwogICAgICBZLl8kVjIgPSAtMSwgWS5fJFcwID0gLTEsIFkuXyRqciA9ICExLCBZLl8kWlMgPSAhMCwgWS5fJHRyID0gLTFlNiwgWS5fJGxyID0gMWU2LCBZLl8kaXMgPSAzMiwgWS5fJGUgPSAhMSwgWS5wcm90b3R5cGUuZ2V0RHJhd0RhdGFJbmRleCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuXyRhUy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fJGFTW2ldICYmIHRoaXMuXyRhU1tpXS5nZXREcmF3RGF0YUlEKCkgPT0gdCkgcmV0dXJuIGk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0sIFkucHJvdG90eXBlLmdldERyYXdEYXRhID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGIpIHsKICAgICAgICAgIGlmIChudWxsID09IHRoaXMuXyRCbykgewogICAgICAgICAgICB0aGlzLl8kQm8gPSBuZXcgT2JqZWN0KCk7CgogICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5fJGFTLmxlbmd0aCwgZSA9IDA7IGUgPCBpOyBlKyspIHsKICAgICAgICAgICAgICB2YXIgciA9IHRoaXMuXyRhU1tlXSwKICAgICAgICAgICAgICAgICAgbyA9IHIuZ2V0RHJhd0RhdGFJRCgpOwogICAgICAgICAgICAgIG51bGwgIT0gbyAmJiAodGhpcy5fJEJvW29dID0gcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdGhpcy5fJEJvW2lkXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0IDwgdGhpcy5fJGFTLmxlbmd0aCA/IHRoaXMuXyRhU1t0XSA6IG51bGw7CiAgICAgIH0sIFkucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fJDNTLmNsZWFyKCksIHRoaXMuXyRhUy5jbGVhcigpLCB0aGlzLl8kRjIuY2xlYXIoKSwgbnVsbCAhPSB0aGlzLl8kQm8gJiYgdGhpcy5fJEJvLmNsZWFyKCksIHRoaXMuXyRkYi5jbGVhcigpLCB0aGlzLl8kOGIuY2xlYXIoKSwgdGhpcy5fJEhyLmNsZWFyKCk7CiAgICAgIH0sIFkucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fJGNvKyssIHRoaXMuXyRGMi5sZW5ndGggPiAwICYmIHRoaXMucmVsZWFzZSgpOwoKICAgICAgICBmb3IgKHZhciB0ID0gdGhpcy5fJFJpLmdldE1vZGVsSW1wbCgpLCBpID0gdC5fJFhyKCksIHIgPSBpLmxlbmd0aCwgbyA9IG5ldyBBcnJheSgpLCBuID0gbmV3IEFycmF5KCksIHMgPSAwOyBzIDwgcjsgKytzKSB7CiAgICAgICAgICB2YXIgXyA9IGlbc107CiAgICAgICAgICB0aGlzLl8kRjIucHVzaChfKSwgdGhpcy5fJEhyLnB1c2goXy5pbml0KHRoaXMpKTsKCiAgICAgICAgICBmb3IgKHZhciBhID0gXy5nZXRCYXNlRGF0YSgpLCBoID0gYS5sZW5ndGgsIGwgPSAwOyBsIDwgaDsgKytsKSB7CiAgICAgICAgICAgIG8ucHVzaChhW2xdKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IGg7ICsrbCkgewogICAgICAgICAgICB2YXIgJCA9IGFbbF0uaW5pdCh0aGlzKTsKICAgICAgICAgICAgJC5fJGwyKHMpLCBuLnB1c2goJCk7CiAgICAgICAgICB9CgogICAgICAgICAgZm9yICh2YXIgdSA9IF8uZ2V0RHJhd0RhdGEoKSwgcCA9IHUubGVuZ3RoLCBsID0gMDsgbCA8IHA7ICsrbCkgewogICAgICAgICAgICB2YXIgZiA9IHVbbF0sCiAgICAgICAgICAgICAgICBjID0gZi5pbml0KHRoaXMpOwogICAgICAgICAgICBjLl8kSVAgPSBzLCB0aGlzLl8kYVMucHVzaChmKSwgdGhpcy5fJDhiLnB1c2goYyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBkID0gby5sZW5ndGgsIGcgPSB5dC5fJDJvKCk7OykgewogICAgICAgICAgZm9yICh2YXIgeSA9ICExLCBzID0gMDsgcyA8IGQ7ICsrcykgewogICAgICAgICAgICB2YXIgbSA9IG9bc107CgogICAgICAgICAgICBpZiAobnVsbCAhPSBtKSB7CiAgICAgICAgICAgICAgdmFyIFQgPSBtLmdldFRhcmdldEJhc2VEYXRhSUQoKTsKICAgICAgICAgICAgICAobnVsbCA9PSBUIHx8IFQgPT0gZyB8fCB0aGlzLmdldEJhc2VEYXRhSW5kZXgoVCkgPj0gMCkgJiYgKHRoaXMuXyQzUy5wdXNoKG0pLCB0aGlzLl8kZGIucHVzaChuW3NdKSwgb1tzXSA9IG51bGwsIHkgPSAhMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIXkpIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgdmFyIFAgPSB0Ll8kRTIoKTsKCiAgICAgICAgaWYgKG51bGwgIT0gUCkgewogICAgICAgICAgdmFyIFMgPSBQLl8kMXMoKTsKCiAgICAgICAgICBpZiAobnVsbCAhPSBTKSBmb3IgKHZhciB2ID0gUy5sZW5ndGgsIHMgPSAwOyBzIDwgdjsgKytzKSB7CiAgICAgICAgICAgIHZhciBMID0gU1tzXTsKICAgICAgICAgICAgbnVsbCAhPSBMICYmIHRoaXMuXyQwMihMLmdldFBhcmFtSUQoKSwgTC5nZXREZWZhdWx0VmFsdWUoKSwgTC5nZXRNaW5WYWx1ZSgpLCBMLmdldE1heFZhbHVlKCkpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5jbGlwTWFuYWdlciA9IG5ldyBlKHRoaXMuZHBfd2ViZ2wpLCB0aGlzLmNsaXBNYW5hZ2VyLmluaXQodGhpcywgdGhpcy5fJGFTLCB0aGlzLl8kOGIpLCB0aGlzLl8kUVQgPSAhMDsKICAgICAgfSwgWS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgIFkuXyRlICYmIF8uc3RhcnQoIl8kekwiKTsKCiAgICAgICAgZm9yICh2YXIgdCA9IHRoaXMuXyRfMi5sZW5ndGgsIGkgPSAwOyBpIDwgdDsgaSsrKSB7CiAgICAgICAgICB0aGlzLl8kXzJbaV0gIT0gdGhpcy5fJHZyW2ldICYmICh0aGlzLl8kSnNbaV0gPSBZLl8kWlMsIHRoaXMuXyR2cltpXSA9IHRoaXMuXyRfMltpXSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgZSA9IHRoaXMuXyQzUy5sZW5ndGgsCiAgICAgICAgICAgIHIgPSB0aGlzLl8kYVMubGVuZ3RoLAogICAgICAgICAgICBvID0gVy5fJG9yKCksCiAgICAgICAgICAgIG4gPSBXLl8kUHIoKSwKICAgICAgICAgICAgcyA9IG4gLSBvICsgMTsKCiAgICAgICAgKG51bGwgPT0gdGhpcy5fJFdzIHx8IHRoaXMuXyRXcy5sZW5ndGggPCBzKSAmJiAodGhpcy5fJFdzID0gbmV3IEludDE2QXJyYXkocyksIHRoaXMuXyRWcyA9IG5ldyBJbnQxNkFycmF5KHMpKTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzOyBpKyspIHsKICAgICAgICAgIHRoaXMuXyRXc1tpXSA9IFkuXyRWMiwgdGhpcy5fJFZzW2ldID0gWS5fJFYyOwogICAgICAgIH0KCiAgICAgICAgKG51bGwgPT0gdGhpcy5fJEVyIHx8IHRoaXMuXyRFci5sZW5ndGggPCByKSAmJiAodGhpcy5fJEVyID0gbmV3IEludDE2QXJyYXkocikpOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHI7IGkrKykgewogICAgICAgICAgdGhpcy5fJEVyW2ldID0gWS5fJFcwOwogICAgICAgIH0KCiAgICAgICAgWS5fJGUgJiYgXy5kdW1wKCJfJHpMIiksIFkuXyRlICYmIF8uc3RhcnQoIl8kVUwiKTsKCiAgICAgICAgZm9yICh2YXIgYSA9IG51bGwsIGggPSAwOyBoIDwgZTsgKytoKSB7CiAgICAgICAgICB2YXIgbCA9IHRoaXMuXyQzU1toXSwKICAgICAgICAgICAgICAkID0gdGhpcy5fJGRiW2hdOwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGwuXyROcih0aGlzLCAkKSwgbC5fJDJiKHRoaXMsICQpOwogICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICBudWxsID09IGEgJiYgKGEgPSB0KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIG51bGwgIT0gYSAmJiBZLl8kXzAgJiYgXy5fJFJiKGEpLCBZLl8kZSAmJiBfLmR1bXAoIl8kVUwiKSwgWS5fJGUgJiYgXy5zdGFydCgiXyRETCIpOwoKICAgICAgICBmb3IgKHZhciB1ID0gbnVsbCwgcCA9IDA7IHAgPCByOyArK3ApIHsKICAgICAgICAgIHZhciBmID0gdGhpcy5fJGFTW3BdLAogICAgICAgICAgICAgIGMgPSB0aGlzLl8kOGJbcF07CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKGYuXyROcih0aGlzLCBjKSwgYy5fJHUyKCkpIGNvbnRpbnVlOwoKICAgICAgICAgICAgZi5fJDJiKHRoaXMsIGMpOwoKICAgICAgICAgICAgdmFyIGQsCiAgICAgICAgICAgICAgICBnID0gTWF0aC5mbG9vcihmLl8kelModGhpcywgYykgLSBvKTsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZCA9IHRoaXMuXyRWc1tnXTsKICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJfJGxpIDo6ICVzIC8gJXMgXHRcdFx0XHRAQF8kZlNcbiIsIHQudG9TdHJpbmcoKSwgZi5nZXREcmF3RGF0YUlEKCkudG9TdHJpbmcoKSksIGcgPSBNYXRoLmZsb29yKGYuXyR6Uyh0aGlzLCBjKSAtIG8pOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBkID09IFkuXyRWMiA/IHRoaXMuXyRXc1tnXSA9IHAgOiB0aGlzLl8kRXJbZF0gPSBwLCB0aGlzLl8kVnNbZ10gPSBwOwogICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICBudWxsID09IHUgJiYgKHUgPSB0LCBhdC5fJHNUKGF0Ll8kSDcpKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIG51bGwgIT0gdSAmJiBZLl8kXzAgJiYgXy5fJFJiKHUpLCBZLl8kZSAmJiBfLmR1bXAoIl8kREwiKSwgWS5fJGUgJiYgXy5zdGFydCgiXyRlTCIpOwoKICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5fJEpzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICB0aGlzLl8kSnNbaV0gPSBZLl8kanI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpcy5fJFFUID0gITEsIFkuXyRlICYmIF8uZHVtcCgiXyRlTCIpLCAhMTsKICAgICAgfSwgWS5wcm90b3R5cGUucHJlRHJhdyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgbnVsbCAhPSB0aGlzLmNsaXBNYW5hZ2VyICYmICh0Ll8kWlQoKSwgdGhpcy5jbGlwTWFuYWdlci5zZXR1cENsaXAodGhpcywgdCkpOwogICAgICB9LCBZLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAobnVsbCA9PSB0aGlzLl8kV3MpIHJldHVybiB2b2lkIF8uXyRsaSgiY2FsbCBfJFJpLnVwZGF0ZSgpIGJlZm9yZSBfJFJpLmRyYXcoKSAiKTsKICAgICAgICB2YXIgaSA9IHRoaXMuXyRXcy5sZW5ndGg7CgogICAgICAgIHQuXyRaVCgpOwoKICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IGk7ICsrZSkgewogICAgICAgICAgdmFyIHIgPSB0aGlzLl8kV3NbZV07CiAgICAgICAgICBpZiAociAhPSBZLl8kVjIpIGZvciAoOzspIHsKICAgICAgICAgICAgdmFyIG8gPSB0aGlzLl8kYVNbcl0sCiAgICAgICAgICAgICAgICBuID0gdGhpcy5fJDhiW3JdOwoKICAgICAgICAgICAgaWYgKG4uXyR5bygpKSB7CiAgICAgICAgICAgICAgdmFyIHMgPSBuLl8kSVAsCiAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLl8kSHJbc107CiAgICAgICAgICAgICAgbi5fJFZTID0gYS5nZXRQYXJ0c09wYWNpdHkoKSwgby5kcmF3KHQsIHRoaXMsIG4pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgaCA9IHRoaXMuXyRFcltyXTsKICAgICAgICAgICAgaWYgKGggPD0gciB8fCBoID09IFkuXyRXMCkgYnJlYWs7CiAgICAgICAgICAgIHIgPSBoOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgWS5wcm90b3R5cGUuZ2V0UGFyYW1JbmRleCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuXyRwYi5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgewogICAgICAgICAgaWYgKHRoaXMuXyRwYltpXSA9PSB0KSByZXR1cm4gaTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLl8kMDIodCwgMCwgWS5fJHRyLCBZLl8kbHIpOwogICAgICB9LCBZLnByb3RvdHlwZS5fJEJTID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXRCYXNlRGF0YUluZGV4KHQpOwogICAgICB9LCBZLnByb3RvdHlwZS5nZXRCYXNlRGF0YUluZGV4ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5fJDNTLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7CiAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl8kM1NbaV0gJiYgdGhpcy5fJDNTW2ldLmdldEJhc2VEYXRhSUQoKSA9PSB0KSByZXR1cm4gaTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAtMTsKICAgICAgfSwgWS5wcm90b3R5cGUuXyRVVCA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdmFyIGUgPSBuZXcgRmxvYXQzMkFycmF5KGkpOwogICAgICAgIHJldHVybiB3Ll8kalQodCwgMCwgZSwgMCwgdC5sZW5ndGgpLCBlOwogICAgICB9LCBZLnByb3RvdHlwZS5fJDAyID0gZnVuY3Rpb24gKHQsIGksIGUsIHIpIHsKICAgICAgICBpZiAodGhpcy5fJHFvID49IHRoaXMuXyRwYi5sZW5ndGgpIHsKICAgICAgICAgIHZhciBvID0gdGhpcy5fJHBiLmxlbmd0aCwKICAgICAgICAgICAgICBuID0gbmV3IEFycmF5KDIgKiBvKTsKICAgICAgICAgIHcuXyRqVCh0aGlzLl8kcGIsIDAsIG4sIDAsIG8pLCB0aGlzLl8kcGIgPSBuLCB0aGlzLl8kXzIgPSB0aGlzLl8kVVQodGhpcy5fJF8yLCAyICogbyksIHRoaXMuXyR2ciA9IHRoaXMuXyRVVCh0aGlzLl8kdnIsIDIgKiBvKSwgdGhpcy5fJFJyID0gdGhpcy5fJFVUKHRoaXMuXyRSciwgMiAqIG8pLCB0aGlzLl8kT3IgPSB0aGlzLl8kVVQodGhpcy5fJE9yLCAyICogbyk7CiAgICAgICAgICB2YXIgcyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgdy5fJGpUKHRoaXMuXyRKcywgMCwgcywgMCwgbyksIHRoaXMuXyRKcyA9IHM7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpcy5fJHBiW3RoaXMuXyRxb10gPSB0LCB0aGlzLl8kXzJbdGhpcy5fJHFvXSA9IGksIHRoaXMuXyR2clt0aGlzLl8kcW9dID0gaSwgdGhpcy5fJFJyW3RoaXMuXyRxb10gPSBlLCB0aGlzLl8kT3JbdGhpcy5fJHFvXSA9IHIsIHRoaXMuXyRKc1t0aGlzLl8kcW9dID0gWS5fJFpTLCB0aGlzLl8kcW8rKzsKICAgICAgfSwgWS5wcm90b3R5cGUuXyRabyA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdGhpcy5fJDNTW3RdID0gaTsKICAgICAgfSwgWS5wcm90b3R5cGUuc2V0UGFyYW1GbG9hdCA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgaSA8IHRoaXMuXyRSclt0XSAmJiAoaSA9IHRoaXMuXyRSclt0XSksIGkgPiB0aGlzLl8kT3JbdF0gJiYgKGkgPSB0aGlzLl8kT3JbdF0pLCB0aGlzLl8kXzJbdF0gPSBpOwogICAgICB9LCBZLnByb3RvdHlwZS5sb2FkUGFyYW0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHQgPSB0aGlzLl8kXzIubGVuZ3RoOwogICAgICAgIHQgPiB0aGlzLl8kZnMubGVuZ3RoICYmICh0ID0gdGhpcy5fJGZzLmxlbmd0aCksIHcuXyRqVCh0aGlzLl8kZnMsIDAsIHRoaXMuXyRfMiwgMCwgdCk7CiAgICAgIH0sIFkucHJvdG90eXBlLnNhdmVQYXJhbSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdCA9IHRoaXMuXyRfMi5sZW5ndGg7CiAgICAgICAgdCA+IHRoaXMuXyRmcy5sZW5ndGggJiYgKHRoaXMuXyRmcyA9IG5ldyBGbG9hdDMyQXJyYXkodCkpLCB3Ll8kalQodGhpcy5fJF8yLCAwLCB0aGlzLl8kZnMsIDAsIHQpOwogICAgICB9LCBZLnByb3RvdHlwZS5fJHYyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kY287CiAgICAgIH0sIFkucHJvdG90eXBlLl8kV1MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRRVDsKICAgICAgfSwgWS5wcm90b3R5cGUuXyRYYiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRKc1t0XSA9PSBZLl8kWlM7CiAgICAgIH0sIFkucHJvdG90eXBlLl8kdnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRFczsKICAgICAgfSwgWS5wcm90b3R5cGUuXyRUciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJFpQOwogICAgICB9LCBZLnByb3RvdHlwZS5nZXRCYXNlRGF0YSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyQzU1t0XTsKICAgICAgfSwgWS5wcm90b3R5cGUuZ2V0UGFyYW1GbG9hdCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRfMlt0XTsKICAgICAgfSwgWS5wcm90b3R5cGUuZ2V0UGFyYW1NYXggPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiB0aGlzLl8kT3JbdF07CiAgICAgIH0sIFkucHJvdG90eXBlLmdldFBhcmFtTWluID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJFJyW3RdOwogICAgICB9LCBZLnByb3RvdHlwZS5zZXRQYXJ0c09wYWNpdHkgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHRoaXMuXyRIclt0XS5zZXRQYXJ0c09wYWNpdHkoaSk7CiAgICAgIH0sIFkucHJvdG90eXBlLmdldFBhcnRzT3BhY2l0eSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRIclt0XS5nZXRQYXJ0c09wYWNpdHkoKTsKICAgICAgfSwgWS5wcm90b3R5cGUuZ2V0UGFydHNEYXRhSW5kZXggPSBmdW5jdGlvbiAodCkgewogICAgICAgIGZvciAodmFyIGkgPSB0aGlzLl8kRjIubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHsKICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuXyRGMltpXSAmJiB0aGlzLl8kRjJbaV0uXyRwMigpID09IHQpIHJldHVybiBpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9LCBZLnByb3RvdHlwZS5fJHEyID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJGRiW3RdOwogICAgICB9LCBZLnByb3RvdHlwZS5fJEMyID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJDhiW3RdOwogICAgICB9LCBZLnByb3RvdHlwZS5fJEJiID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJEhyW3RdOwogICAgICB9LCBZLnByb3RvdHlwZS5fJDVzID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICBmb3IgKHZhciBlID0gdGhpcy5fJFdzLmxlbmd0aCwgciA9IHQsIG8gPSAwOyBvIDwgZTsgKytvKSB7CiAgICAgICAgICB2YXIgbiA9IHRoaXMuXyRXc1tvXTsKICAgICAgICAgIGlmIChuICE9IFkuXyRWMikgZm9yICg7OykgewogICAgICAgICAgICB2YXIgcyA9IHRoaXMuXyQ4YltuXTsKICAgICAgICAgICAgcy5fJHlvKCkgJiYgKHMuXyRHVCgpLl8kQjIodGhpcywgcywgciksIHIgKz0gaSk7CiAgICAgICAgICAgIHZhciBfID0gdGhpcy5fJEVyW25dOwogICAgICAgICAgICBpZiAoXyA8PSBuIHx8IF8gPT0gWS5fJFcwKSBicmVhazsKICAgICAgICAgICAgbiA9IF87CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBZLnByb3RvdHlwZS5zZXREcmF3UGFyYW0gPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuZHBfd2ViZ2wgPSB0OwogICAgICB9LCBZLnByb3RvdHlwZS5nZXREcmF3UGFyYW0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZHBfd2ViZ2w7CiAgICAgIH0sIGsuXyQwVCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIGsuXyQwVChuZXcgXyQ1KHQpKTsKICAgICAgfSwgay5fJDBUID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAoIXQuZXhpc3RzKCkpIHRocm93IG5ldyBfJGxzKHQuXyQzYigpKTsKCiAgICAgICAgZm9yICh2YXIgaSwgZSA9IHQubGVuZ3RoKCksIHIgPSBuZXcgSW50OEFycmF5KGUpLCBvID0gbmV3IF8kWHMobmV3IF8ka2IodCksIDgxOTIpLCBuID0gMDsgKGkgPSBvLnJlYWQociwgbiwgZSAtIG4pKSA+IDA7KSB7CiAgICAgICAgICBuICs9IGk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcjsKICAgICAgfSwgay5fJEMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBpID0gbnVsbCwKICAgICAgICAgICAgZSA9IG51bGw7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBpID0gdCBpbnN0YW5jZW9mIEFycmF5ID8gdCA6IG5ldyBfJFhzKHQsIDgxOTIpLCBlID0gbmV3IF8kanMoKTsKCiAgICAgICAgICBmb3IgKHZhciByLCBvID0gbmV3IEludDhBcnJheSgxZTMpOyAociA9IGkucmVhZChvKSkgPiAwOykgewogICAgICAgICAgICBlLndyaXRlKG8sIDAsIHIpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBlLl8kVFMoKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgbnVsbCAhPSB0ICYmIHQuY2xvc2UoKSwgbnVsbCAhPSBlICYmIChlLmZsdXNoKCksIGUuY2xvc2UoKSk7CiAgICAgICAgfQogICAgICB9LCBWLnByb3RvdHlwZS5fJFQyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB3LmdldFVzZXJUaW1lTVNlYygpICsgTWF0aC5fJDEwKCkgKiAoMiAqIHRoaXMuXyRCciAtIDEpOwogICAgICB9LCBWLnByb3RvdHlwZS5fJHVvID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kQnIgPSB0OwogICAgICB9LCBWLnByb3RvdHlwZS5fJFFTID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICB0aGlzLl8kRHIgPSB0LCB0aGlzLl8kQ2IgPSBpLCB0aGlzLl8kbXIgPSBlOwogICAgICB9LCBWLnByb3RvdHlwZS5fJDdUID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSwKICAgICAgICAgICAgZSA9IHcuZ2V0VXNlclRpbWVNU2VjKCksCiAgICAgICAgICAgIHIgPSAwOwoKICAgICAgICBzd2l0Y2ggKHRoaXMuXyRfTCkgewogICAgICAgICAgY2FzZSBTVEFURV9DTE9TSU5HOgogICAgICAgICAgICByID0gKGUgLSB0aGlzLl8kYmIpIC8gdGhpcy5fJERyLCByID49IDEgJiYgKHIgPSAxLCB0aGlzLl8kX0wgPSB3dC5TVEFURV9DTE9TRUQsIHRoaXMuXyRiYiA9IGUpLCBpID0gMSAtIHI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgU1RBVEVfQ0xPU0VEOgogICAgICAgICAgICByID0gKGUgLSB0aGlzLl8kYmIpIC8gdGhpcy5fJENiLCByID49IDEgJiYgKHRoaXMuXyRfTCA9IHd0LlNUQVRFX09QRU5JTkcsIHRoaXMuXyRiYiA9IGUpLCBpID0gMDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSBTVEFURV9PUEVOSU5HOgogICAgICAgICAgICByID0gKGUgLSB0aGlzLl8kYmIpIC8gdGhpcy5fJG1yLCByID49IDEgJiYgKHIgPSAxLCB0aGlzLl8kX0wgPSB3dC5TVEFURV9JTlRFUlZBTCwgdGhpcy5fJDEyID0gdGhpcy5fJFQyKCkpLCBpID0gcjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSBTVEFURV9JTlRFUlZBTDoKICAgICAgICAgICAgdGhpcy5fJDEyIDwgZSAmJiAodGhpcy5fJF9MID0gd3QuU1RBVEVfQ0xPU0lORywgdGhpcy5fJGJiID0gZSksIGkgPSAxOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIFNUQVRFX0ZJUlNUOgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhpcy5fJF9MID0gd3QuU1RBVEVfSU5URVJWQUwsIHRoaXMuXyQxMiA9IHRoaXMuXyRUMigpLCBpID0gMTsKICAgICAgICB9CgogICAgICAgIHRoaXMuXyRqbyB8fCAoaSA9IC1pKSwgdC5zZXRQYXJhbUZsb2F0KHRoaXMuXyRpTCwgaSksIHQuc2V0UGFyYW1GbG9hdCh0aGlzLl8kMEwsIGkpOwogICAgICB9OwoKICAgICAgdmFyIHd0ID0gZnVuY3Rpb24gd3QoKSB7fTsKCiAgICAgIHd0LlNUQVRFX0ZJUlNUID0gIlNUQVRFX0ZJUlNUIiwgd3QuU1RBVEVfSU5URVJWQUwgPSAiU1RBVEVfSU5URVJWQUwiLCB3dC5TVEFURV9DTE9TSU5HID0gIlNUQVRFX0NMT1NJTkciLCB3dC5TVEFURV9DTE9TRUQgPSAiU1RBVEVfQ0xPU0VEIiwgd3QuU1RBVEVfT1BFTklORyA9ICJTVEFURV9PUEVOSU5HIiwgWC5wcm90b3R5cGUgPSBuZXcgRSgpLCBYLl8kQXMgPSAzMiwgWC5fJEdyID0gITEsIFguXyROVCA9IG51bGwsIFguXyR2UyA9IG51bGwsIFguXyRubyA9IG51bGwsIFguXyQ5ciA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkodCk7CiAgICAgIH0sIFguXyR2YiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIG5ldyBJbnQxNkFycmF5KHQpOwogICAgICB9LCBYLl8kY3IgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHJldHVybiBudWxsID09IHQgfHwgdC5fJHlMKCkgPCBpLmxlbmd0aCA/ICh0ID0gWC5fJDlyKDIgKiBpLmxlbmd0aCksIHQucHV0KGkpLCB0Ll8kb1QoMCkpIDogKHQuY2xlYXIoKSwgdC5wdXQoaSksIHQuXyRvVCgwKSksIHQ7CiAgICAgIH0sIFguXyRtYiA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgcmV0dXJuIG51bGwgPT0gdCB8fCB0Ll8keUwoKSA8IGkubGVuZ3RoID8gKHQgPSBYLl8kdmIoMiAqIGkubGVuZ3RoKSwgdC5wdXQoaSksIHQuXyRvVCgwKSkgOiAodC5jbGVhcigpLCB0LnB1dChpKSwgdC5fJG9UKDApKSwgdDsKICAgICAgfSwgWC5fJEhzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBYLl8kR3I7CiAgICAgIH0sIFguXyRhcyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgWC5fJEdyID0gdDsKICAgICAgfSwgWC5wcm90b3R5cGUuc2V0R0wgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuZ2wgPSB0OwogICAgICB9LCBYLnByb3RvdHlwZS5zZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMudHJhbnNmb3JtID0gdDsKICAgICAgfSwgWC5wcm90b3R5cGUuXyRaVCA9IGZ1bmN0aW9uICgpIHt9LCBYLnByb3RvdHlwZS5fJFVvID0gZnVuY3Rpb24gKHQsIGksIGUsIHIsIG8sIG4sIHMsIF8pIHsKICAgICAgICBpZiAoIShuIDwgLjAxKSkgewogICAgICAgICAgdmFyIGEgPSB0aGlzLl8kVTJbdF0sCiAgICAgICAgICAgICAgaCA9IG4gPiAuOSA/IGF0LkVYUEFORF9XIDogMDsKICAgICAgICAgIHRoaXMuZ2wuZHJhd0VsZW1lbnRzKGEsIGUsIHIsIG8sIG4sIGgsIHRoaXMudHJhbnNmb3JtLCBfKTsKICAgICAgICB9CiAgICAgIH0sIFgucHJvdG90eXBlLl8kUnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJfJFJzIik7CiAgICAgIH0sIFgucHJvdG90eXBlLl8kRHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiXyREcyIpOwogICAgICB9LCBYLnByb3RvdHlwZS5fJEsyID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy5fJHNiLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAwICE9IHRoaXMuXyRzYlt0XSAmJiAodGhpcy5nbC5fJFNyKDEsIHRoaXMuXyRzYiwgdCksIHRoaXMuXyRzYlt0XSA9IDApOwogICAgICAgIH0KICAgICAgfSwgWC5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdGhpcy5fJHNiLmxlbmd0aCA8IHQgKyAxICYmIHRoaXMuXyRuUyh0KSwgdGhpcy5fJHNiW3RdID0gaTsKICAgICAgfSwgWC5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdGhpcy5fJHNiLmxlbmd0aCA8IHQgKyAxICYmIHRoaXMuXyRuUyh0KSwgdGhpcy5fJFUyW3RdID0gaTsKICAgICAgfSwgWC5wcm90b3R5cGUuXyRuUyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGkgPSBNYXRoLm1heCgyICogdGhpcy5fJHNiLmxlbmd0aCwgdCArIDEgKyAxMCksCiAgICAgICAgICAgIGUgPSBuZXcgSW50MzJBcnJheShpKTsKICAgICAgICB3Ll8kalQodGhpcy5fJHNiLCAwLCBlLCAwLCB0aGlzLl8kc2IubGVuZ3RoKSwgdGhpcy5fJHNiID0gZTsKICAgICAgICB2YXIgciA9IG5ldyBBcnJheSgpOwogICAgICAgIHcuXyRqVCh0aGlzLl8kVTIsIDAsIHIsIDAsIHRoaXMuXyRVMi5sZW5ndGgpLCB0aGlzLl8kVTIgPSByOwogICAgICB9LCB6LnByb3RvdHlwZSA9IG5ldyBJKCksIHouXyRYbyA9IG5ldyBGbG9hdDMyQXJyYXkoMiksIHouXyRpbyA9IG5ldyBGbG9hdDMyQXJyYXkoMiksIHouXyQwbyA9IG5ldyBGbG9hdDMyQXJyYXkoMiksIHouXyRMbyA9IG5ldyBGbG9hdDMyQXJyYXkoMiksIHouXyRUbyA9IG5ldyBGbG9hdDMyQXJyYXkoMiksIHouXyRQbyA9IG5ldyBGbG9hdDMyQXJyYXkoMiksIHouXyRnVCA9IG5ldyBBcnJheSgpLCB6LnByb3RvdHlwZS5fJHpQID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuXyRHUyA9IG5ldyBEKCksIHRoaXMuXyRHUy5fJHpQKCksIHRoaXMuXyRZMCA9IG5ldyBBcnJheSgpOwogICAgICB9LCB6LnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBJLl8kYzI7CiAgICAgIH0sIHoucHJvdG90eXBlLl8kRjAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIEkucHJvdG90eXBlLl8kRjAuY2FsbCh0aGlzLCB0KSwgdGhpcy5fJEdTID0gdC5fJG5QKCksIHRoaXMuXyRZMCA9IHQuXyRuUCgpLCBJLnByb3RvdHlwZS5yZWFkVjJfb3BhY2l0eS5jYWxsKHRoaXMsIHQpOwogICAgICB9LCB6LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IG5ldyBIKHRoaXMpOwogICAgICAgIHJldHVybiBpLl8kWXIgPSBuZXcgUCgpLCB0aGlzLl8kMzIoKSAmJiAoaS5fJFdyID0gbmV3IFAoKSksIGk7CiAgICAgIH0sIHoucHJvdG90eXBlLl8kTnIgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHRoaXMgIT0gaS5fJEdUKCkgJiYgY29uc29sZS5sb2coIiMjIyBhc3NlcnQhISAjIyMgIik7CiAgICAgICAgdmFyIGUgPSBpOwoKICAgICAgICBpZiAodGhpcy5fJEdTLl8kVXIodCkpIHsKICAgICAgICAgIHZhciByID0gei5fJGdUOwogICAgICAgICAgclswXSA9ICExOwoKICAgICAgICAgIHZhciBvID0gdGhpcy5fJEdTLl8kUTIodCwgcik7CgogICAgICAgICAgaS5fJEliKHJbMF0pLCB0aGlzLmludGVycG9sYXRlT3BhY2l0eSh0LCB0aGlzLl8kR1MsIGksIHIpOwoKICAgICAgICAgIHZhciBuID0gdC5fJHZzKCksCiAgICAgICAgICAgICAgcyA9IHQuXyRUcigpOwoKICAgICAgICAgIGlmICh0aGlzLl8kR1MuXyR6cihuLCBzLCBvKSwgbyA8PSAwKSB7CiAgICAgICAgICAgIHZhciBfID0gdGhpcy5fJFkwW25bMF1dOwoKICAgICAgICAgICAgZS5fJFlyLmluaXQoXyk7CiAgICAgICAgICB9IGVsc2UgaWYgKDEgPT0gbykgewogICAgICAgICAgICB2YXIgXyA9IHRoaXMuXyRZMFtuWzBdXSwKICAgICAgICAgICAgICAgIGEgPSB0aGlzLl8kWTBbblsxXV0sCiAgICAgICAgICAgICAgICBoID0gc1swXTsKICAgICAgICAgICAgZS5fJFlyLl8kZkwgPSBfLl8kZkwgKyAoYS5fJGZMIC0gXy5fJGZMKSAqIGgsIGUuXyRZci5fJGdMID0gXy5fJGdMICsgKGEuXyRnTCAtIF8uXyRnTCkgKiBoLCBlLl8kWXIuXyRCMCA9IF8uXyRCMCArIChhLl8kQjAgLSBfLl8kQjApICogaCwgZS5fJFlyLl8kejAgPSBfLl8kejAgKyAoYS5fJHowIC0gXy5fJHowKSAqIGgsIGUuXyRZci5fJHFUID0gXy5fJHFUICsgKGEuXyRxVCAtIF8uXyRxVCkgKiBoOwogICAgICAgICAgfSBlbHNlIGlmICgyID09IG8pIHsKICAgICAgICAgICAgdmFyIF8gPSB0aGlzLl8kWTBbblswXV0sCiAgICAgICAgICAgICAgICBhID0gdGhpcy5fJFkwW25bMV1dLAogICAgICAgICAgICAgICAgbCA9IHRoaXMuXyRZMFtuWzJdXSwKICAgICAgICAgICAgICAgICQgPSB0aGlzLl8kWTBbblszXV0sCiAgICAgICAgICAgICAgICBoID0gc1swXSwKICAgICAgICAgICAgICAgIHUgPSBzWzFdLAogICAgICAgICAgICAgICAgcCA9IF8uXyRmTCArIChhLl8kZkwgLSBfLl8kZkwpICogaCwKICAgICAgICAgICAgICAgIGYgPSBsLl8kZkwgKyAoJC5fJGZMIC0gbC5fJGZMKSAqIGg7CiAgICAgICAgICAgIGUuXyRZci5fJGZMID0gcCArIChmIC0gcCkgKiB1LCBwID0gXy5fJGdMICsgKGEuXyRnTCAtIF8uXyRnTCkgKiBoLCBmID0gbC5fJGdMICsgKCQuXyRnTCAtIGwuXyRnTCkgKiBoLCBlLl8kWXIuXyRnTCA9IHAgKyAoZiAtIHApICogdSwgcCA9IF8uXyRCMCArIChhLl8kQjAgLSBfLl8kQjApICogaCwgZiA9IGwuXyRCMCArICgkLl8kQjAgLSBsLl8kQjApICogaCwgZS5fJFlyLl8kQjAgPSBwICsgKGYgLSBwKSAqIHUsIHAgPSBfLl8kejAgKyAoYS5fJHowIC0gXy5fJHowKSAqIGgsIGYgPSBsLl8kejAgKyAoJC5fJHowIC0gbC5fJHowKSAqIGgsIGUuXyRZci5fJHowID0gcCArIChmIC0gcCkgKiB1LCBwID0gXy5fJHFUICsgKGEuXyRxVCAtIF8uXyRxVCkgKiBoLCBmID0gbC5fJHFUICsgKCQuXyRxVCAtIGwuXyRxVCkgKiBoLCBlLl8kWXIuXyRxVCA9IHAgKyAoZiAtIHApICogdTsKICAgICAgICAgIH0gZWxzZSBpZiAoMyA9PSBvKSB7CiAgICAgICAgICAgIHZhciBjID0gdGhpcy5fJFkwW25bMF1dLAogICAgICAgICAgICAgICAgZCA9IHRoaXMuXyRZMFtuWzFdXSwKICAgICAgICAgICAgICAgIGcgPSB0aGlzLl8kWTBbblsyXV0sCiAgICAgICAgICAgICAgICB5ID0gdGhpcy5fJFkwW25bM11dLAogICAgICAgICAgICAgICAgbSA9IHRoaXMuXyRZMFtuWzRdXSwKICAgICAgICAgICAgICAgIFQgPSB0aGlzLl8kWTBbbls1XV0sCiAgICAgICAgICAgICAgICBQID0gdGhpcy5fJFkwW25bNl1dLAogICAgICAgICAgICAgICAgUyA9IHRoaXMuXyRZMFtuWzddXSwKICAgICAgICAgICAgICAgIGggPSBzWzBdLAogICAgICAgICAgICAgICAgdSA9IHNbMV0sCiAgICAgICAgICAgICAgICB2ID0gc1syXSwKICAgICAgICAgICAgICAgIHAgPSBjLl8kZkwgKyAoZC5fJGZMIC0gYy5fJGZMKSAqIGgsCiAgICAgICAgICAgICAgICBmID0gZy5fJGZMICsgKHkuXyRmTCAtIGcuXyRmTCkgKiBoLAogICAgICAgICAgICAgICAgTCA9IG0uXyRmTCArIChULl8kZkwgLSBtLl8kZkwpICogaCwKICAgICAgICAgICAgICAgIE0gPSBQLl8kZkwgKyAoUy5fJGZMIC0gUC5fJGZMKSAqIGg7CiAgICAgICAgICAgIGUuXyRZci5fJGZMID0gKDEgLSB2KSAqIChwICsgKGYgLSBwKSAqIHUpICsgdiAqIChMICsgKE0gLSBMKSAqIHUpLCBwID0gYy5fJGdMICsgKGQuXyRnTCAtIGMuXyRnTCkgKiBoLCBmID0gZy5fJGdMICsgKHkuXyRnTCAtIGcuXyRnTCkgKiBoLCBMID0gbS5fJGdMICsgKFQuXyRnTCAtIG0uXyRnTCkgKiBoLCBNID0gUC5fJGdMICsgKFMuXyRnTCAtIFAuXyRnTCkgKiBoLCBlLl8kWXIuXyRnTCA9ICgxIC0gdikgKiAocCArIChmIC0gcCkgKiB1KSArIHYgKiAoTCArIChNIC0gTCkgKiB1KSwgcCA9IGMuXyRCMCArIChkLl8kQjAgLSBjLl8kQjApICogaCwgZiA9IGcuXyRCMCArICh5Ll8kQjAgLSBnLl8kQjApICogaCwgTCA9IG0uXyRCMCArIChULl8kQjAgLSBtLl8kQjApICogaCwgTSA9IFAuXyRCMCArIChTLl8kQjAgLSBQLl8kQjApICogaCwgZS5fJFlyLl8kQjAgPSAoMSAtIHYpICogKHAgKyAoZiAtIHApICogdSkgKyB2ICogKEwgKyAoTSAtIEwpICogdSksIHAgPSBjLl8kejAgKyAoZC5fJHowIC0gYy5fJHowKSAqIGgsIGYgPSBnLl8kejAgKyAoeS5fJHowIC0gZy5fJHowKSAqIGgsIEwgPSBtLl8kejAgKyAoVC5fJHowIC0gbS5fJHowKSAqIGgsIE0gPSBQLl8kejAgKyAoUy5fJHowIC0gUC5fJHowKSAqIGgsIGUuXyRZci5fJHowID0gKDEgLSB2KSAqIChwICsgKGYgLSBwKSAqIHUpICsgdiAqIChMICsgKE0gLSBMKSAqIHUpLCBwID0gYy5fJHFUICsgKGQuXyRxVCAtIGMuXyRxVCkgKiBoLCBmID0gZy5fJHFUICsgKHkuXyRxVCAtIGcuXyRxVCkgKiBoLCBMID0gbS5fJHFUICsgKFQuXyRxVCAtIG0uXyRxVCkgKiBoLCBNID0gUC5fJHFUICsgKFMuXyRxVCAtIFAuXyRxVCkgKiBoLCBlLl8kWXIuXyRxVCA9ICgxIC0gdikgKiAocCArIChmIC0gcCkgKiB1KSArIHYgKiAoTCArIChNIC0gTCkgKiB1KTsKICAgICAgICAgIH0gZWxzZSBpZiAoNCA9PSBvKSB7CiAgICAgICAgICAgIHZhciBFID0gdGhpcy5fJFkwW25bMF1dLAogICAgICAgICAgICAgICAgQSA9IHRoaXMuXyRZMFtuWzFdXSwKICAgICAgICAgICAgICAgIEkgPSB0aGlzLl8kWTBbblsyXV0sCiAgICAgICAgICAgICAgICB3ID0gdGhpcy5fJFkwW25bM11dLAogICAgICAgICAgICAgICAgeCA9IHRoaXMuXyRZMFtuWzRdXSwKICAgICAgICAgICAgICAgIE8gPSB0aGlzLl8kWTBbbls1XV0sCiAgICAgICAgICAgICAgICBEID0gdGhpcy5fJFkwW25bNl1dLAogICAgICAgICAgICAgICAgUiA9IHRoaXMuXyRZMFtuWzddXSwKICAgICAgICAgICAgICAgIGIgPSB0aGlzLl8kWTBbbls4XV0sCiAgICAgICAgICAgICAgICBGID0gdGhpcy5fJFkwW25bOV1dLAogICAgICAgICAgICAgICAgQyA9IHRoaXMuXyRZMFtuWzEwXV0sCiAgICAgICAgICAgICAgICBOID0gdGhpcy5fJFkwW25bMTFdXSwKICAgICAgICAgICAgICAgIEIgPSB0aGlzLl8kWTBbblsxMl1dLAogICAgICAgICAgICAgICAgVSA9IHRoaXMuXyRZMFtuWzEzXV0sCiAgICAgICAgICAgICAgICBHID0gdGhpcy5fJFkwW25bMTRdXSwKICAgICAgICAgICAgICAgIFkgPSB0aGlzLl8kWTBbblsxNV1dLAogICAgICAgICAgICAgICAgaCA9IHNbMF0sCiAgICAgICAgICAgICAgICB1ID0gc1sxXSwKICAgICAgICAgICAgICAgIHYgPSBzWzJdLAogICAgICAgICAgICAgICAgayA9IHNbM10sCiAgICAgICAgICAgICAgICBwID0gRS5fJGZMICsgKEEuXyRmTCAtIEUuXyRmTCkgKiBoLAogICAgICAgICAgICAgICAgZiA9IEkuXyRmTCArICh3Ll8kZkwgLSBJLl8kZkwpICogaCwKICAgICAgICAgICAgICAgIEwgPSB4Ll8kZkwgKyAoTy5fJGZMIC0geC5fJGZMKSAqIGgsCiAgICAgICAgICAgICAgICBNID0gRC5fJGZMICsgKFIuXyRmTCAtIEQuXyRmTCkgKiBoLAogICAgICAgICAgICAgICAgViA9IGIuXyRmTCArIChGLl8kZkwgLSBiLl8kZkwpICogaCwKICAgICAgICAgICAgICAgIFggPSBDLl8kZkwgKyAoTi5fJGZMIC0gQy5fJGZMKSAqIGgsCiAgICAgICAgICAgICAgICBIID0gQi5fJGZMICsgKFUuXyRmTCAtIEIuXyRmTCkgKiBoLAogICAgICAgICAgICAgICAgVyA9IEcuXyRmTCArIChZLl8kZkwgLSBHLl8kZkwpICogaDsKICAgICAgICAgICAgZS5fJFlyLl8kZkwgPSAoMSAtIGspICogKCgxIC0gdikgKiAocCArIChmIC0gcCkgKiB1KSArIHYgKiAoTCArIChNIC0gTCkgKiB1KSkgKyBrICogKCgxIC0gdikgKiAoViArIChYIC0gVikgKiB1KSArIHYgKiAoSCArIChXIC0gSCkgKiB1KSksIHAgPSBFLl8kZ0wgKyAoQS5fJGdMIC0gRS5fJGdMKSAqIGgsIGYgPSBJLl8kZ0wgKyAody5fJGdMIC0gSS5fJGdMKSAqIGgsIEwgPSB4Ll8kZ0wgKyAoTy5fJGdMIC0geC5fJGdMKSAqIGgsIE0gPSBELl8kZ0wgKyAoUi5fJGdMIC0gRC5fJGdMKSAqIGgsIFYgPSBiLl8kZ0wgKyAoRi5fJGdMIC0gYi5fJGdMKSAqIGgsIFggPSBDLl8kZ0wgKyAoTi5fJGdMIC0gQy5fJGdMKSAqIGgsIEggPSBCLl8kZ0wgKyAoVS5fJGdMIC0gQi5fJGdMKSAqIGgsIFcgPSBHLl8kZ0wgKyAoWS5fJGdMIC0gRy5fJGdMKSAqIGgsIGUuXyRZci5fJGdMID0gKDEgLSBrKSAqICgoMSAtIHYpICogKHAgKyAoZiAtIHApICogdSkgKyB2ICogKEwgKyAoTSAtIEwpICogdSkpICsgayAqICgoMSAtIHYpICogKFYgKyAoWCAtIFYpICogdSkgKyB2ICogKEggKyAoVyAtIEgpICogdSkpLCBwID0gRS5fJEIwICsgKEEuXyRCMCAtIEUuXyRCMCkgKiBoLCBmID0gSS5fJEIwICsgKHcuXyRCMCAtIEkuXyRCMCkgKiBoLCBMID0geC5fJEIwICsgKE8uXyRCMCAtIHguXyRCMCkgKiBoLCBNID0gRC5fJEIwICsgKFIuXyRCMCAtIEQuXyRCMCkgKiBoLCBWID0gYi5fJEIwICsgKEYuXyRCMCAtIGIuXyRCMCkgKiBoLCBYID0gQy5fJEIwICsgKE4uXyRCMCAtIEMuXyRCMCkgKiBoLCBIID0gQi5fJEIwICsgKFUuXyRCMCAtIEIuXyRCMCkgKiBoLCBXID0gRy5fJEIwICsgKFkuXyRCMCAtIEcuXyRCMCkgKiBoLCBlLl8kWXIuXyRCMCA9ICgxIC0gaykgKiAoKDEgLSB2KSAqIChwICsgKGYgLSBwKSAqIHUpICsgdiAqIChMICsgKE0gLSBMKSAqIHUpKSArIGsgKiAoKDEgLSB2KSAqIChWICsgKFggLSBWKSAqIHUpICsgdiAqIChIICsgKFcgLSBIKSAqIHUpKSwgcCA9IEUuXyR6MCArIChBLl8kejAgLSBFLl8kejApICogaCwgZiA9IEkuXyR6MCArICh3Ll8kejAgLSBJLl8kejApICogaCwgTCA9IHguXyR6MCArIChPLl8kejAgLSB4Ll8kejApICogaCwgTSA9IEQuXyR6MCArIChSLl8kejAgLSBELl8kejApICogaCwgViA9IGIuXyR6MCArIChGLl8kejAgLSBiLl8kejApICogaCwgWCA9IEMuXyR6MCArIChOLl8kejAgLSBDLl8kejApICogaCwgSCA9IEIuXyR6MCArIChVLl8kejAgLSBCLl8kejApICogaCwgVyA9IEcuXyR6MCArIChZLl8kejAgLSBHLl8kejApICogaCwgZS5fJFlyLl8kejAgPSAoMSAtIGspICogKCgxIC0gdikgKiAocCArIChmIC0gcCkgKiB1KSArIHYgKiAoTCArIChNIC0gTCkgKiB1KSkgKyBrICogKCgxIC0gdikgKiAoViArIChYIC0gVikgKiB1KSArIHYgKiAoSCArIChXIC0gSCkgKiB1KSksIHAgPSBFLl8kcVQgKyAoQS5fJHFUIC0gRS5fJHFUKSAqIGgsIGYgPSBJLl8kcVQgKyAody5fJHFUIC0gSS5fJHFUKSAqIGgsIEwgPSB4Ll8kcVQgKyAoTy5fJHFUIC0geC5fJHFUKSAqIGgsIE0gPSBELl8kcVQgKyAoUi5fJHFUIC0gRC5fJHFUKSAqIGgsIFYgPSBiLl8kcVQgKyAoRi5fJHFUIC0gYi5fJHFUKSAqIGgsIFggPSBDLl8kcVQgKyAoTi5fJHFUIC0gQy5fJHFUKSAqIGgsIEggPSBCLl8kcVQgKyAoVS5fJHFUIC0gQi5fJHFUKSAqIGgsIFcgPSBHLl8kcVQgKyAoWS5fJHFUIC0gRy5fJHFUKSAqIGgsIGUuXyRZci5fJHFUID0gKDEgLSBrKSAqICgoMSAtIHYpICogKHAgKyAoZiAtIHApICogdSkgKyB2ICogKEwgKyAoTSAtIEwpICogdSkpICsgayAqICgoMSAtIHYpICogKFYgKyAoWCAtIFYpICogdSkgKyB2ICogKEggKyAoVyAtIEgpICogdSkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAgfCBNYXRoLnBvdygyLCBvKSwgcSA9IG5ldyBGbG9hdDMyQXJyYXkoaiksIEogPSAwOyBKIDwgajsgSisrKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgUSA9IEosIFogPSAxLCBLID0gMDsgSyA8IG87IEsrKykgewogICAgICAgICAgICAgICAgWiAqPSBRICUgMiA9PSAwID8gMSAtIHNbS10gOiBzW0tdLCBRIC89IDI7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBxW0pdID0gWjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yICh2YXIgdHQgPSBuZXcgQXJyYXkoKSwgaXQgPSAwOyBpdCA8IGo7IGl0KyspIHsKICAgICAgICAgICAgICB0dFtpdF0gPSB0aGlzLl8kWTBbbltpdF1dOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKHZhciBldCA9IDAsIHJ0ID0gMCwgb3QgPSAwLCBudCA9IDAsIHN0ID0gMCwgaXQgPSAwOyBpdCA8IGo7IGl0KyspIHsKICAgICAgICAgICAgICBldCArPSBxW2l0XSAqIHR0W2l0XS5fJGZMLCBydCArPSBxW2l0XSAqIHR0W2l0XS5fJGdMLCBvdCArPSBxW2l0XSAqIHR0W2l0XS5fJEIwLCBudCArPSBxW2l0XSAqIHR0W2l0XS5fJHowLCBzdCArPSBxW2l0XSAqIHR0W2l0XS5fJHFUOwogICAgICAgICAgICB9CgogICAgICAgICAgICBlLl8kWXIuXyRmTCA9IGV0LCBlLl8kWXIuXyRnTCA9IHJ0LCBlLl8kWXIuXyRCMCA9IG90LCBlLl8kWXIuXyR6MCA9IG50LCBlLl8kWXIuXyRxVCA9IHN0OwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBfID0gdGhpcy5fJFkwW25bMF1dOwogICAgICAgICAgZS5fJFlyLnJlZmxlY3RYID0gXy5yZWZsZWN0WCwgZS5fJFlyLnJlZmxlY3RZID0gXy5yZWZsZWN0WTsKICAgICAgICB9CiAgICAgIH0sIHoucHJvdG90eXBlLl8kMmIgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHRoaXMgIT0gaS5fJEdUKCkgJiYgY29uc29sZS5sb2coIiMjIyBhc3NlcnQhISAjIyMgIik7CiAgICAgICAgdmFyIGUgPSBpOwoKICAgICAgICBpZiAoZS5fJGhTKCEwKSwgdGhpcy5fJDMyKCkpIHsKICAgICAgICAgIHZhciByID0gdGhpcy5nZXRUYXJnZXRCYXNlRGF0YUlEKCk7CiAgICAgICAgICBpZiAoZS5fJDhyID09IEkuXyR1ciAmJiAoZS5fJDhyID0gdC5nZXRCYXNlRGF0YUluZGV4KHIpKSwgZS5fJDhyIDwgMCkgYXQuXyRzbyAmJiBfLl8kbGkoIl8kTCBfJDBQIF8kRyA6OiAlcyIsIHIpLCBlLl8kaFMoITEpO2Vsc2UgewogICAgICAgICAgICB2YXIgbyA9IHQuZ2V0QmFzZURhdGEoZS5fJDhyKTsKCiAgICAgICAgICAgIGlmIChudWxsICE9IG8pIHsKICAgICAgICAgICAgICB2YXIgbiA9IHQuXyRxMihlLl8kOHIpLAogICAgICAgICAgICAgICAgICBzID0gei5fJFhvOwoKICAgICAgICAgICAgICBzWzBdID0gZS5fJFlyLl8kZkwsIHNbMV0gPSBlLl8kWXIuXyRnTDsKICAgICAgICAgICAgICB2YXIgYSA9IHouXyRpbzsKICAgICAgICAgICAgICBhWzBdID0gMCwgYVsxXSA9IC0uMTsKICAgICAgICAgICAgICBuLl8kR1QoKS5nZXRUeXBlKCkgPT0gSS5fJGMyID8gYVsxXSA9IC0xMCA6IGFbMV0gPSAtLjE7CiAgICAgICAgICAgICAgdmFyIGggPSB6Ll8kMG87CgogICAgICAgICAgICAgIHRoaXMuXyRKcih0LCBvLCBuLCBzLCBhLCBoKTsKCiAgICAgICAgICAgICAgdmFyIGwgPSBMdC5fJDkyKGEsIGgpOwoKICAgICAgICAgICAgICBvLl8kbmIodCwgbiwgcywgcywgMSwgMCwgMiksIGUuXyRXci5fJGZMID0gc1swXSwgZS5fJFdyLl8kZ0wgPSBzWzFdLCBlLl8kV3IuXyRCMCA9IGUuXyRZci5fJEIwLCBlLl8kV3IuXyR6MCA9IGUuXyRZci5fJHowLCBlLl8kV3IuXyRxVCA9IGUuXyRZci5fJHFUIC0gbCAqIEx0Ll8kTlM7CiAgICAgICAgICAgICAgdmFyICQgPSBuLmdldFRvdGFsU2NhbGUoKTsKICAgICAgICAgICAgICBlLnNldFRvdGFsU2NhbGVfbm90Rm9yQ2xpZW50KCQgKiBlLl8kV3IuXyRCMCk7CiAgICAgICAgICAgICAgdmFyIHUgPSBuLmdldFRvdGFsT3BhY2l0eSgpOwogICAgICAgICAgICAgIGUuc2V0VG90YWxPcGFjaXR5KHUgKiBlLmdldEludGVycG9sYXRlZE9wYWNpdHkoKSksIGUuXyRXci5yZWZsZWN0WCA9IGUuXyRZci5yZWZsZWN0WCwgZS5fJFdyLnJlZmxlY3RZID0gZS5fJFlyLnJlZmxlY3RZLCBlLl8kaFMobi5fJHlvKCkpOwogICAgICAgICAgICB9IGVsc2UgZS5fJGhTKCExKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgZS5zZXRUb3RhbFNjYWxlX25vdEZvckNsaWVudChlLl8kWXIuXyRCMCksIGUuc2V0VG90YWxPcGFjaXR5KGUuZ2V0SW50ZXJwb2xhdGVkT3BhY2l0eSgpKTsKICAgICAgfSwgei5wcm90b3R5cGUuXyRuYiA9IGZ1bmN0aW9uICh0LCBpLCBlLCByLCBvLCBuLCBzKSB7CiAgICAgICAgdGhpcyAhPSBpLl8kR1QoKSAmJiBjb25zb2xlLmxvZygiIyMjIGFzc2VydCEhICMjIyAiKTsKCiAgICAgICAgZm9yICh2YXIgXywgYSwgaCA9IGksIGwgPSBudWxsICE9IGguXyRXciA/IGguXyRXciA6IGguXyRZciwgJCA9IE1hdGguc2luKEx0Ll8kYlMgKiBsLl8kcVQpLCB1ID0gTWF0aC5jb3MoTHQuXyRiUyAqIGwuXyRxVCksIHAgPSBoLmdldFRvdGFsU2NhbGUoKSwgZiA9IGwucmVmbGVjdFggPyAtMSA6IDEsIGMgPSBsLnJlZmxlY3RZID8gLTEgOiAxLCBkID0gdSAqIHAgKiBmLCBnID0gLSQgKiBwICogYywgeSA9ICQgKiBwICogZiwgbSA9IHUgKiBwICogYywgVCA9IGwuXyRmTCwgUCA9IGwuXyRnTCwgUyA9IG8gKiBzLCB2ID0gbjsgdiA8IFM7IHYgKz0gcykgewogICAgICAgICAgXyA9IGVbdl0sIGEgPSBlW3YgKyAxXSwgclt2XSA9IGQgKiBfICsgZyAqIGEgKyBULCByW3YgKyAxXSA9IHkgKiBfICsgbSAqIGEgKyBQOwogICAgICAgIH0KICAgICAgfSwgei5wcm90b3R5cGUuXyRKciA9IGZ1bmN0aW9uICh0LCBpLCBlLCByLCBvLCBuKSB7CiAgICAgICAgaSAhPSBlLl8kR1QoKSAmJiBjb25zb2xlLmxvZygiIyMjIGFzc2VydCEhICMjIyAiKTsKICAgICAgICB2YXIgcyA9IHouXyRMbzsKICAgICAgICB6Ll8kTG9bMF0gPSByWzBdLCB6Ll8kTG9bMV0gPSByWzFdLCBpLl8kbmIodCwgZSwgcywgcywgMSwgMCwgMik7CgogICAgICAgIGZvciAodmFyIF8gPSB6Ll8kVG8sIGEgPSB6Ll8kUG8sIGggPSAxLCBsID0gMDsgbCA8IDEwOyBsKyspIHsKICAgICAgICAgIGlmIChhWzBdID0gclswXSArIGggKiBvWzBdLCBhWzFdID0gclsxXSArIGggKiBvWzFdLCBpLl8kbmIodCwgZSwgYSwgXywgMSwgMCwgMiksIF9bMF0gLT0gc1swXSwgX1sxXSAtPSBzWzFdLCAwICE9IF9bMF0gfHwgMCAhPSBfWzFdKSByZXR1cm4gblswXSA9IF9bMF0sIHZvaWQgKG5bMV0gPSBfWzFdKTsKICAgICAgICAgIGlmIChhWzBdID0gclswXSAtIGggKiBvWzBdLCBhWzFdID0gclsxXSAtIGggKiBvWzFdLCBpLl8kbmIodCwgZSwgYSwgXywgMSwgMCwgMiksIF9bMF0gLT0gc1swXSwgX1sxXSAtPSBzWzFdLCAwICE9IF9bMF0gfHwgMCAhPSBfWzFdKSByZXR1cm4gX1swXSA9IC1fWzBdLCBfWzBdID0gLV9bMF0sIG5bMF0gPSBfWzBdLCB2b2lkIChuWzFdID0gX1sxXSk7CiAgICAgICAgICBoICo9IC4xOwogICAgICAgIH0KCiAgICAgICAgYXQuXyRzbyAmJiBjb25zb2xlLmxvZygiXyRMMCB0byB0cmFuc2Zvcm0gXyRTUFxuIik7CiAgICAgIH0sIEgucHJvdG90eXBlID0gbmV3IF90KCksIFcucHJvdG90eXBlID0gbmV3IE0oKSwgVy5fJHVyID0gLTIsIFcuXyRFUyA9IDUwMCwgVy5fJHdiID0gMiwgVy5fJDhTID0gMywgVy5fJG9zID0gNCwgVy5fJDUyID0gVy5fJEVTLCBXLl8kUjIgPSBXLl8kRVMsIFcuXyRTYiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgZm9yICh2YXIgaSA9IHQubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHsKICAgICAgICAgIHZhciBlID0gdFtpXTsKICAgICAgICAgIGUgPCBXLl8kNTIgPyBXLl8kNTIgPSBlIDogZSA+IFcuXyRSMiAmJiAoVy5fJFIyID0gZSk7CiAgICAgICAgfQogICAgICB9LCBXLl8kb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFcuXyQ1MjsKICAgICAgfSwgVy5fJFByID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBXLl8kUjI7CiAgICAgIH0sIFcucHJvdG90eXBlLl8kRjAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRnUCA9IHQuXyRuUCgpLCB0aGlzLl8kZHIgPSB0Ll8kblAoKSwgdGhpcy5fJEdTID0gdC5fJG5QKCksIHRoaXMuXyRxYiA9IHQuXyQ2TCgpLCB0aGlzLl8kTGIgPSB0Ll8kY1MoKSwgdGhpcy5fJG1TID0gdC5fJFRiKCksIHQuZ2V0Rm9ybWF0VmVyc2lvbigpID49IEcuXyRUNyA/ICh0aGlzLmNsaXBJRCA9IHQuXyRuUCgpLCB0aGlzLmNsaXBJRExpc3QgPSB0aGlzLmNvbnZlcnRDbGlwSURGb3JWMl8xMSh0aGlzLmNsaXBJRCkpIDogdGhpcy5jbGlwSURMaXN0ID0gbnVsbCwgVy5fJFNiKHRoaXMuXyRMYik7CiAgICAgIH0sIFcucHJvdG90eXBlLmdldENsaXBJRExpc3QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY2xpcElETGlzdDsKICAgICAgfSwgVy5wcm90b3R5cGUuXyROciA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgaWYgKGkuXyRJU1swXSA9ICExLCBpLl8kVXMgPSB2Ll8kWjIodCwgdGhpcy5fJEdTLCBpLl8kSVMsIHRoaXMuXyRMYiksIGF0Ll8kWnMpIDtlbHNlIGlmIChpLl8kSVNbMF0pIHJldHVybjsKICAgICAgICBpLl8kN3MgPSB2Ll8kYnIodCwgdGhpcy5fJEdTLCBpLl8kSVMsIHRoaXMuXyRtUyk7CiAgICAgIH0sIFcucHJvdG90eXBlLl8kMmIgPSBmdW5jdGlvbiAodCkge30sIFcucHJvdG90eXBlLmdldERyYXdEYXRhSUQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRnUDsKICAgICAgfSwgVy5wcm90b3R5cGUuXyRqMiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJGdQID0gdDsKICAgICAgfSwgVy5wcm90b3R5cGUuZ2V0T3BhY2l0eSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgcmV0dXJuIGkuXyQ3czsKICAgICAgfSwgVy5wcm90b3R5cGUuXyR6UyA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgcmV0dXJuIGkuXyRVczsKICAgICAgfSwgVy5wcm90b3R5cGUuZ2V0VGFyZ2V0QmFzZURhdGFJRCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJGRyOwogICAgICB9LCBXLnByb3RvdHlwZS5fJGdzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kZHIgPSB0OwogICAgICB9LCBXLnByb3RvdHlwZS5fJDMyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuXyRkciAmJiB0aGlzLl8kZHIgIT0geXQuXyQybygpOwogICAgICB9LCBXLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge30sIGouXyQ0MiA9IDAsIGoucHJvdG90eXBlLl8kMWIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyQzUzsKICAgICAgfSwgai5wcm90b3R5cGUuZ2V0RHJhd0RhdGFMaXN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kYVM7CiAgICAgIH0sIGoucHJvdG90eXBlLl8kRjAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyROTCA9IHQuXyRuUCgpLCB0aGlzLl8kYVMgPSB0Ll8kblAoKSwgdGhpcy5fJDNTID0gdC5fJG5QKCk7CiAgICAgIH0sIGoucHJvdG90eXBlLl8ka3IgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHQuXyRabyh0aGlzLl8kM1MpLCB0Ll8keG8odGhpcy5fJGFTKSwgdGhpcy5fJDNTID0gbnVsbCwgdGhpcy5fJGFTID0gbnVsbDsKICAgICAgfSwgcS5wcm90b3R5cGUgPSBuZXcgaSgpLCBxLmxvYWRNb2RlbCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGUgPSBuZXcgcSgpOwogICAgICAgIHJldHVybiBpLl8kNjIoZSwgdCksIGU7CiAgICAgIH0sIHEubG9hZE1vZGVsID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgZSA9IG5ldyBxKCk7CiAgICAgICAgcmV0dXJuIGkuXyQ2MihlLCB0KSwgZTsKICAgICAgfSwgcS5fJHRvID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBuZXcgcSgpOwogICAgICB9LCBxLl8kZXIgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBpID0gbmV3IF8kNSgiLi4vXyRfci9fJHQwL18kUmkvXyRfUC5fJGQiKTsKICAgICAgICBpZiAoMCA9PSBpLmV4aXN0cygpKSB0aHJvdyBuZXcgXyRscygiXyR0MCBfJF8gXyQ2IF8kVWkgOjogIiArIGkuXyRQTCgpKTsKCiAgICAgICAgZm9yICh2YXIgZSA9IFsiLi4vXyRfci9fJHQwL18kUmkvXyRfUC41MTIvXyRDUC5fJDEiLCAiLi4vXyRfci9fJHQwL18kUmkvXyRfUC41MTIvXyR2UC5fJDEiLCAiLi4vXyRfci9fJHQwL18kUmkvXyRfUC41MTIvXyRFUC5fJDEiLCAiLi4vXyRfci9fJHQwL18kUmkvXyRfUC41MTIvXyRwUC5fJDEiXSwgciA9IHEubG9hZE1vZGVsKGkuXyQzYigpKSwgbyA9IDA7IG8gPCBlLmxlbmd0aDsgbysrKSB7CiAgICAgICAgICB2YXIgbiA9IG5ldyBfJDUoZVtvXSk7CiAgICAgICAgICBpZiAoMCA9PSBuLmV4aXN0cygpKSB0aHJvdyBuZXcgXyRscygiXyR0MCBfJF8gXyQ2IF8kVWkgOjogIiArIG4uXyRQTCgpKTsKICAgICAgICAgIHIuc2V0VGV4dHVyZShvLCBfJG5MLl8kX28odCwgbi5fJDNiKCkpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByOwogICAgICB9LCBxLnByb3RvdHlwZS5zZXRHTCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJHpvLnNldEdMKHQpOwogICAgICB9LCBxLnByb3RvdHlwZS5zZXRUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyR6by5zZXRUcmFuc2Zvcm0odCk7CiAgICAgIH0sIHEucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fJDVTLmRyYXcodGhpcy5fJHpvKTsKICAgICAgfSwgcS5wcm90b3R5cGUuXyRLMiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLl8kem8uXyRLMigpOwogICAgICB9LCBxLnByb3RvdHlwZS5zZXRUZXh0dXJlID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICBudWxsID09IHRoaXMuXyR6byAmJiBfLl8kbGkoIl8kWWkgZm9yIFFUIF8ka2kgLyBfJFhTKCkgaXMgXyQ2IF8kdWkhISIpLCB0aGlzLl8kem8uc2V0VGV4dHVyZSh0LCBpKTsKICAgICAgfSwgcS5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgbnVsbCA9PSB0aGlzLl8kem8gJiYgXy5fJGxpKCJfJFlpIGZvciBRVCBfJGtpIC8gXyRYUygpIGlzIF8kNiBfJHVpISEiKSwgdGhpcy5fJHpvLnNldFRleHR1cmUodCwgaSk7CiAgICAgIH0sIHEucHJvdG90eXBlLl8kUnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyR6by5fJFJzKCk7CiAgICAgIH0sIHEucHJvdG90eXBlLl8kRHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyR6by5fJERzKHQpOwogICAgICB9LCBxLnByb3RvdHlwZS5nZXREcmF3UGFyYW0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyR6bzsKICAgICAgfSwgSi5wcm90b3R5cGUgPSBuZXcgcygpLCBKLl8kY3MgPSAiVklTSUJMRToiLCBKLl8kYXIgPSAiTEFZT1VUOiIsIEouTVROX1BSRUZJWF9GQURFSU4gPSAiRkFERUlOOiIsIEouTVROX1BSRUZJWF9GQURFT1VUID0gIkZBREVPVVQ6IiwgSi5fJENvID0gMCwgSi5fJDFUID0gMSwgSi5sb2FkTW90aW9uID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IGsuXyRDKHQpOwoKICAgICAgICByZXR1cm4gSi5sb2FkTW90aW9uKGkpOwogICAgICB9LCBKLmxvYWRNb3Rpb24gPSBmdW5jdGlvbiAodCkgewogICAgICAgIHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciAmJiAodCA9IG5ldyBEYXRhVmlldyh0KSk7CiAgICAgICAgdmFyIGkgPSBuZXcgSigpLAogICAgICAgICAgICBlID0gWzBdLAogICAgICAgICAgICByID0gdC5ieXRlTGVuZ3RoOwogICAgICAgIGkuXyR5VCA9IDA7CgogICAgICAgIGZvciAodmFyIG8gPSAwOyBvIDwgcjsgKytvKSB7CiAgICAgICAgICB2YXIgbiA9IFEodCwgbyksCiAgICAgICAgICAgICAgcyA9IG4uY2hhckNvZGVBdCgwKTsKICAgICAgICAgIGlmICgiXG4iICE9IG4gJiYgIlxyIiAhPSBuKSBpZiAoIiMiICE9IG4pIHsKICAgICAgICAgICAgaWYgKCIkIiAhPSBuKSB7CiAgICAgICAgICAgICAgaWYgKDk3IDw9IHMgJiYgcyA8PSAxMjIgfHwgNjUgPD0gcyAmJiBzIDw9IDkwIHx8ICJfIiA9PSBuKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBfID0gbywgYSA9IC0xOyBvIDwgciAmJiAiXHIiICE9IChuID0gUSh0LCBvKSkgJiYgIlxuIiAhPSBuOyArK28pIHsKICAgICAgICAgICAgICAgICAgaWYgKCI9IiA9PSBuKSB7CiAgICAgICAgICAgICAgICAgICAgYSA9IG87CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoYSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgIHZhciBoID0gbmV3IEIoKTsKICAgICAgICAgICAgICAgICAgTy5zdGFydHNXaXRoKHQsIF8sIEouXyRjcykgPyAoaC5fJFJQID0gQi5fJGhzLCBoLl8kNFAgPSBPLmNyZWF0ZVN0cmluZyh0LCBfLCBhIC0gXykpIDogTy5zdGFydHNXaXRoKHQsIF8sIEouXyRhcikgPyAoaC5fJDRQID0gTy5jcmVhdGVTdHJpbmcodCwgXyArIDcsIGEgLSBfIC0gNyksIE8uc3RhcnRzV2l0aCh0LCBfICsgNywgIkFOQ0hPUl9YIikgPyBoLl8kUlAgPSBCLl8keHMgOiBPLnN0YXJ0c1dpdGgodCwgXyArIDcsICJBTkNIT1JfWSIpID8gaC5fJFJQID0gQi5fJHVzIDogTy5zdGFydHNXaXRoKHQsIF8gKyA3LCAiU0NBTEVfWCIpID8gaC5fJFJQID0gQi5fJHFzIDogTy5zdGFydHNXaXRoKHQsIF8gKyA3LCAiU0NBTEVfWSIpID8gaC5fJFJQID0gQi5fJFlzIDogTy5zdGFydHNXaXRoKHQsIF8gKyA3LCAiWCIpID8gaC5fJFJQID0gQi5fJHdzIDogTy5zdGFydHNXaXRoKHQsIF8gKyA3LCAiWSIpICYmIChoLl8kUlAgPSBCLl8kTnMpKSA6IChoLl8kUlAgPSBCLl8kRnIsIGguXyQ0UCA9IE8uY3JlYXRlU3RyaW5nKHQsIF8sIGEgLSBfKSksIGkubW90aW9ucy5wdXNoKGgpOwogICAgICAgICAgICAgICAgICB2YXIgbCA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAkID0gW107CgogICAgICAgICAgICAgICAgICBmb3IgKG8gPSBhICsgMTsgbyA8IHIgJiYgIlxyIiAhPSAobiA9IFEodCwgbykpICYmICJcbiIgIT0gbjsgKytvKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCIsIiAhPSBuICYmICIgIiAhPSBuICYmICJcdCIgIT0gbikgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBPLl8kTFModCwgciwgbywgZSk7CgogICAgICAgICAgICAgICAgICAgICAgaWYgKGVbMF0gPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICQucHVzaCh1KSwgbCsrOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IGVbMF07CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAocCA8IG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiXyRuMCBfJGhpIC4gQExpdmUyRE1vdGlvbiBsb2FkTW90aW9uKClcbiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBvID0gcCAtIDE7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBoLl8kSTAgPSBuZXcgRmxvYXQzMkFycmF5KCQpLCBsID4gaS5fJHlUICYmIChpLl8keVQgPSBsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgXyA9IG8sIGEgPSAtMTsgbyA8IHIgJiYgIlxyIiAhPSAobiA9IFEodCwgbykpICYmICJcbiIgIT0gbjsgKytvKSB7CiAgICAgICAgICAgICAgICBpZiAoIj0iID09IG4pIHsKICAgICAgICAgICAgICAgICAgYSA9IG87CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIGYgPSAhMTsKICAgICAgICAgICAgICBpZiAoYSA+PSAwKSBmb3IgKGEgPT0gXyArIDQgJiYgImYiID09IFEodCwgXyArIDEpICYmICJwIiA9PSBRKHQsIF8gKyAyKSAmJiAicyIgPT0gUSh0LCBfICsgMykgJiYgKGYgPSAhMCksIG8gPSBhICsgMTsgbyA8IHIgJiYgIlxyIiAhPSAobiA9IFEodCwgbykpICYmICJcbiIgIT0gbjsgKytvKSB7CiAgICAgICAgICAgICAgICBpZiAoIiwiICE9IG4gJiYgIiAiICE9IG4gJiYgIlx0IiAhPSBuKSB7CiAgICAgICAgICAgICAgICAgIHZhciB1ID0gTy5fJExTKHQsIHIsIG8sIGUpOwoKICAgICAgICAgICAgICAgICAgZVswXSA+IDAgJiYgZiAmJiA1IDwgdSAmJiB1IDwgMTIxICYmIChpLl8kRDAgPSB1KSwgbyA9IGVbMF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3IgKDsgbyA8IHIgJiYgIlxuIiAhPSBRKHQsIG8pICYmICJcciIgIT0gUSh0LCBvKTsgKytvKSB7CiAgICAgICAgICAgICAgICA7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgZm9yICg7IG8gPCByICYmICJcbiIgIT0gUSh0LCBvKSAmJiAiXHIiICE9IFEodCwgbyk7ICsrbykgewogICAgICAgICAgICA7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaS5fJHJyID0gMWUzICogaS5fJHlUIC8gaS5fJEQwIHwgMCwgaTsKICAgICAgfSwgSi5wcm90b3R5cGUuZ2V0RHVyYXRpb25NU2VjID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kRSA/IC0xIDogdGhpcy5fJHJyOwogICAgICB9LCBKLnByb3RvdHlwZS5nZXRMb29wRHVyYXRpb25NU2VjID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kcnI7CiAgICAgIH0sIEoucHJvdG90eXBlLmR1bXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLm1vdGlvbnMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgIHZhciBpID0gdGhpcy5tb3Rpb25zW3RdOwogICAgICAgICAgY29uc29sZS5sb2coIl8kd0xbJXNdIFslZF0uICIsIGkuXyQ0UCwgaS5fJEkwLmxlbmd0aCk7CgogICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCBpLl8kSTAubGVuZ3RoICYmIGUgPCAxMDsgZSsrKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCIlNS4yZiAsIiwgaS5fJEkwW2VdKTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zb2xlLmxvZygiXG4iKTsKICAgICAgICB9CiAgICAgIH0sIEoucHJvdG90eXBlLnVwZGF0ZVBhcmFtRXhlID0gZnVuY3Rpb24gKHQsIGksIGUsIHIpIHsKICAgICAgICBmb3IgKHZhciBvID0gaSAtIHIuXyR6MiwgbiA9IG8gKiB0aGlzLl8kRDAgLyAxZTMsIHMgPSAwIHwgbiwgXyA9IG4gLSBzLCBhID0gMDsgYSA8IHRoaXMubW90aW9ucy5sZW5ndGg7IGErKykgewogICAgICAgICAgdmFyIGggPSB0aGlzLm1vdGlvbnNbYV0sCiAgICAgICAgICAgICAgbCA9IGguXyRJMC5sZW5ndGgsCiAgICAgICAgICAgICAgJCA9IGguXyQ0UDsKCiAgICAgICAgICBpZiAoaC5fJFJQID09IEIuXyRocykgewogICAgICAgICAgICB2YXIgdSA9IGguXyRJMFtzID49IGwgPyBsIC0gMSA6IHNdOwogICAgICAgICAgICB0LnNldFBhcmFtRmxvYXQoJCwgdSk7CiAgICAgICAgICB9IGVsc2UgaWYgKEIuXyR3cyA8PSBoLl8kUlAgJiYgaC5fJFJQIDw9IEIuXyRZcykgO2Vsc2UgewogICAgICAgICAgICB2YXIgcCwKICAgICAgICAgICAgICAgIGYgPSB0LmdldFBhcmFtSW5kZXgoJCksCiAgICAgICAgICAgICAgICBjID0gdC5nZXRNb2RlbENvbnRleHQoKSwKICAgICAgICAgICAgICAgIGQgPSBjLmdldFBhcmFtTWF4KGYpLAogICAgICAgICAgICAgICAgZyA9IGMuZ2V0UGFyYW1NaW4oZiksCiAgICAgICAgICAgICAgICB5ID0gLjQgKiAoZCAtIGcpLAogICAgICAgICAgICAgICAgbSA9IGMuZ2V0UGFyYW1GbG9hdChmKSwKICAgICAgICAgICAgICAgIFQgPSBoLl8kSTBbcyA+PSBsID8gbCAtIDEgOiBzXSwKICAgICAgICAgICAgICAgIFAgPSBoLl8kSTBbcyArIDEgPj0gbCA/IGwgLSAxIDogcyArIDFdOwogICAgICAgICAgICBwID0gVCA8IFAgJiYgUCAtIFQgPiB5IHx8IFQgPiBQICYmIFQgLSBQID4geSA/IFQgOiBUICsgKFAgLSBUKSAqIF87CiAgICAgICAgICAgIHZhciBTID0gbSArIChwIC0gbSkgKiBlOwogICAgICAgICAgICB0LnNldFBhcmFtRmxvYXQoJCwgUyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBzID49IHRoaXMuXyR5VCAmJiAodGhpcy5fJEUgPyAoci5fJHoyID0gaSwgdGhpcy5sb29wRmFkZUluICYmIChyLl8kYnMgPSBpKSkgOiByLl8kOUwgPSAhMCksIHRoaXMuXyRlUCA9IGU7CiAgICAgIH0sIEoucHJvdG90eXBlLl8kcjAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRFOwogICAgICB9LCBKLnByb3RvdHlwZS5fJGFMID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kRSA9IHQ7CiAgICAgIH0sIEoucHJvdG90eXBlLl8kUzAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyREMDsKICAgICAgfSwgSi5wcm90b3R5cGUuXyRVMCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJEQwID0gdDsKICAgICAgfSwgSi5wcm90b3R5cGUuaXNMb29wRmFkZUluID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmxvb3BGYWRlSW47CiAgICAgIH0sIEoucHJvdG90eXBlLnNldExvb3BGYWRlSW4gPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMubG9vcEZhZGVJbiA9IHQ7CiAgICAgIH0sIE4ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc2l6ZSA9IDA7CiAgICAgIH0sIE4ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgaWYgKHRoaXMuXyRQLmxlbmd0aCA8PSB0aGlzLnNpemUpIHsKICAgICAgICAgIHZhciBpID0gbmV3IEZsb2F0MzJBcnJheSgyICogdGhpcy5zaXplKTsKICAgICAgICAgIHcuXyRqVCh0aGlzLl8kUCwgMCwgaSwgMCwgdGhpcy5zaXplKSwgdGhpcy5fJFAgPSBpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5fJFBbdGhpcy5zaXplKytdID0gdDsKICAgICAgfSwgTi5wcm90b3R5cGUuXyRCTCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdCA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5zaXplKTsKICAgICAgICByZXR1cm4gdy5fJGpUKHRoaXMuXyRQLCAwLCB0LCAwLCB0aGlzLnNpemUpLCB0OwogICAgICB9LCBCLl8kRnIgPSAwLCBCLl8kaHMgPSAxLCBCLl8kd3MgPSAxMDAsIEIuXyROcyA9IDEwMSwgQi5fJHhzID0gMTAyLCBCLl8kdXMgPSAxMDMsIEIuXyRxcyA9IDEwNCwgQi5fJFlzID0gMTA1LCBaLnByb3RvdHlwZSA9IG5ldyBJKCksIFouXyRnVCA9IG5ldyBBcnJheSgpLCBaLnByb3RvdHlwZS5fJHpQID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuXyRHUyA9IG5ldyBEKCksIHRoaXMuXyRHUy5fJHpQKCk7CiAgICAgIH0sIFoucHJvdG90eXBlLl8kRjAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIEkucHJvdG90eXBlLl8kRjAuY2FsbCh0aGlzLCB0KSwgdGhpcy5fJEEgPSB0Ll8kNkwoKSwgdGhpcy5fJG8gPSB0Ll8kNkwoKSwgdGhpcy5fJEdTID0gdC5fJG5QKCksIHRoaXMuXyRFbyA9IHQuXyRuUCgpLCBJLnByb3RvdHlwZS5yZWFkVjJfb3BhY2l0eS5jYWxsKHRoaXMsIHQpOwogICAgICB9LCBaLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IG5ldyBLKHRoaXMpLAogICAgICAgICAgICBlID0gKHRoaXMuXyRvICsgMSkgKiAodGhpcy5fJEEgKyAxKTsKICAgICAgICByZXR1cm4gbnVsbCAhPSBpLl8kQ3IgJiYgKGkuXyRDciA9IG51bGwpLCBpLl8kQ3IgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBlKSwgbnVsbCAhPSBpLl8kaHIgJiYgKGkuXyRociA9IG51bGwpLCB0aGlzLl8kMzIoKSA/IGkuXyRociA9IG5ldyBGbG9hdDMyQXJyYXkoMiAqIGUpIDogaS5fJGhyID0gbnVsbCwgaTsKICAgICAgfSwgWi5wcm90b3R5cGUuXyROciA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdmFyIGUgPSBpOwoKICAgICAgICBpZiAodGhpcy5fJEdTLl8kVXIodCkpIHsKICAgICAgICAgIHZhciByID0gdGhpcy5fJFZUKCksCiAgICAgICAgICAgICAgbyA9IFouXyRnVDsKCiAgICAgICAgICBvWzBdID0gITEsIHYuXyRWcih0LCB0aGlzLl8kR1MsIG8sIHIsIHRoaXMuXyRFbywgZS5fJENyLCAwLCAyKSwgaS5fJEliKG9bMF0pLCB0aGlzLmludGVycG9sYXRlT3BhY2l0eSh0LCB0aGlzLl8kR1MsIGksIG8pOwogICAgICAgIH0KICAgICAgfSwgWi5wcm90b3R5cGUuXyQyYiA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdmFyIGUgPSBpOwoKICAgICAgICBpZiAoZS5fJGhTKCEwKSwgdGhpcy5fJDMyKCkpIHsKICAgICAgICAgIHZhciByID0gdGhpcy5nZXRUYXJnZXRCYXNlRGF0YUlEKCk7CiAgICAgICAgICBpZiAoZS5fJDhyID09IEkuXyR1ciAmJiAoZS5fJDhyID0gdC5nZXRCYXNlRGF0YUluZGV4KHIpKSwgZS5fJDhyIDwgMCkgYXQuXyRzbyAmJiBfLl8kbGkoIl8kTCBfJDBQIF8kRyA6OiAlcyIsIHIpLCBlLl8kaFMoITEpO2Vsc2UgewogICAgICAgICAgICB2YXIgbyA9IHQuZ2V0QmFzZURhdGEoZS5fJDhyKSwKICAgICAgICAgICAgICAgIG4gPSB0Ll8kcTIoZS5fJDhyKTsKCiAgICAgICAgICAgIGlmIChudWxsICE9IG8gJiYgbi5fJHlvKCkpIHsKICAgICAgICAgICAgICB2YXIgcyA9IG4uZ2V0VG90YWxTY2FsZSgpOwogICAgICAgICAgICAgIGUuc2V0VG90YWxTY2FsZV9ub3RGb3JDbGllbnQocyk7CiAgICAgICAgICAgICAgdmFyIGEgPSBuLmdldFRvdGFsT3BhY2l0eSgpOwogICAgICAgICAgICAgIGUuc2V0VG90YWxPcGFjaXR5KGEgKiBlLmdldEludGVycG9sYXRlZE9wYWNpdHkoKSksIG8uXyRuYih0LCBuLCBlLl8kQ3IsIGUuXyRociwgdGhpcy5fJFZUKCksIDAsIDIpLCBlLl8kaFMoITApOwogICAgICAgICAgICB9IGVsc2UgZS5fJGhTKCExKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgZS5zZXRUb3RhbE9wYWNpdHkoZS5nZXRJbnRlcnBvbGF0ZWRPcGFjaXR5KCkpOwogICAgICB9LCBaLnByb3RvdHlwZS5fJG5iID0gZnVuY3Rpb24gKHQsIGksIGUsIHIsIG8sIG4sIHMpIHsKICAgICAgICB2YXIgXyA9IGksCiAgICAgICAgICAgIGEgPSBudWxsICE9IF8uXyRociA/IF8uXyRociA6IF8uXyRDcjsKICAgICAgICBaLnRyYW5zZm9ybVBvaW50c19zZGsyKGUsIHIsIG8sIG4sIHMsIGEsIHRoaXMuXyRvLCB0aGlzLl8kQSk7CiAgICAgIH0sIFoudHJhbnNmb3JtUG9pbnRzX3NkazIgPSBmdW5jdGlvbiAoaSwgZSwgciwgbywgbiwgcywgXywgYSkgewogICAgICAgIGZvciAodmFyIGgsIGwsICQsIHUgPSByICogbiwgcCA9IDAsIGYgPSAwLCBjID0gMCwgZCA9IDAsIGcgPSAwLCB5ID0gMCwgbSA9ICExLCBUID0gbzsgVCA8IHU7IFQgKz0gbikgewogICAgICAgICAgdmFyIFAsIFMsIHYsIEw7CgogICAgICAgICAgaWYgKHYgPSBpW1RdLCBMID0gaVtUICsgMV0sIFAgPSB2ICogXywgUyA9IEwgKiBhLCBQIDwgMCB8fCBTIDwgMCB8fCBfIDw9IFAgfHwgYSA8PSBTKSB7CiAgICAgICAgICAgIHZhciBNID0gXyArIDE7CgogICAgICAgICAgICBpZiAoIW0pIHsKICAgICAgICAgICAgICBtID0gITAsIHAgPSAuMjUgKiAoc1syICogKDAgKyAwICogTSldICsgc1syICogKF8gKyAwICogTSldICsgc1syICogKDAgKyBhICogTSldICsgc1syICogKF8gKyBhICogTSldKSwgZiA9IC4yNSAqIChzWzIgKiAoMCArIDAgKiBNKSArIDFdICsgc1syICogKF8gKyAwICogTSkgKyAxXSArIHNbMiAqICgwICsgYSAqIE0pICsgMV0gKyBzWzIgKiAoXyArIGEgKiBNKSArIDFdKTsKICAgICAgICAgICAgICB2YXIgRSA9IHNbMiAqIChfICsgYSAqIE0pXSAtIHNbMiAqICgwICsgMCAqIE0pXSwKICAgICAgICAgICAgICAgICAgQSA9IHNbMiAqIChfICsgYSAqIE0pICsgMV0gLSBzWzIgKiAoMCArIDAgKiBNKSArIDFdLAogICAgICAgICAgICAgICAgICBJID0gc1syICogKF8gKyAwICogTSldIC0gc1syICogKDAgKyBhICogTSldLAogICAgICAgICAgICAgICAgICB3ID0gc1syICogKF8gKyAwICogTSkgKyAxXSAtIHNbMiAqICgwICsgYSAqIE0pICsgMV07CiAgICAgICAgICAgICAgYyA9IC41ICogKEUgKyBJKSwgZCA9IC41ICogKEEgKyB3KSwgZyA9IC41ICogKEUgLSBJKSwgeSA9IC41ICogKEEgLSB3KSwgcCAtPSAuNSAqIChjICsgZyksIGYgLT0gLjUgKiAoZCArIHkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoLTIgPCB2ICYmIHYgPCAzICYmIC0yIDwgTCAmJiBMIDwgMykgewogICAgICAgICAgICAgIGlmICh2IDw9IDApIHsKICAgICAgICAgICAgICAgIGlmIChMIDw9IDApIHsKICAgICAgICAgICAgICAgICAgdmFyIHggPSBzWzIgKiAoMCArIDAgKiBNKV0sCiAgICAgICAgICAgICAgICAgICAgICBPID0gc1syICogKDAgKyAwICogTSkgKyAxXSwKICAgICAgICAgICAgICAgICAgICAgIEQgPSBwIC0gMiAqIGMsCiAgICAgICAgICAgICAgICAgICAgICBSID0gZiAtIDIgKiBkLAogICAgICAgICAgICAgICAgICAgICAgYiA9IHAgLSAyICogZywKICAgICAgICAgICAgICAgICAgICAgIEYgPSBmIC0gMiAqIHksCiAgICAgICAgICAgICAgICAgICAgICBDID0gcCAtIDIgKiBjIC0gMiAqIGcsCiAgICAgICAgICAgICAgICAgICAgICBOID0gZiAtIDIgKiBkIC0gMiAqIHksCiAgICAgICAgICAgICAgICAgICAgICBCID0gLjUgKiAodiAtIC0yKSwKICAgICAgICAgICAgICAgICAgICAgIFUgPSAuNSAqIChMIC0gLTIpOwogICAgICAgICAgICAgICAgICBCICsgVSA8PSAxID8gKGVbVF0gPSBDICsgKGIgLSBDKSAqIEIgKyAoRCAtIEMpICogVSwgZVtUICsgMV0gPSBOICsgKEYgLSBOKSAqIEIgKyAoUiAtIE4pICogVSkgOiAoZVtUXSA9IHggKyAoRCAtIHgpICogKDEgLSBCKSArIChiIC0geCkgKiAoMSAtIFUpLCBlW1QgKyAxXSA9IE8gKyAoUiAtIE8pICogKDEgLSBCKSArIChGIC0gTykgKiAoMSAtIFUpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoTCA+PSAxKSB7CiAgICAgICAgICAgICAgICAgIHZhciBiID0gc1syICogKDAgKyBhICogTSldLAogICAgICAgICAgICAgICAgICAgICAgRiA9IHNbMiAqICgwICsgYSAqIE0pICsgMV0sCiAgICAgICAgICAgICAgICAgICAgICBDID0gcCAtIDIgKiBjICsgMSAqIGcsCiAgICAgICAgICAgICAgICAgICAgICBOID0gZiAtIDIgKiBkICsgMSAqIHksCiAgICAgICAgICAgICAgICAgICAgICB4ID0gcCArIDMgKiBnLAogICAgICAgICAgICAgICAgICAgICAgTyA9IGYgKyAzICogeSwKICAgICAgICAgICAgICAgICAgICAgIEQgPSBwIC0gMiAqIGMgKyAzICogZywKICAgICAgICAgICAgICAgICAgICAgIFIgPSBmIC0gMiAqIGQgKyAzICogeSwKICAgICAgICAgICAgICAgICAgICAgIEIgPSAuNSAqICh2IC0gLTIpLAogICAgICAgICAgICAgICAgICAgICAgVSA9IC41ICogKEwgLSAxKTsKICAgICAgICAgICAgICAgICAgQiArIFUgPD0gMSA/IChlW1RdID0gQyArIChiIC0gQykgKiBCICsgKEQgLSBDKSAqIFUsIGVbVCArIDFdID0gTiArIChGIC0gTikgKiBCICsgKFIgLSBOKSAqIFUpIDogKGVbVF0gPSB4ICsgKEQgLSB4KSAqICgxIC0gQikgKyAoYiAtIHgpICogKDEgLSBVKSwgZVtUICsgMV0gPSBPICsgKFIgLSBPKSAqICgxIC0gQikgKyAoRiAtIE8pICogKDEgLSBVKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB2YXIgRyA9IDAgfCBTOwogICAgICAgICAgICAgICAgICBHID09IGEgJiYgKEcgPSBhIC0gMSk7CiAgICAgICAgICAgICAgICAgIHZhciBCID0gLjUgKiAodiAtIC0yKSwKICAgICAgICAgICAgICAgICAgICAgIFUgPSBTIC0gRywKICAgICAgICAgICAgICAgICAgICAgIFkgPSBHIC8gYSwKICAgICAgICAgICAgICAgICAgICAgIGsgPSAoRyArIDEpIC8gYSwKICAgICAgICAgICAgICAgICAgICAgIGIgPSBzWzIgKiAoMCArIEcgKiBNKV0sCiAgICAgICAgICAgICAgICAgICAgICBGID0gc1syICogKDAgKyBHICogTSkgKyAxXSwKICAgICAgICAgICAgICAgICAgICAgIHggPSBzWzIgKiAoMCArIChHICsgMSkgKiBNKV0sCiAgICAgICAgICAgICAgICAgICAgICBPID0gc1syICogKDAgKyAoRyArIDEpICogTSkgKyAxXSwKICAgICAgICAgICAgICAgICAgICAgIEMgPSBwIC0gMiAqIGMgKyBZICogZywKICAgICAgICAgICAgICAgICAgICAgIE4gPSBmIC0gMiAqIGQgKyBZICogeSwKICAgICAgICAgICAgICAgICAgICAgIEQgPSBwIC0gMiAqIGMgKyBrICogZywKICAgICAgICAgICAgICAgICAgICAgIFIgPSBmIC0gMiAqIGQgKyBrICogeTsKICAgICAgICAgICAgICAgICAgQiArIFUgPD0gMSA/IChlW1RdID0gQyArIChiIC0gQykgKiBCICsgKEQgLSBDKSAqIFUsIGVbVCArIDFdID0gTiArIChGIC0gTikgKiBCICsgKFIgLSBOKSAqIFUpIDogKGVbVF0gPSB4ICsgKEQgLSB4KSAqICgxIC0gQikgKyAoYiAtIHgpICogKDEgLSBVKSwgZVtUICsgMV0gPSBPICsgKFIgLSBPKSAqICgxIC0gQikgKyAoRiAtIE8pICogKDEgLSBVKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIGlmICgxIDw9IHYpIHsKICAgICAgICAgICAgICAgIGlmIChMIDw9IDApIHsKICAgICAgICAgICAgICAgICAgdmFyIEQgPSBzWzIgKiAoXyArIDAgKiBNKV0sCiAgICAgICAgICAgICAgICAgICAgICBSID0gc1syICogKF8gKyAwICogTSkgKyAxXSwKICAgICAgICAgICAgICAgICAgICAgIHggPSBwICsgMyAqIGMsCiAgICAgICAgICAgICAgICAgICAgICBPID0gZiArIDMgKiBkLAogICAgICAgICAgICAgICAgICAgICAgQyA9IHAgKyAxICogYyAtIDIgKiBnLAogICAgICAgICAgICAgICAgICAgICAgTiA9IGYgKyAxICogZCAtIDIgKiB5LAogICAgICAgICAgICAgICAgICAgICAgYiA9IHAgKyAzICogYyAtIDIgKiBnLAogICAgICAgICAgICAgICAgICAgICAgRiA9IGYgKyAzICogZCAtIDIgKiB5LAogICAgICAgICAgICAgICAgICAgICAgQiA9IC41ICogKHYgLSAxKSwKICAgICAgICAgICAgICAgICAgICAgIFUgPSAuNSAqIChMIC0gLTIpOwogICAgICAgICAgICAgICAgICBCICsgVSA8PSAxID8gKGVbVF0gPSBDICsgKGIgLSBDKSAqIEIgKyAoRCAtIEMpICogVSwgZVtUICsgMV0gPSBOICsgKEYgLSBOKSAqIEIgKyAoUiAtIE4pICogVSkgOiAoZVtUXSA9IHggKyAoRCAtIHgpICogKDEgLSBCKSArIChiIC0geCkgKiAoMSAtIFUpLCBlW1QgKyAxXSA9IE8gKyAoUiAtIE8pICogKDEgLSBCKSArIChGIC0gTykgKiAoMSAtIFUpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoTCA+PSAxKSB7CiAgICAgICAgICAgICAgICAgIHZhciBDID0gc1syICogKF8gKyBhICogTSldLAogICAgICAgICAgICAgICAgICAgICAgTiA9IHNbMiAqIChfICsgYSAqIE0pICsgMV0sCiAgICAgICAgICAgICAgICAgICAgICBiID0gcCArIDMgKiBjICsgMSAqIGcsCiAgICAgICAgICAgICAgICAgICAgICBGID0gZiArIDMgKiBkICsgMSAqIHksCiAgICAgICAgICAgICAgICAgICAgICBEID0gcCArIDEgKiBjICsgMyAqIGcsCiAgICAgICAgICAgICAgICAgICAgICBSID0gZiArIDEgKiBkICsgMyAqIHksCiAgICAgICAgICAgICAgICAgICAgICB4ID0gcCArIDMgKiBjICsgMyAqIGcsCiAgICAgICAgICAgICAgICAgICAgICBPID0gZiArIDMgKiBkICsgMyAqIHksCiAgICAgICAgICAgICAgICAgICAgICBCID0gLjUgKiAodiAtIDEpLAogICAgICAgICAgICAgICAgICAgICAgVSA9IC41ICogKEwgLSAxKTsKICAgICAgICAgICAgICAgICAgQiArIFUgPD0gMSA/IChlW1RdID0gQyArIChiIC0gQykgKiBCICsgKEQgLSBDKSAqIFUsIGVbVCArIDFdID0gTiArIChGIC0gTikgKiBCICsgKFIgLSBOKSAqIFUpIDogKGVbVF0gPSB4ICsgKEQgLSB4KSAqICgxIC0gQikgKyAoYiAtIHgpICogKDEgLSBVKSwgZVtUICsgMV0gPSBPICsgKFIgLSBPKSAqICgxIC0gQikgKyAoRiAtIE8pICogKDEgLSBVKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB2YXIgRyA9IDAgfCBTOwogICAgICAgICAgICAgICAgICBHID09IGEgJiYgKEcgPSBhIC0gMSk7CiAgICAgICAgICAgICAgICAgIHZhciBCID0gLjUgKiAodiAtIDEpLAogICAgICAgICAgICAgICAgICAgICAgVSA9IFMgLSBHLAogICAgICAgICAgICAgICAgICAgICAgWSA9IEcgLyBhLAogICAgICAgICAgICAgICAgICAgICAgayA9IChHICsgMSkgLyBhLAogICAgICAgICAgICAgICAgICAgICAgQyA9IHNbMiAqIChfICsgRyAqIE0pXSwKICAgICAgICAgICAgICAgICAgICAgIE4gPSBzWzIgKiAoXyArIEcgKiBNKSArIDFdLAogICAgICAgICAgICAgICAgICAgICAgRCA9IHNbMiAqIChfICsgKEcgKyAxKSAqIE0pXSwKICAgICAgICAgICAgICAgICAgICAgIFIgPSBzWzIgKiAoXyArIChHICsgMSkgKiBNKSArIDFdLAogICAgICAgICAgICAgICAgICAgICAgYiA9IHAgKyAzICogYyArIFkgKiBnLAogICAgICAgICAgICAgICAgICAgICAgRiA9IGYgKyAzICogZCArIFkgKiB5LAogICAgICAgICAgICAgICAgICAgICAgeCA9IHAgKyAzICogYyArIGsgKiBnLAogICAgICAgICAgICAgICAgICAgICAgTyA9IGYgKyAzICogZCArIGsgKiB5OwogICAgICAgICAgICAgICAgICBCICsgVSA8PSAxID8gKGVbVF0gPSBDICsgKGIgLSBDKSAqIEIgKyAoRCAtIEMpICogVSwgZVtUICsgMV0gPSBOICsgKEYgLSBOKSAqIEIgKyAoUiAtIE4pICogVSkgOiAoZVtUXSA9IHggKyAoRCAtIHgpICogKDEgLSBCKSArIChiIC0geCkgKiAoMSAtIFUpLCBlW1QgKyAxXSA9IE8gKyAoUiAtIE8pICogKDEgLSBCKSArIChGIC0gTykgKiAoMSAtIFUpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKEwgPD0gMCkgewogICAgICAgICAgICAgICAgdmFyIFYgPSAwIHwgUDsKICAgICAgICAgICAgICAgIFYgPT0gXyAmJiAoViA9IF8gLSAxKTsKICAgICAgICAgICAgICAgIHZhciBCID0gUCAtIFYsCiAgICAgICAgICAgICAgICAgICAgVSA9IC41ICogKEwgLSAtMiksCiAgICAgICAgICAgICAgICAgICAgWCA9IFYgLyBfLAogICAgICAgICAgICAgICAgICAgIHogPSAoViArIDEpIC8gXywKICAgICAgICAgICAgICAgICAgICBEID0gc1syICogKFYgKyAwICogTSldLAogICAgICAgICAgICAgICAgICAgIFIgPSBzWzIgKiAoViArIDAgKiBNKSArIDFdLAogICAgICAgICAgICAgICAgICAgIHggPSBzWzIgKiAoViArIDEgKyAwICogTSldLAogICAgICAgICAgICAgICAgICAgIE8gPSBzWzIgKiAoViArIDEgKyAwICogTSkgKyAxXSwKICAgICAgICAgICAgICAgICAgICBDID0gcCArIFggKiBjIC0gMiAqIGcsCiAgICAgICAgICAgICAgICAgICAgTiA9IGYgKyBYICogZCAtIDIgKiB5LAogICAgICAgICAgICAgICAgICAgIGIgPSBwICsgeiAqIGMgLSAyICogZywKICAgICAgICAgICAgICAgICAgICBGID0gZiArIHogKiBkIC0gMiAqIHk7CiAgICAgICAgICAgICAgICBCICsgVSA8PSAxID8gKGVbVF0gPSBDICsgKGIgLSBDKSAqIEIgKyAoRCAtIEMpICogVSwgZVtUICsgMV0gPSBOICsgKEYgLSBOKSAqIEIgKyAoUiAtIE4pICogVSkgOiAoZVtUXSA9IHggKyAoRCAtIHgpICogKDEgLSBCKSArIChiIC0geCkgKiAoMSAtIFUpLCBlW1QgKyAxXSA9IE8gKyAoUiAtIE8pICogKDEgLSBCKSArIChGIC0gTykgKiAoMSAtIFUpKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKEwgPj0gMSkgewogICAgICAgICAgICAgICAgdmFyIFYgPSAwIHwgUDsKICAgICAgICAgICAgICAgIFYgPT0gXyAmJiAoViA9IF8gLSAxKTsKICAgICAgICAgICAgICAgIHZhciBCID0gUCAtIFYsCiAgICAgICAgICAgICAgICAgICAgVSA9IC41ICogKEwgLSAxKSwKICAgICAgICAgICAgICAgICAgICBYID0gViAvIF8sCiAgICAgICAgICAgICAgICAgICAgeiA9IChWICsgMSkgLyBfLAogICAgICAgICAgICAgICAgICAgIEMgPSBzWzIgKiAoViArIGEgKiBNKV0sCiAgICAgICAgICAgICAgICAgICAgTiA9IHNbMiAqIChWICsgYSAqIE0pICsgMV0sCiAgICAgICAgICAgICAgICAgICAgYiA9IHNbMiAqIChWICsgMSArIGEgKiBNKV0sCiAgICAgICAgICAgICAgICAgICAgRiA9IHNbMiAqIChWICsgMSArIGEgKiBNKSArIDFdLAogICAgICAgICAgICAgICAgICAgIEQgPSBwICsgWCAqIGMgKyAzICogZywKICAgICAgICAgICAgICAgICAgICBSID0gZiArIFggKiBkICsgMyAqIHksCiAgICAgICAgICAgICAgICAgICAgeCA9IHAgKyB6ICogYyArIDMgKiBnLAogICAgICAgICAgICAgICAgICAgIE8gPSBmICsgeiAqIGQgKyAzICogeTsKICAgICAgICAgICAgICAgIEIgKyBVIDw9IDEgPyAoZVtUXSA9IEMgKyAoYiAtIEMpICogQiArIChEIC0gQykgKiBVLCBlW1QgKyAxXSA9IE4gKyAoRiAtIE4pICogQiArIChSIC0gTikgKiBVKSA6IChlW1RdID0geCArIChEIC0geCkgKiAoMSAtIEIpICsgKGIgLSB4KSAqICgxIC0gVSksIGVbVCArIDFdID0gTyArIChSIC0gTykgKiAoMSAtIEIpICsgKEYgLSBPKSAqICgxIC0gVSkpOwogICAgICAgICAgICAgIH0gZWxzZSB0LmVyci5wcmludGYoIl8kbGkgY2FsYyA6ICUuNGYgLCAlLjRmXHRcdFx0XHRcdEBAQkRCb3hHcmlkXG4iLCB2LCBMKTsKICAgICAgICAgICAgfSBlbHNlIGVbVF0gPSBwICsgdiAqIGMgKyBMICogZywgZVtUICsgMV0gPSBmICsgdiAqIGQgKyBMICogeTsKICAgICAgICAgIH0gZWxzZSBsID0gUCAtICgwIHwgUCksICQgPSBTIC0gKDAgfCBTKSwgaCA9IDIgKiAoKDAgfCBQKSArICgwIHwgUykgKiAoXyArIDEpKSwgbCArICQgPCAxID8gKGVbVF0gPSBzW2hdICogKDEgLSBsIC0gJCkgKyBzW2ggKyAyXSAqIGwgKyBzW2ggKyAyICogKF8gKyAxKV0gKiAkLCBlW1QgKyAxXSA9IHNbaCArIDFdICogKDEgLSBsIC0gJCkgKyBzW2ggKyAzXSAqIGwgKyBzW2ggKyAyICogKF8gKyAxKSArIDFdICogJCkgOiAoZVtUXSA9IHNbaCArIDIgKiAoXyArIDEpICsgMl0gKiAobCAtIDEgKyAkKSArIHNbaCArIDIgKiAoXyArIDEpXSAqICgxIC0gbCkgKyBzW2ggKyAyXSAqICgxIC0gJCksIGVbVCArIDFdID0gc1toICsgMiAqIChfICsgMSkgKyAzXSAqIChsIC0gMSArICQpICsgc1toICsgMiAqIChfICsgMSkgKyAxXSAqICgxIC0gbCkgKyBzW2ggKyAzXSAqICgxIC0gJCkpOwogICAgICAgIH0KICAgICAgfSwgWi5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzX3NkazEgPSBmdW5jdGlvbiAodCwgaSwgZSwgciwgbywgbiwgcykgewogICAgICAgIGZvciAodmFyIF8sIGEsIGgsIGwsICQsIHUsIHAsIGYgPSBpLCBjID0gdGhpcy5fJG8sIGQgPSB0aGlzLl8kQSwgZyA9IG8gKiBzLCB5ID0gbnVsbCAhPSBmLl8kaHIgPyBmLl8kaHIgOiBmLl8kQ3IsIG0gPSBuOyBtIDwgZzsgbSArPSBzKSB7CiAgICAgICAgICBhdC5fJHRzID8gKF8gPSBlW21dLCBhID0gZVttICsgMV0sIF8gPCAwID8gXyA9IDAgOiBfID4gMSAmJiAoXyA9IDEpLCBhIDwgMCA/IGEgPSAwIDogYSA+IDEgJiYgKGEgPSAxKSwgXyAqPSBjLCBhICo9IGQsIGggPSAwIHwgXywgbCA9IDAgfCBhLCBoID4gYyAtIDEgJiYgKGggPSBjIC0gMSksIGwgPiBkIC0gMSAmJiAobCA9IGQgLSAxKSwgdSA9IF8gLSBoLCBwID0gYSAtIGwsICQgPSAyICogKGggKyBsICogKGMgKyAxKSkpIDogKF8gPSBlW21dICogYywgYSA9IGVbbSArIDFdICogZCwgdSA9IF8gLSAoMCB8IF8pLCBwID0gYSAtICgwIHwgYSksICQgPSAyICogKCgwIHwgXykgKyAoMCB8IGEpICogKGMgKyAxKSkpLCB1ICsgcCA8IDEgPyAoclttXSA9IHlbJF0gKiAoMSAtIHUgLSBwKSArIHlbJCArIDJdICogdSArIHlbJCArIDIgKiAoYyArIDEpXSAqIHAsIHJbbSArIDFdID0geVskICsgMV0gKiAoMSAtIHUgLSBwKSArIHlbJCArIDNdICogdSArIHlbJCArIDIgKiAoYyArIDEpICsgMV0gKiBwKSA6IChyW21dID0geVskICsgMiAqIChjICsgMSkgKyAyXSAqICh1IC0gMSArIHApICsgeVskICsgMiAqIChjICsgMSldICogKDEgLSB1KSArIHlbJCArIDJdICogKDEgLSBwKSwgclttICsgMV0gPSB5WyQgKyAyICogKGMgKyAxKSArIDNdICogKHUgLSAxICsgcCkgKyB5WyQgKyAyICogKGMgKyAxKSArIDFdICogKDEgLSB1KSArIHlbJCArIDNdICogKDEgLSBwKSk7CiAgICAgICAgfQogICAgICB9LCBaLnByb3RvdHlwZS5fJFZUID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAodGhpcy5fJG8gKyAxKSAqICh0aGlzLl8kQSArIDEpOwogICAgICB9LCBaLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBJLl8kX2I7CiAgICAgIH0sIEsucHJvdG90eXBlID0gbmV3IF90KCksIHR0Ll8kNDIgPSAwLCB0dC5wcm90b3R5cGUuXyR6UCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLl8kM1MgPSBuZXcgQXJyYXkoKSwgdGhpcy5fJGFTID0gbmV3IEFycmF5KCk7CiAgICAgIH0sIHR0LnByb3RvdHlwZS5fJEYwID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kZzAgPSB0Ll8kOEwoKSwgdGhpcy52aXNpYmxlID0gdC5fJDhMKCksIHRoaXMuXyROTCA9IHQuXyRuUCgpLCB0aGlzLl8kM1MgPSB0Ll8kblAoKSwgdGhpcy5fJGFTID0gdC5fJG5QKCk7CiAgICAgIH0sIHR0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IG5ldyBpdCh0aGlzKTsKICAgICAgICByZXR1cm4gaS5zZXRQYXJ0c09wYWNpdHkodGhpcy5pc1Zpc2libGUoKSA/IDEgOiAwKSwgaTsKICAgICAgfSwgdHQucHJvdG90eXBlLl8kNm8gPSBmdW5jdGlvbiAodCkgewogICAgICAgIGlmIChudWxsID09IHRoaXMuXyQzUykgdGhyb3cgbmV3IEVycm9yKCJfJDNTIF8kNiBfJFdvQF8kNm8iKTsKCiAgICAgICAgdGhpcy5fJDNTLnB1c2godCk7CiAgICAgIH0sIHR0LnByb3RvdHlwZS5fJDNvID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAobnVsbCA9PSB0aGlzLl8kYVMpIHRocm93IG5ldyBFcnJvcigiXyRhUyBfJDYgXyRXb0BfJDNvIik7CgogICAgICAgIHRoaXMuXyRhUy5wdXNoKHQpOwogICAgICB9LCB0dC5wcm90b3R5cGUuXyRabyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJDNTID0gdDsKICAgICAgfSwgdHQucHJvdG90eXBlLl8keG8gPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRhUyA9IHQ7CiAgICAgIH0sIHR0LnByb3RvdHlwZS5pc1Zpc2libGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZTsKICAgICAgfSwgdHQucHJvdG90eXBlLl8kdUwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRnMDsKICAgICAgfSwgdHQucHJvdG90eXBlLl8kS1AgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMudmlzaWJsZSA9IHQ7CiAgICAgIH0sIHR0LnByb3RvdHlwZS5fJEVUID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kZzAgPSB0OwogICAgICB9LCB0dC5wcm90b3R5cGUuZ2V0QmFzZURhdGEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyQzUzsKICAgICAgfSwgdHQucHJvdG90eXBlLmdldERyYXdEYXRhID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kYVM7CiAgICAgIH0sIHR0LnByb3RvdHlwZS5fJHAyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kTkw7CiAgICAgIH0sIHR0LnByb3RvdHlwZS5fJG9iID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kTkwgPSB0OwogICAgICB9LCB0dC5wcm90b3R5cGUuZ2V0UGFydHNJRCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJE5MOwogICAgICB9LCB0dC5wcm90b3R5cGUuXyRNUCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJE5MID0gdDsKICAgICAgfSwgaXQucHJvdG90eXBlID0gbmV3ICQoKSwgaXQucHJvdG90eXBlLmdldFBhcnRzT3BhY2l0eSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJFZTOwogICAgICB9LCBpdC5wcm90b3R5cGUuc2V0UGFydHNPcGFjaXR5ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kVlMgPSB0OwogICAgICB9LCBldC5fJEw3ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHUuXyQyNygpLCB5dC5fJDI3KCksIGIuXyQyNygpLCBsLl8kMjcoKTsKICAgICAgfSwgZXQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmlkOwogICAgICB9LCBydC5wcm90b3R5cGUuXyRGMCA9IGZ1bmN0aW9uICh0KSB7fSwgb3QucHJvdG90eXBlLl8kMXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyQ0UzsKICAgICAgfSwgb3QucHJvdG90eXBlLl8kelAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fJDRTID0gbmV3IEFycmF5KCk7CiAgICAgIH0sIG90LnByb3RvdHlwZS5fJEYwID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kNFMgPSB0Ll8kblAoKTsKICAgICAgfSwgb3QucHJvdG90eXBlLl8kS3MgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyQ0Uy5wdXNoKHQpOwogICAgICB9LCBudC50ciA9IG5ldyBndCgpLCBudC5fJDUwID0gbmV3IGd0KCksIG50Ll8kVGkgPSBuZXcgQXJyYXkoMCwgMCksIG50Ll8kUGkgPSBuZXcgQXJyYXkoMCwgMCksIG50Ll8kQiA9IG5ldyBBcnJheSgwLCAwKSwgbnQucHJvdG90eXBlLl8kbFAgPSBmdW5jdGlvbiAodCwgaSwgZSwgcikgewogICAgICAgIHRoaXMudmlld3BvcnQgPSBuZXcgQXJyYXkodCwgaSwgZSwgcik7CiAgICAgIH0sIG50LnByb3RvdHlwZS5fJGJMID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7CiAgICAgICAgdmFyIHQgPSB0aGlzLnZpZXdwb3J0OwogICAgICAgIG51bGwgIT0gdCAmJiAodGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpLCB0aGlzLmNvbnRleHQuXyRMaSh0WzBdLCB0WzFdLCB0WzJdLCB0WzNdKSwgdGhpcy5jb250ZXh0LmNsaXAoKSk7CiAgICAgIH0sIG50LnByb3RvdHlwZS5fJGVpID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7CiAgICAgIH0sIG50LnByb3RvdHlwZS5kcmF3RWxlbWVudHMgPSBmdW5jdGlvbiAodCwgaSwgZSwgciwgbywgbiwgcywgYSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBvICE9IHRoaXMuXyRRbyAmJiAodGhpcy5fJFFvID0gbywgdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhID0gbyk7CgogICAgICAgICAgZm9yICh2YXIgaCA9IGkubGVuZ3RoLCBsID0gdC53aWR0aCwgJCA9IHQuaGVpZ2h0LCB1ID0gdGhpcy5jb250ZXh0LCBwID0gdGhpcy5fJHhQLCBmID0gdGhpcy5fJHVQLCBjID0gdGhpcy5fJDZyLCBkID0gdGhpcy5fJDNyLCBnID0gbnQudHIsIHkgPSBudC5fJFRpLCBtID0gbnQuXyRQaSwgVCA9IG50Ll8kQiwgUCA9IDA7IFAgPCBoOyBQICs9IDMpIHsKICAgICAgICAgICAgdS5zYXZlKCk7CiAgICAgICAgICAgIHZhciBTID0gaVtQXSwKICAgICAgICAgICAgICAgIHYgPSBpW1AgKyAxXSwKICAgICAgICAgICAgICAgIEwgPSBpW1AgKyAyXSwKICAgICAgICAgICAgICAgIE0gPSBwICsgYyAqIGVbMiAqIFNdLAogICAgICAgICAgICAgICAgRSA9IGYgKyBkICogZVsyICogUyArIDFdLAogICAgICAgICAgICAgICAgQSA9IHAgKyBjICogZVsyICogdl0sCiAgICAgICAgICAgICAgICBJID0gZiArIGQgKiBlWzIgKiB2ICsgMV0sCiAgICAgICAgICAgICAgICB3ID0gcCArIGMgKiBlWzIgKiBMXSwKICAgICAgICAgICAgICAgIHggPSBmICsgZCAqIGVbMiAqIEwgKyAxXTsKICAgICAgICAgICAgcyAmJiAocy5fJFBTKE0sIEUsIFQpLCBNID0gVFswXSwgRSA9IFRbMV0sIHMuXyRQUyhBLCBJLCBUKSwgQSA9IFRbMF0sIEkgPSBUWzFdLCBzLl8kUFModywgeCwgVCksIHcgPSBUWzBdLCB4ID0gVFsxXSk7CiAgICAgICAgICAgIHZhciBPID0gbCAqIHJbMiAqIFNdLAogICAgICAgICAgICAgICAgRCA9ICQgLSAkICogclsyICogUyArIDFdLAogICAgICAgICAgICAgICAgUiA9IGwgKiByWzIgKiB2XSwKICAgICAgICAgICAgICAgIGIgPSAkIC0gJCAqIHJbMiAqIHYgKyAxXSwKICAgICAgICAgICAgICAgIEYgPSBsICogclsyICogTF0sCiAgICAgICAgICAgICAgICBDID0gJCAtICQgKiByWzIgKiBMICsgMV0sCiAgICAgICAgICAgICAgICBOID0gTWF0aC5hdGFuMihiIC0gRCwgUiAtIE8pLAogICAgICAgICAgICAgICAgQiA9IE1hdGguYXRhbjIoSSAtIEUsIEEgLSBNKSwKICAgICAgICAgICAgICAgIFUgPSBBIC0gTSwKICAgICAgICAgICAgICAgIEcgPSBJIC0gRSwKICAgICAgICAgICAgICAgIFkgPSBNYXRoLnNxcnQoVSAqIFUgKyBHICogRyksCiAgICAgICAgICAgICAgICBrID0gUiAtIE8sCiAgICAgICAgICAgICAgICBWID0gYiAtIEQsCiAgICAgICAgICAgICAgICBYID0gTWF0aC5zcXJ0KGsgKiBrICsgViAqIFYpLAogICAgICAgICAgICAgICAgeiA9IFkgLyBYOwogICAgICAgICAgICBJdC5fJG5pKEYsIEMsIE8sIEQsIFIgLSBPLCBiIC0gRCwgLShiIC0gRCksIFIgLSBPLCB5KSwgSXQuXyRuaSh3LCB4LCBNLCBFLCBBIC0gTSwgSSAtIEUsIC0oSSAtIEUpLCBBIC0gTSwgbSk7CiAgICAgICAgICAgIHZhciBIID0gKG1bMF0gLSB5WzBdKSAvIHlbMV0sCiAgICAgICAgICAgICAgICBXID0gTWF0aC5taW4oTywgUiwgRiksCiAgICAgICAgICAgICAgICBqID0gTWF0aC5tYXgoTywgUiwgRiksCiAgICAgICAgICAgICAgICBxID0gTWF0aC5taW4oRCwgYiwgQyksCiAgICAgICAgICAgICAgICBKID0gTWF0aC5tYXgoRCwgYiwgQyksCiAgICAgICAgICAgICAgICBRID0gTWF0aC5mbG9vcihXKSwKICAgICAgICAgICAgICAgIFogPSBNYXRoLmZsb29yKHEpLAogICAgICAgICAgICAgICAgSyA9IE1hdGguY2VpbChqKSwKICAgICAgICAgICAgICAgIHR0ID0gTWF0aC5jZWlsKEopOwogICAgICAgICAgICBnLmlkZW50aXR5KCksIGcudHJhbnNsYXRlKE0sIEUpLCBnLnJvdGF0ZShCKSwgZy5zY2FsZSgxLCBtWzFdIC8geVsxXSksIGcuc2hlYXIoSCwgMCksIGcuc2NhbGUoeiwgeiksIGcucm90YXRlKC1OKSwgZy50cmFuc2xhdGUoLU8sIC1EKSwgZy5zZXRDb250ZXh0KHUpOwoKICAgICAgICAgICAgaWYgKG4gfHwgKG4gPSAxLjIpLCBhdC5JR05PUkVfRVhQQU5EICYmIChuID0gMCksIGF0LlVTRV9DQUNIRURfUE9MWUdPTl9JTUFHRSkgewogICAgICAgICAgICAgIHZhciBpdCA9IGEuXyRlMDsKCiAgICAgICAgICAgICAgaWYgKGl0LmdsX2NhY2hlSW1hZ2UgPSBpdC5nbF9jYWNoZUltYWdlIHx8IHt9LCAhaXQuZ2xfY2FjaGVJbWFnZVtQXSkgewogICAgICAgICAgICAgICAgdmFyIGV0ID0gbnQuY3JlYXRlQ2FudmFzKEsgLSBRLCB0dCAtIFopOwogICAgICAgICAgICAgICAgYXQuREVCVUdfREFUQS5MREdMX0NBTlZBU19NQiA9IGF0LkRFQlVHX0RBVEEuTERHTF9DQU5WQVNfTUIgfHwgMCwgYXQuREVCVUdfREFUQS5MREdMX0NBTlZBU19NQiArPSAoSyAtIFEpICogKHR0IC0gWikgKiA0OwogICAgICAgICAgICAgICAgdmFyIHJ0ID0gZXQuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgICAgICAgICAgIHJ0LnRyYW5zbGF0ZSgtUSwgLVopLCBudC5jbGlwKHJ0LCBnLCBuLCBZLCBPLCBELCBSLCBiLCBGLCBDLCBNLCBFLCBBLCBJLCB3LCB4KSwgcnQuZHJhd0ltYWdlKHQsIDAsIDApLCBpdC5nbF9jYWNoZUltYWdlW1BdID0gewogICAgICAgICAgICAgICAgICBjYWNoZUNhbnZhczogZXQsCiAgICAgICAgICAgICAgICAgIGNhY2hlQ29udGV4dDogcnQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB1LmRyYXdJbWFnZShpdC5nbF9jYWNoZUltYWdlW1BdLmNhY2hlQ2FudmFzLCBRLCBaKTsKICAgICAgICAgICAgfSBlbHNlIGF0LklHTk9SRV9DTElQIHx8IG50LmNsaXAodSwgZywgbiwgWSwgTywgRCwgUiwgYiwgRiwgQywgTSwgRSwgQSwgSSwgdywgeCksIGF0LlVTRV9BREpVU1RfVFJBTlNMQVRJT04gJiYgKFcgPSAwLCBqID0gbCwgcSA9IDAsIEogPSAkKSwgdS5kcmF3SW1hZ2UodCwgVywgcSwgaiAtIFcsIEogLSBxLCBXLCBxLCBqIC0gVywgSiAtIHEpOwoKICAgICAgICAgICAgdS5yZXN0b3JlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgXy5fJFJiKHQpOwogICAgICAgIH0KICAgICAgfSwgbnQuY2xpcCA9IGZ1bmN0aW9uICh0LCBpLCBlLCByLCBvLCBuLCBzLCBfLCBhLCBoLCBsLCAkLCB1LCBwLCBmLCBjKSB7CiAgICAgICAgZSA+IC4wMiA/IG50LmV4cGFuZENsaXAodCwgaSwgZSwgciwgbCwgJCwgdSwgcCwgZiwgYykgOiBudC5jbGlwV2l0aFRyYW5zZm9ybSh0LCBudWxsLCBvLCBuLCBzLCBfLCBhLCBoKTsKICAgICAgfSwgbnQuZXhwYW5kQ2xpcCA9IGZ1bmN0aW9uICh0LCBpLCBlLCByLCBvLCBuLCBzLCBfLCBhLCBoKSB7CiAgICAgICAgdmFyIGwgPSBzIC0gbywKICAgICAgICAgICAgJCA9IF8gLSBuLAogICAgICAgICAgICB1ID0gYSAtIG8sCiAgICAgICAgICAgIHAgPSBoIC0gbiwKICAgICAgICAgICAgZiA9IGwgKiBwIC0gJCAqIHUgPiAwID8gZSA6IC1lLAogICAgICAgICAgICBjID0gLSQsCiAgICAgICAgICAgIGQgPSBsLAogICAgICAgICAgICBnID0gYSAtIHMsCiAgICAgICAgICAgIHkgPSBoIC0gXywKICAgICAgICAgICAgbSA9IC15LAogICAgICAgICAgICBUID0gZywKICAgICAgICAgICAgUCA9IE1hdGguc3FydChnICogZyArIHkgKiB5KSwKICAgICAgICAgICAgUyA9IC1wLAogICAgICAgICAgICB2ID0gdSwKICAgICAgICAgICAgTCA9IE1hdGguc3FydCh1ICogdSArIHAgKiBwKSwKICAgICAgICAgICAgTSA9IG8gLSBmICogYyAvIHIsCiAgICAgICAgICAgIEUgPSBuIC0gZiAqIGQgLyByLAogICAgICAgICAgICBBID0gcyAtIGYgKiBjIC8gciwKICAgICAgICAgICAgSSA9IF8gLSBmICogZCAvIHIsCiAgICAgICAgICAgIHcgPSBzIC0gZiAqIG0gLyBQLAogICAgICAgICAgICB4ID0gXyAtIGYgKiBUIC8gUCwKICAgICAgICAgICAgTyA9IGEgLSBmICogbSAvIFAsCiAgICAgICAgICAgIEQgPSBoIC0gZiAqIFQgLyBQLAogICAgICAgICAgICBSID0gbyArIGYgKiBTIC8gTCwKICAgICAgICAgICAgYiA9IG4gKyBmICogdiAvIEwsCiAgICAgICAgICAgIEYgPSBhICsgZiAqIFMgLyBMLAogICAgICAgICAgICBDID0gaCArIGYgKiB2IC8gTCwKICAgICAgICAgICAgTiA9IG50Ll8kNTA7CiAgICAgICAgcmV0dXJuIG51bGwgIT0gaS5fJFAyKE4pICYmIChudC5jbGlwV2l0aFRyYW5zZm9ybSh0LCBOLCBNLCBFLCBBLCBJLCB3LCB4LCBPLCBELCBGLCBDLCBSLCBiKSwgITApOwogICAgICB9LCBudC5jbGlwV2l0aFRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0LCBpLCBlLCByLCBvLCBuLCBzLCBhKSB7CiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCA3KSByZXR1cm4gdm9pZCBfLl8kbGkoImVyciA6IEBMREdMLmNsaXAoKSIpOwogICAgICAgIGlmICghKGFyZ3VtZW50c1sxXSBpbnN0YW5jZW9mIGd0KSkgcmV0dXJuIHZvaWQgXy5fJGxpKCJlcnIgOiBhWzBdIGlzIF8kNiBMRFRyYW5zZm9ybSBATERHTC5jbGlwKCkiKTsKICAgICAgICB2YXIgaCA9IG50Ll8kQiwKICAgICAgICAgICAgbCA9IGksCiAgICAgICAgICAgICQgPSBhcmd1bWVudHM7CgogICAgICAgIGlmICh0LmJlZ2luUGF0aCgpLCBsKSB7CiAgICAgICAgICBsLl8kUFMoJFsyXSwgJFszXSwgaCksIHQubW92ZVRvKGhbMF0sIGhbMV0pOwoKICAgICAgICAgIGZvciAodmFyIHUgPSA0OyB1IDwgJC5sZW5ndGg7IHUgKz0gMikgewogICAgICAgICAgICBsLl8kUFMoJFt1XSwgJFt1ICsgMV0sIGgpLCB0LmxpbmVUbyhoWzBdLCBoWzFdKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdC5tb3ZlVG8oJFsyXSwgJFszXSk7CgogICAgICAgICAgZm9yICh2YXIgdSA9IDQ7IHUgPCAkLmxlbmd0aDsgdSArPSAyKSB7CiAgICAgICAgICAgIHQubGluZVRvKCRbdV0sICRbdSArIDFdKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHQuY2xpcCgpOwogICAgICB9LCBudC5jcmVhdGVDYW52YXMgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgICAgcmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ3aWR0aCIsIHQpLCBlLnNldEF0dHJpYnV0ZSgiaGVpZ2h0IiwgaSksIGUgfHwgXy5fJGxpKCJlcnIgOiAiICsgZSksIGU7CiAgICAgIH0sIG50LmR1bXBWYWx1ZXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZm9yICh2YXIgdCA9ICIiLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdCArPSAiWyIgKyBpICsgIl09ICIgKyBhcmd1bWVudHNbaV0udG9GaXhlZCgzKSArICIgLCAiOwogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2codCk7CiAgICAgIH0sIHN0LnByb3RvdHlwZS5fJEYwID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kVFQgPSB0Ll8kX1QoKSwgdGhpcy5fJExUID0gdC5fJF9UKCksIHRoaXMuXyRGUyA9IHQuXyRfVCgpLCB0aGlzLl8kd0wgPSB0Ll8kblAoKTsKICAgICAgfSwgc3QucHJvdG90eXBlLmdldE1pblZhbHVlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kVFQ7CiAgICAgIH0sIHN0LnByb3RvdHlwZS5nZXRNYXhWYWx1ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJExUOwogICAgICB9LCBzdC5wcm90b3R5cGUuZ2V0RGVmYXVsdFZhbHVlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kRlM7CiAgICAgIH0sIHN0LnByb3RvdHlwZS5nZXRQYXJhbUlEID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kd0w7CiAgICAgIH0sIF90LnByb3RvdHlwZS5fJHlvID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kQVQgJiYgIXRoaXMuXyRKUzsKICAgICAgfSwgX3QucHJvdG90eXBlLl8kaFMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuXyRBVCA9IHQ7CiAgICAgIH0sIF90LnByb3RvdHlwZS5fJEdUID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kZTA7CiAgICAgIH0sIF90LnByb3RvdHlwZS5fJGwyID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kSVAgPSB0OwogICAgICB9LCBfdC5wcm90b3R5cGUuZ2V0UGFydHNJbmRleCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJElQOwogICAgICB9LCBfdC5wcm90b3R5cGUuXyR4MiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJEpTOwogICAgICB9LCBfdC5wcm90b3R5cGUuXyRJYiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJEpTID0gdDsKICAgICAgfSwgX3QucHJvdG90eXBlLmdldFRvdGFsU2NhbGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudG90YWxTY2FsZTsKICAgICAgfSwgX3QucHJvdG90eXBlLnNldFRvdGFsU2NhbGVfbm90Rm9yQ2xpZW50ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLnRvdGFsU2NhbGUgPSB0OwogICAgICB9LCBfdC5wcm90b3R5cGUuZ2V0SW50ZXJwb2xhdGVkT3BhY2l0eSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJDdzOwogICAgICB9LCBfdC5wcm90b3R5cGUuc2V0SW50ZXJwb2xhdGVkT3BhY2l0eSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJDdzID0gdDsKICAgICAgfSwgX3QucHJvdG90eXBlLmdldFRvdGFsT3BhY2l0eSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMudG90YWxPcGFjaXR5OwogICAgICB9LCBfdC5wcm90b3R5cGUuc2V0VG90YWxPcGFjaXR5ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLnRvdGFsT3BhY2l0eSA9IHQ7CiAgICAgIH0sIGF0Ll8kMnMgPSAiMi4xLjAwXzEiLCBhdC5fJEtyID0gMjAxMDAxZTMsIGF0Ll8kc1AgPSAhMCwgYXQuXyRzbyA9ICEwLCBhdC5fJGNiID0gITEsIGF0Ll8kM1QgPSAhMCwgYXQuXyRUcyA9ICEwLCBhdC5fJGZiID0gITAsIGF0Ll8kdHMgPSAhMCwgYXQuTDJEX0RFRk9STUVSX0VYVEVORCA9ICEwLCBhdC5fJFdiID0gITE7CiAgICAgIGF0Ll8keXIgPSAhMSwgYXQuXyRacyA9ICExLCBhdC5MMkRfTk9fRVJST1IgPSAwLCBhdC5fJGk3ID0gMWUzLCBhdC5fJDlzID0gMTAwMSwgYXQuXyRlcyA9IDExMDAsIGF0Ll8kcjcgPSAyZTMsIGF0Ll8kMDcgPSAyMDAxLCBhdC5fJGI3ID0gMjAwMiwgYXQuXyRINyA9IDRlMywgYXQuTDJEX0NPTE9SX0JMRU5EX01PREVfTVVMVCA9IDAsIGF0LkwyRF9DT0xPUl9CTEVORF9NT0RFX0FERCA9IDEsIGF0LkwyRF9DT0xPUl9CTEVORF9NT0RFX0lOVEVSUE9MQVRFID0gMiwgYXQuXyQ2YiA9ICEwLCBhdC5fJGNUID0gMCwgYXQuY2xpcHBpbmdNYXNrQnVmZmVyU2l6ZSA9IDI1NiwgYXQuZ2xDb250ZXh0ID0gbmV3IEFycmF5KCksIGF0LmZyYW1lQnVmZmVycyA9IG5ldyBBcnJheSgpLCBhdC5mVGV4dHVyZSA9IG5ldyBBcnJheSgpLCBhdC5JR05PUkVfQ0xJUCA9ICExLCBhdC5JR05PUkVfRVhQQU5EID0gITEsIGF0LkVYUEFORF9XID0gMiwgYXQuVVNFX0FESlVTVF9UUkFOU0xBVElPTiA9ICEwLCBhdC5VU0VfQ0FOVkFTX1RSQU5TRk9STSA9ICEwLCBhdC5VU0VfQ0FDSEVEX1BPTFlHT05fSU1BR0UgPSAhMSwgYXQuREVCVUdfREFUQSA9IHt9LCBhdC5QUk9GSUxFX0lPU19TUEVFRCA9IHsKICAgICAgICBQUk9GSUxFX05BTUU6ICJpT1MgU3BlZWQiLAogICAgICAgIFVTRV9BREpVU1RfVFJBTlNMQVRJT046ICEwLAogICAgICAgIFVTRV9DQUNIRURfUE9MWUdPTl9JTUFHRTogITAsCiAgICAgICAgRVhQQU5EX1c6IDQKICAgICAgfSwgYXQuUFJPRklMRV9JT1NfUVVBTElUWSA9IHsKICAgICAgICBQUk9GSUxFX05BTUU6ICJpT1MgSGlRIiwKICAgICAgICBVU0VfQURKVVNUX1RSQU5TTEFUSU9OOiAhMCwKICAgICAgICBVU0VfQ0FDSEVEX1BPTFlHT05fSU1BR0U6ICExLAogICAgICAgIEVYUEFORF9XOiAyCiAgICAgIH0sIGF0LlBST0ZJTEVfSU9TX0RFRkFVTFQgPSBhdC5QUk9GSUxFX0lPU19RVUFMSVRZLCBhdC5QUk9GSUxFX0FORFJPSUQgPSB7CiAgICAgICAgUFJPRklMRV9OQU1FOiAiQW5kcm9pZCIsCiAgICAgICAgVVNFX0FESlVTVF9UUkFOU0xBVElPTjogITEsCiAgICAgICAgVVNFX0NBQ0hFRF9QT0xZR09OX0lNQUdFOiAhMSwKICAgICAgICBFWFBBTkRfVzogMgogICAgICB9LCBhdC5QUk9GSUxFX0RFU0tUT1AgPSB7CiAgICAgICAgUFJPRklMRV9OQU1FOiAiRGVza3RvcCIsCiAgICAgICAgVVNFX0FESlVTVF9UUkFOU0xBVElPTjogITEsCiAgICAgICAgVVNFX0NBQ0hFRF9QT0xZR09OX0lNQUdFOiAhMSwKICAgICAgICBFWFBBTkRfVzogMgogICAgICB9LCBhdC5pbml0UHJvZmlsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBFdC5pc0lPUygpID8gYXQuc2V0dXBQcm9maWxlKGF0LlBST0ZJTEVfSU9TX0RFRkFVTFQpIDogRXQuaXNBbmRyb2lkKCkgPyBhdC5zZXR1cFByb2ZpbGUoYXQuUFJPRklMRV9BTkRST0lEKSA6IGF0LnNldHVwUHJvZmlsZShhdC5QUk9GSUxFX0RFU0tUT1ApOwogICAgICB9LCBhdC5zZXR1cFByb2ZpbGUgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIGlmICgibnVtYmVyIiA9PSB0eXBlb2YgdCkgc3dpdGNoICh0KSB7CiAgICAgICAgICBjYXNlIDk5MDE6CiAgICAgICAgICAgIHQgPSBhdC5QUk9GSUxFX0lPU19TUEVFRDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA5OTAyOgogICAgICAgICAgICB0ID0gYXQuUFJPRklMRV9JT1NfUVVBTElUWTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA5OTAzOgogICAgICAgICAgICB0ID0gYXQuUFJPRklMRV9JT1NfREVGQVVMVDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA5OTA0OgogICAgICAgICAgICB0ID0gYXQuUFJPRklMRV9BTkRST0lEOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDk5MDU6CiAgICAgICAgICAgIHQgPSBhdC5QUk9GSUxFX0RFU0tUT1A7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGFsZXJ0KCJwcm9maWxlIF8kNiBfJFVpIDogIiArIHQpOwogICAgICAgIH0KICAgICAgICBhcmd1bWVudHMubGVuZ3RoIDwgMiAmJiAoaSA9ICEwKSwgaTsgLy8gVE9ETwogICAgICAgIC8vIGk7ICYmIGNvbnNvbGUubG9nKCJwcm9maWxlIDogIiArIHQuUFJPRklMRV9OQU1FKTsKCiAgICAgICAgZm9yICh2YXIgZSBpbiB0KSB7CiAgICAgICAgICBhdFtlXSA9IHRbZV0sIGk7CiAgICAgICAgfSAvLyBUT0RPCiAgICAgICAgLy8gaSAmJiBjb25zb2xlLmxvZygiICBbIiArIGUgKyAiXSA9ICIgKyB0W2VdKQoKICAgICAgfSwgYXQuaW5pdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoYXQuXyQ2YikgewogICAgICAgICAgLy8gVE9ETwogICAgICAgICAgLy9jb25zb2xlLmxvZygiTGl2ZTJEICVzIiwgYXQuXyQycyksCiAgICAgICAgICBhdC5fJDZiID0gITE7CiAgICAgICAgICAhMCwgYXQuaW5pdFByb2ZpbGUoKTsKICAgICAgICB9CiAgICAgIH0sIGF0LmdldFZlcnNpb25TdHIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGF0Ll8kMnM7CiAgICAgIH0sIGF0LmdldFZlcnNpb25ObyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gYXQuXyRLcjsKICAgICAgfSwgYXQuXyRzVCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgYXQuXyRjVCA9IHQ7CiAgICAgIH0sIGF0LmdldEVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0ID0gYXQuXyRjVDsKICAgICAgICByZXR1cm4gYXQuXyRjVCA9IDAsIHQ7CiAgICAgIH0sIGF0LmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgYXQuZ2xDb250ZXh0ID0gW10sIGF0LmZyYW1lQnVmZmVycyA9IFtdLCBhdC5mVGV4dHVyZSA9IFtdOwogICAgICB9LCBhdC5zZXRHTCA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdmFyIGUgPSBpIHx8IDA7CiAgICAgICAgYXQuZ2xDb250ZXh0W2VdID0gdDsKICAgICAgfSwgYXQuZ2V0R0wgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiBhdC5nbENvbnRleHRbdF07CiAgICAgIH0sIGF0LnNldENsaXBwaW5nTWFza0J1ZmZlclNpemUgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGF0LmNsaXBwaW5nTWFza0J1ZmZlclNpemUgPSB0OwogICAgICB9LCBhdC5nZXRDbGlwcGluZ01hc2tCdWZmZXJTaXplID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBhdC5jbGlwcGluZ01hc2tCdWZmZXJTaXplOwogICAgICB9LCBhdC5kZWxldGVCdWZmZXIgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGF0LmdldEdMKHQpLmRlbGV0ZUZyYW1lYnVmZmVyKGF0LmZyYW1lQnVmZmVyc1t0XS5mcmFtZWJ1ZmZlciksIGRlbGV0ZSBhdC5mcmFtZUJ1ZmZlcnNbdF0sIGRlbGV0ZSBhdC5nbENvbnRleHRbdF07CiAgICAgIH0sIGh0Ll8kcjIgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiB0IDwgMCA/IDAgOiB0ID4gMSA/IDEgOiAuNSAtIC41ICogTWF0aC5jb3ModCAqIEx0LlBJX0YpOwogICAgICB9LCBsdC5fJGZyID0gLTEsIGx0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJGliOwogICAgICB9LCAkdC5wcm90b3R5cGUgPSBuZXcgVygpLCAkdC5fJDQyID0gMCwgJHQuXyRPcyA9IDMwLCAkdC5fJG1zID0gMCwgJHQuXyRucyA9IDEsICR0Ll8kX3MgPSAyLCAkdC5fJGdUID0gbmV3IEFycmF5KCksICR0LnByb3RvdHlwZS5fJF9TID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLl8kTFAgPSB0OwogICAgICB9LCAkdC5wcm90b3R5cGUuZ2V0VGV4dHVyZU5vID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kTFA7CiAgICAgIH0sICR0LnByb3RvdHlwZS5fJFpMID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kUWk7CiAgICAgIH0sICR0LnByb3RvdHlwZS5fJEgyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kSlA7CiAgICAgIH0sICR0LnByb3RvdHlwZS5nZXROdW1Qb2ludHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRkMDsKICAgICAgfSwgJHQucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFcuXyR3YjsKICAgICAgfSwgJHQucHJvdG90eXBlLl8kQjIgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgIHZhciByID0gaSwKICAgICAgICAgICAgbyA9IG51bGwgIT0gci5fJGhyID8gci5fJGhyIDogci5fJENyOwoKICAgICAgICBzd2l0Y2ggKFUuXyRkbykgewogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGNhc2UgVS5fJE1zOgogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIl8kTCBfJHJvICIpOwoKICAgICAgICAgIGNhc2UgVS5fJFFzOgogICAgICAgICAgICBmb3IgKHZhciBuID0gdGhpcy5fJGQwIC0gMTsgbiA+PSAwOyAtLW4pIHsKICAgICAgICAgICAgICBvW24gKiBVLl8kTm8gKyA0XSA9IGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICB9LCAkdC5wcm90b3R5cGUuXyR6UCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLl8kR1MgPSBuZXcgRCgpLCB0aGlzLl8kR1MuXyR6UCgpOwogICAgICB9LCAkdC5wcm90b3R5cGUuXyRGMCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgVy5wcm90b3R5cGUuXyRGMC5jYWxsKHRoaXMsIHQpLCB0aGlzLl8kTFAgPSB0Ll8kNkwoKSwgdGhpcy5fJGQwID0gdC5fJDZMKCksIHRoaXMuXyRZbyA9IHQuXyQ2TCgpOwoKICAgICAgICB2YXIgaSA9IHQuXyRuUCgpOwoKICAgICAgICB0aGlzLl8kQlAgPSBuZXcgSW50MTZBcnJheSgzICogdGhpcy5fJFlvKTsKCiAgICAgICAgZm9yICh2YXIgZSA9IDMgKiB0aGlzLl8kWW8gLSAxOyBlID49IDA7IC0tZSkgewogICAgICAgICAgdGhpcy5fJEJQW2VdID0gaVtlXTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLl8kRW8gPSB0Ll8kblAoKSwgdGhpcy5fJFFpID0gdC5fJG5QKCksIHQuZ2V0Rm9ybWF0VmVyc2lvbigpID49IEcuXyRzNykgewogICAgICAgICAgaWYgKHRoaXMuXyRKUCA9IHQuXyQ2TCgpLCAwICE9IHRoaXMuXyRKUCkgewogICAgICAgICAgICBpZiAoMCAhPSAoMSAmIHRoaXMuXyRKUCkpIHsKICAgICAgICAgICAgICB2YXIgciA9IHQuXyQ2TCgpOwoKICAgICAgICAgICAgICBudWxsID09IHRoaXMuXyQ1UCAmJiAodGhpcy5fJDVQID0gbmV3IE9iamVjdCgpKSwgdGhpcy5fJDVQLl8kSGIgPSBwYXJzZUludChyKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgMCAhPSAodGhpcy5fJEpQICYgJHQuXyRPcykgPyB0aGlzLl8kNnMgPSAodGhpcy5fJEpQICYgJHQuXyRPcykgPj4gMSA6IHRoaXMuXyQ2cyA9ICR0Ll8kbXMsIDAgIT0gKDMyICYgdGhpcy5fJEpQKSAmJiAodGhpcy5jdWxsaW5nID0gITEpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB0aGlzLl8kSlAgPSAwOwogICAgICB9LCAkdC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGkgPSBuZXcgdXQodGhpcyksCiAgICAgICAgICAgIGUgPSB0aGlzLl8kZDAgKiBVLl8kTm8sCiAgICAgICAgICAgIHIgPSB0aGlzLl8kMzIoKTsKCiAgICAgICAgc3dpdGNoIChudWxsICE9IGkuXyRDciAmJiAoaS5fJENyID0gbnVsbCksIGkuXyRDciA9IG5ldyBGbG9hdDMyQXJyYXkoZSksIG51bGwgIT0gaS5fJGhyICYmIChpLl8kaHIgPSBudWxsKSwgaS5fJGhyID0gciA/IG5ldyBGbG9hdDMyQXJyYXkoZSkgOiBudWxsLCBVLl8kZG8pIHsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBjYXNlIFUuXyRNczoKICAgICAgICAgICAgaWYgKFUuXyRMcykgZm9yICh2YXIgbyA9IHRoaXMuXyRkMCAtIDE7IG8gPj0gMDsgLS1vKSB7CiAgICAgICAgICAgICAgdmFyIG4gPSBvIDw8IDE7CiAgICAgICAgICAgICAgdGhpcy5fJFFpW24gKyAxXSA9IDEgLSB0aGlzLl8kUWlbbiArIDFdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgVS5fJFFzOgogICAgICAgICAgICBmb3IgKHZhciBvID0gdGhpcy5fJGQwIC0gMTsgbyA+PSAwOyAtLW8pIHsKICAgICAgICAgICAgICB2YXIgbiA9IG8gPDwgMSwKICAgICAgICAgICAgICAgICAgcyA9IG8gKiBVLl8kTm8sCiAgICAgICAgICAgICAgICAgIF8gPSB0aGlzLl8kUWlbbl0sCiAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLl8kUWlbbiArIDFdOwogICAgICAgICAgICAgIGkuXyRDcltzXSA9IF8sIGkuXyRDcltzICsgMV0gPSBhLCBpLl8kQ3JbcyArIDRdID0gMCwgciAmJiAoaS5fJGhyW3NdID0gXywgaS5fJGhyW3MgKyAxXSA9IGEsIGkuXyRocltzICsgNF0gPSAwKTsKICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIHJldHVybiBpOwogICAgICB9LCAkdC5wcm90b3R5cGUuXyROciA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdmFyIGUgPSBpOwoKICAgICAgICBpZiAodGhpcyAhPSBlLl8kR1QoKSAmJiBjb25zb2xlLmxvZygiIyMjIGFzc2VydCEhICMjIyAiKSwgdGhpcy5fJEdTLl8kVXIodCkgJiYgKFcucHJvdG90eXBlLl8kTnIuY2FsbCh0aGlzLCB0LCBlKSwgIWUuXyRJU1swXSkpIHsKICAgICAgICAgIHZhciByID0gJHQuXyRnVDsKICAgICAgICAgIHJbMF0gPSAhMSwgdi5fJFZyKHQsIHRoaXMuXyRHUywgciwgdGhpcy5fJGQwLCB0aGlzLl8kRW8sIGUuXyRDciwgVS5fJGkyLCBVLl8kTm8pOwogICAgICAgIH0KICAgICAgfSwgJHQucHJvdG90eXBlLl8kMmIgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICB0aGlzICE9IGkuXyRHVCgpICYmIGNvbnNvbGUubG9nKCIjIyMgYXNzZXJ0ISEgIyMjICIpOwogICAgICAgICAgdmFyIGUgPSAhMTsKICAgICAgICAgIGkuXyRJU1swXSAmJiAoZSA9ICEwKTsKICAgICAgICAgIHZhciByID0gaTsKCiAgICAgICAgICBpZiAoIWUgJiYgKFcucHJvdG90eXBlLl8kMmIuY2FsbCh0aGlzLCB0KSwgdGhpcy5fJDMyKCkpKSB7CiAgICAgICAgICAgIHZhciBvID0gdGhpcy5nZXRUYXJnZXRCYXNlRGF0YUlEKCk7CiAgICAgICAgICAgIGlmIChyLl8kOHIgPT0gVy5fJHVyICYmIChyLl8kOHIgPSB0LmdldEJhc2VEYXRhSW5kZXgobykpLCByLl8kOHIgPCAwKSBhdC5fJHNvICYmIF8uXyRsaSgiXyRMIF8kMFAgXyRHIDo6ICVzIiwgbyk7ZWxzZSB7CiAgICAgICAgICAgICAgdmFyIG4gPSB0LmdldEJhc2VEYXRhKHIuXyQ4ciksCiAgICAgICAgICAgICAgICAgIHMgPSB0Ll8kcTIoci5fJDhyKTsKCiAgICAgICAgICAgICAgbnVsbCA9PSBuIHx8IHMuXyR4MigpID8gci5fJEFUID0gITEgOiAobi5fJG5iKHQsIHMsIHIuXyRDciwgci5fJGhyLCB0aGlzLl8kZDAsIFUuXyRpMiwgVS5fJE5vKSwgci5fJEFUID0gITApLCByLmJhc2VPcGFjaXR5ID0gcy5nZXRUb3RhbE9wYWNpdHkoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgIHRocm93IHQ7CiAgICAgICAgfQogICAgICB9LCAkdC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICAgICAgaWYgKHRoaXMgIT0gZS5fJEdUKCkgJiYgY29uc29sZS5sb2coIiMjIyBhc3NlcnQhISAjIyMgIiksICFlLl8kSVNbMF0pIHsKICAgICAgICAgIHZhciByID0gZSwKICAgICAgICAgICAgICBvID0gdGhpcy5fJExQOwogICAgICAgICAgbyA8IDAgJiYgKG8gPSAxKTsKICAgICAgICAgIHZhciBuID0gdGhpcy5nZXRPcGFjaXR5KGksIHIpICogZS5fJFZTICogZS5iYXNlT3BhY2l0eSwKICAgICAgICAgICAgICBzID0gbnVsbCAhPSByLl8kaHIgPyByLl8kaHIgOiByLl8kQ3I7CiAgICAgICAgICB0LnNldENsaXBCdWZQcmVfY2xpcENvbnRleHRGb3JEcmF3KGUuY2xpcEJ1ZlByZV9jbGlwQ29udGV4dCksIHQuXyRXUCh0aGlzLmN1bGxpbmcpLCB0Ll8kVW8obywgMyAqIHRoaXMuXyRZbywgdGhpcy5fJEJQLCBzLCB0aGlzLl8kUWksIG4sIHRoaXMuXyQ2cywgcik7CiAgICAgICAgfQogICAgICB9LCAkdC5wcm90b3R5cGUuZHVtcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygiICBfJHlpKCAlZCApICwgXyRkMCggJWQgKSAsIF8kWW8oICVkICkgXG4iLCB0aGlzLl8kTFAsIHRoaXMuXyRkMCwgdGhpcy5fJFlvKSwgY29uc29sZS5sb2coIiAgXyRPaSBfJGRpID0geyAiKTsKCiAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLl8kQlAubGVuZ3RoOyB0KyspIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCIlNWQgLCIsIHRoaXMuXyRCUFt0XSk7CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygiXG4gIF8kNWkgXyQzMCIpOwoKICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRoaXMuXyRFby5sZW5ndGg7IHQrKykgewogICAgICAgICAgY29uc29sZS5sb2coIlxuICAgIF8kMzBbJWRdID0gIiwgdCk7CgogICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuXyRFb1t0XSwgZSA9IDA7IGUgPCBpLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCIlNi4yZiwgIiwgaVtlXSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygiXG4iKTsKICAgICAgfSwgJHQucHJvdG90eXBlLl8kNzIgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiBudWxsID09IHRoaXMuXyQ1UCA/IG51bGwgOiB0aGlzLl8kNVBbdF07CiAgICAgIH0sICR0LnByb3RvdHlwZS5nZXRJbmRleEFycmF5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kQlA7CiAgICAgIH0sIHV0LnByb3RvdHlwZSA9IG5ldyBNdCgpLCB1dC5wcm90b3R5cGUuZ2V0VHJhbnNmb3JtZWRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5fJGhyID8gdGhpcy5fJGhyIDogdGhpcy5fJENyOwogICAgICB9LCBwdC5wcm90b3R5cGUuXyRIVCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy54ID0gdC54LCB0aGlzLnkgPSB0Lnk7CiAgICAgIH0sIHB0LnByb3RvdHlwZS5fJEhUID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICB0aGlzLnggPSB0LCB0aGlzLnkgPSBpOwogICAgICB9LCBmdC5wcm90b3R5cGUgPSBuZXcgaSgpLCBmdC5sb2FkTW9kZWwgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBlID0gbmV3IGZ0KCk7CiAgICAgICAgcmV0dXJuIGkuXyQ2MihlLCB0KSwgZTsKICAgICAgfSwgZnQubG9hZE1vZGVsID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICB2YXIgciA9IGUgfHwgMCwKICAgICAgICAgICAgbyA9IG5ldyBmdChyKTsKICAgICAgICByZXR1cm4gaS5fJDYyKG8sIHQpLCBvOwogICAgICB9LCBmdC5fJHRvID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBuZXcgZnQoKTsKICAgICAgfSwgZnQuXyRlciA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGkgPSBuZXcgXyQ1KCIuLi9fJF9yL18kdDAvXyRSaS9fJF9QLl8kZCIpOwogICAgICAgIGlmICgwID09IGkuZXhpc3RzKCkpIHRocm93IG5ldyBfJGxzKCJfJHQwIF8kXyBfJDYgXyRVaSA6OiAiICsgaS5fJFBMKCkpOwoKICAgICAgICBmb3IgKHZhciBlID0gWyIuLi9fJF9yL18kdDAvXyRSaS9fJF9QLjUxMi9fJENQLl8kMSIsICIuLi9fJF9yL18kdDAvXyRSaS9fJF9QLjUxMi9fJHZQLl8kMSIsICIuLi9fJF9yL18kdDAvXyRSaS9fJF9QLjUxMi9fJEVQLl8kMSIsICIuLi9fJF9yL18kdDAvXyRSaS9fJF9QLjUxMi9fJHBQLl8kMSJdLCByID0gZnQubG9hZE1vZGVsKGkuXyQzYigpKSwgbyA9IDA7IG8gPCBlLmxlbmd0aDsgbysrKSB7CiAgICAgICAgICB2YXIgbiA9IG5ldyBfJDUoZVtvXSk7CiAgICAgICAgICBpZiAoMCA9PSBuLmV4aXN0cygpKSB0aHJvdyBuZXcgXyRscygiXyR0MCBfJF8gXyQ2IF8kVWkgOjogIiArIG4uXyRQTCgpKTsKICAgICAgICAgIHIuc2V0VGV4dHVyZShvLCBfJG5MLl8kX28odCwgbi5fJDNiKCkpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByOwogICAgICB9LCBmdC5wcm90b3R5cGUuc2V0R0wgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGF0LnNldEdMKHQpOwogICAgICB9LCBmdC5wcm90b3R5cGUuc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLmRyYXdQYXJhbVdlYkdMLnNldFRyYW5zZm9ybSh0KTsKICAgICAgfSwgZnQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLl8kNVMudXBkYXRlKCksIHRoaXMuXyQ1Uy5wcmVEcmF3KHRoaXMuZHJhd1BhcmFtV2ViR0wpOwogICAgICB9LCBmdC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLl8kNVMuZHJhdyh0aGlzLmRyYXdQYXJhbVdlYkdMKTsKICAgICAgfSwgZnQucHJvdG90eXBlLl8kSzIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5kcmF3UGFyYW1XZWJHTC5fJEsyKCk7CiAgICAgIH0sIGZ0LnByb3RvdHlwZS5zZXRUZXh0dXJlID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICBudWxsID09IHRoaXMuZHJhd1BhcmFtV2ViR0wgJiYgXy5fJGxpKCJfJFlpIGZvciBRVCBfJGtpIC8gXyRYUygpIGlzIF8kNiBfJHVpISEiKSwgdGhpcy5kcmF3UGFyYW1XZWJHTC5zZXRUZXh0dXJlKHQsIGkpOwogICAgICB9LCBmdC5wcm90b3R5cGUuc2V0VGV4dHVyZSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgbnVsbCA9PSB0aGlzLmRyYXdQYXJhbVdlYkdMICYmIF8uXyRsaSgiXyRZaSBmb3IgUVQgXyRraSAvIF8kWFMoKSBpcyBfJDYgXyR1aSEhIiksIHRoaXMuZHJhd1BhcmFtV2ViR0wuc2V0VGV4dHVyZSh0LCBpKTsKICAgICAgfSwgZnQucHJvdG90eXBlLl8kUnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZHJhd1BhcmFtV2ViR0wuXyRScygpOwogICAgICB9LCBmdC5wcm90b3R5cGUuXyREcyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5kcmF3UGFyYW1XZWJHTC5fJERzKHQpOwogICAgICB9LCBmdC5wcm90b3R5cGUuZ2V0RHJhd1BhcmFtID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmRyYXdQYXJhbVdlYkdMOwogICAgICB9LCBmdC5wcm90b3R5cGUuc2V0TWF0cml4ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLmRyYXdQYXJhbVdlYkdMLnNldE1hdHJpeCh0KTsKICAgICAgfSwgZnQucHJvdG90eXBlLnNldFByZW11bHRpcGxpZWRBbHBoYSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5kcmF3UGFyYW1XZWJHTC5zZXRQcmVtdWx0aXBsaWVkQWxwaGEodCk7CiAgICAgIH0sIGZ0LnByb3RvdHlwZS5pc1ByZW11bHRpcGxpZWRBbHBoYSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5kcmF3UGFyYW1XZWJHTC5pc1ByZW11bHRpcGxpZWRBbHBoYSgpOwogICAgICB9LCBmdC5wcm90b3R5cGUuc2V0QW5pc290cm9weSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5kcmF3UGFyYW1XZWJHTC5zZXRBbmlzb3Ryb3B5KHQpOwogICAgICB9LCBmdC5wcm90b3R5cGUuZ2V0QW5pc290cm9weSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5kcmF3UGFyYW1XZWJHTC5nZXRBbmlzb3Ryb3B5KCk7CiAgICAgIH0sIGN0LnByb3RvdHlwZS5fJHRiID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLm1vdGlvbnM7CiAgICAgIH0sIGN0LnByb3RvdHlwZS5zdGFydE1vdGlvbiA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgZm9yICh2YXIgZSA9IG51bGwsIHIgPSB0aGlzLm1vdGlvbnMubGVuZ3RoLCBvID0gMDsgbyA8IHI7ICsrbykgewogICAgICAgICAgbnVsbCAhPSAoZSA9IHRoaXMubW90aW9uc1tvXSkgJiYgKGUuXyRxUyhlLl8kdzAuZ2V0RmFkZU91dCgpKSwgdGhpcy5fJGViICYmIF8uXyRKaSgiTW90aW9uUXVldWVNYW5hZ2VyW3NpemU6JTJkXS0+c3RhcnRNb3Rpb24oKSAvIHN0YXJ0IF8kSyBfJDMgKG0lZClcbiIsIHIsIGUuXyRzcikpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIC0xOwogICAgICAgIGUgPSBuZXcgZHQoKSwgZS5fJHcwID0gdCwgdGhpcy5tb3Rpb25zLnB1c2goZSk7CiAgICAgICAgdmFyIG4gPSBlLl8kc3I7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRlYiAmJiBfLl8kSmkoIk1vdGlvblF1ZXVlTWFuYWdlcltzaXplOiUyZF0tPnN0YXJ0TW90aW9uKCkgLyBuZXcgXyR3MCAobSVkKVxuIiwgciwgbiksIG47CiAgICAgIH0sIGN0LnByb3RvdHlwZS51cGRhdGVQYXJhbSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAodmFyIGkgPSAhMSwgZSA9IDA7IGUgPCB0aGlzLm1vdGlvbnMubGVuZ3RoOyBlKyspIHsKICAgICAgICAgICAgdmFyIHIgPSB0aGlzLm1vdGlvbnNbZV07CgogICAgICAgICAgICBpZiAobnVsbCAhPSByKSB7CiAgICAgICAgICAgICAgdmFyIG8gPSByLl8kdzA7CiAgICAgICAgICAgICAgbnVsbCAhPSBvID8gKG8udXBkYXRlUGFyYW0odCwgciksIGkgPSAhMCwgci5pc0ZpbmlzaGVkKCkgJiYgKHRoaXMuXyRlYiAmJiBfLl8kSmkoIk1vdGlvblF1ZXVlTWFuYWdlcltzaXplOiUyZF0tPnVwZGF0ZVBhcmFtKCkgLyBfJFQwIF8kdzAgKG0lZClcbiIsIHRoaXMubW90aW9ucy5sZW5ndGggLSAxLCByLl8kc3IpLCB0aGlzLm1vdGlvbnMuc3BsaWNlKGUsIDEpLCBlLS0pKSA6ICh0aGlzLm1vdGlvbnMgPSB0aGlzLm1vdGlvbnMuc3BsaWNlKGUsIDEpLCBlLS0pOwogICAgICAgICAgICB9IGVsc2UgdGhpcy5tb3Rpb25zLnNwbGljZShlLCAxKSwgZS0tOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBpOwogICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgIHJldHVybiBfLl8kbGkodCksICEwOwogICAgICAgIH0KICAgICAgfSwgY3QucHJvdG90eXBlLmlzRmluaXNoZWQgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDEpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tb3Rpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpcy5tb3Rpb25zW2ldOwogICAgICAgICAgICBpZiAobnVsbCAhPSBlICYmIGUuXyRzciA9PSB0ICYmICFlLmlzRmluaXNoZWQoKSkgcmV0dXJuICExOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tb3Rpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgZSA9IHRoaXMubW90aW9uc1tpXTsKCiAgICAgICAgICBpZiAobnVsbCAhPSBlKSB7CiAgICAgICAgICAgIGlmIChudWxsICE9IGUuXyR3MCkgewogICAgICAgICAgICAgIGlmICghZS5pc0ZpbmlzaGVkKCkpIHJldHVybiAhMTsKICAgICAgICAgICAgfSBlbHNlIHRoaXMubW90aW9ucy5zcGxpY2UoaSwgMSksIGktLTsKICAgICAgICAgIH0gZWxzZSB0aGlzLm1vdGlvbnMuc3BsaWNlKGksIDEpLCBpLS07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gITA7CiAgICAgIH0sIGN0LnByb3RvdHlwZS5zdG9wQWxsTW90aW9ucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRoaXMubW90aW9ucy5sZW5ndGg7IHQrKykgewogICAgICAgICAgdmFyIGkgPSB0aGlzLm1vdGlvbnNbdF07CgogICAgICAgICAgaWYgKG51bGwgIT0gaSkgewogICAgICAgICAgICBpLl8kdzA7CiAgICAgICAgICAgIHRoaXMubW90aW9ucy5zcGxpY2UodCwgMSksIHQtLTsKICAgICAgICAgIH0gZWxzZSB0aGlzLm1vdGlvbnMuc3BsaWNlKHQsIDEpLCB0LS07CiAgICAgICAgfQogICAgICB9LCBjdC5wcm90b3R5cGUuXyRaciA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJGViID0gdDsKICAgICAgfSwgY3QucHJvdG90eXBlLl8kZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygiLS0gXyRSIC0tXG4iKTsKCiAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLm1vdGlvbnMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgIHZhciBpID0gdGhpcy5tb3Rpb25zW3RdLAogICAgICAgICAgICAgIGUgPSBpLl8kdzA7CiAgICAgICAgICBjb25zb2xlLmxvZygiTW90aW9uUXVldWVFbnRbJWRdIDo6ICVzXG4iLCB0aGlzLm1vdGlvbnMubGVuZ3RoLCBlLnRvU3RyaW5nKCkpOwogICAgICAgIH0KICAgICAgfSwgZHQuXyRHcyA9IDAsIGR0LnByb3RvdHlwZS5pc0ZpbmlzaGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kOUw7CiAgICAgIH0sIGR0LnByb3RvdHlwZS5fJHFTID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IHcuZ2V0VXNlclRpbWVNU2VjKCksCiAgICAgICAgICAgIGUgPSBpICsgdDsKICAgICAgICAodGhpcy5fJERvIDwgMCB8fCBlIDwgdGhpcy5fJERvKSAmJiAodGhpcy5fJERvID0gZSk7CiAgICAgIH0sIGR0LnByb3RvdHlwZS5fJEJzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kc3I7CiAgICAgIH0sIGd0LnByb3RvdHlwZS5zZXRDb250ZXh0ID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgaSA9IHRoaXMubTsKICAgICAgICB0LnRyYW5zZm9ybShpWzBdLCBpWzFdLCBpWzNdLCBpWzRdLCBpWzZdLCBpWzddKTsKICAgICAgfSwgZ3QucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIHQgPSAiTERUcmFuc2Zvcm0geyAiLCBpID0gMDsgaSA8IDk7IGkrKykgewogICAgICAgICAgdCArPSB0aGlzLm1baV0udG9GaXhlZCgyKSArICIgLCI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdCArPSAiIH0iOwogICAgICB9LCBndC5wcm90b3R5cGUuaWRlbnRpdHkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHQgPSB0aGlzLm07CiAgICAgICAgdFswXSA9IHRbNF0gPSB0WzhdID0gMSwgdFsxXSA9IHRbMl0gPSB0WzNdID0gdFs1XSA9IHRbNl0gPSB0WzddID0gMDsKICAgICAgfSwgZ3QucHJvdG90eXBlLl8kUFMgPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgICAgIG51bGwgPT0gZSAmJiAoZSA9IG5ldyBBcnJheSgwLCAwKSk7CiAgICAgICAgdmFyIHIgPSB0aGlzLm07CiAgICAgICAgcmV0dXJuIGVbMF0gPSByWzBdICogdCArIHJbM10gKiBpICsgcls2XSwgZVsxXSA9IHJbMV0gKiB0ICsgcls0XSAqIGkgKyByWzddLCBlOwogICAgICB9LCBndC5wcm90b3R5cGUuXyRQMiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdCB8fCAodCA9IG5ldyBndCgpKTsKICAgICAgICB2YXIgaSA9IHRoaXMubSwKICAgICAgICAgICAgZSA9IGlbMF0sCiAgICAgICAgICAgIHIgPSBpWzFdLAogICAgICAgICAgICBvID0gaVsyXSwKICAgICAgICAgICAgbiA9IGlbM10sCiAgICAgICAgICAgIHMgPSBpWzRdLAogICAgICAgICAgICBfID0gaVs1XSwKICAgICAgICAgICAgYSA9IGlbNl0sCiAgICAgICAgICAgIGggPSBpWzddLAogICAgICAgICAgICBsID0gaVs4XSwKICAgICAgICAgICAgJCA9IGUgKiBzICogbCArIHIgKiBfICogYSArIG8gKiBuICogaCAtIGUgKiBfICogaCAtIG8gKiBzICogYSAtIHIgKiBuICogbDsKICAgICAgICBpZiAoMCA9PSAkKSByZXR1cm4gbnVsbDsKICAgICAgICB2YXIgdSA9IDEgLyAkOwogICAgICAgIHJldHVybiB0Lm1bMF0gPSB1ICogKHMgKiBsIC0gaCAqIF8pLCB0Lm1bMV0gPSB1ICogKGggKiBvIC0gciAqIGwpLCB0Lm1bMl0gPSB1ICogKHIgKiBfIC0gcyAqIG8pLCB0Lm1bM10gPSB1ICogKGEgKiBfIC0gbiAqIGwpLCB0Lm1bNF0gPSB1ICogKGUgKiBsIC0gYSAqIG8pLCB0Lm1bNV0gPSB1ICogKG4gKiBvIC0gZSAqIF8pLCB0Lm1bNl0gPSB1ICogKG4gKiBoIC0gYSAqIHMpLCB0Lm1bN10gPSB1ICogKGEgKiByIC0gZSAqIGgpLCB0Lm1bOF0gPSB1ICogKGUgKiBzIC0gbiAqIHIpLCB0OwogICAgICB9LCBndC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICBudWxsID09IGUgJiYgKGUgPSBuZXcgQXJyYXkoMCwgMCkpOwogICAgICAgIHZhciByID0gdGhpcy5tOwogICAgICAgIHJldHVybiBlWzBdID0gclswXSAqIHQgKyByWzNdICogaSArIHJbNl0sIGVbMV0gPSByWzFdICogdCArIHJbNF0gKiBpICsgcls3XSwgZTsKICAgICAgfSwgZ3QucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgdmFyIGUgPSB0aGlzLm07CiAgICAgICAgZVs2XSA9IGVbMF0gKiB0ICsgZVszXSAqIGkgKyBlWzZdLCBlWzddID0gZVsxXSAqIHQgKyBlWzRdICogaSArIGVbN10sIGVbOF0gPSBlWzJdICogdCArIGVbNV0gKiBpICsgZVs4XTsKICAgICAgfSwgZ3QucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICB2YXIgZSA9IHRoaXMubTsKICAgICAgICBlWzBdICo9IHQsIGVbMV0gKj0gdCwgZVsyXSAqPSB0LCBlWzNdICo9IGksIGVbNF0gKj0gaSwgZVs1XSAqPSBpOwogICAgICB9LCBndC5wcm90b3R5cGUuc2hlYXIgPSBmdW5jdGlvbiAodCwgaSkgewogICAgICAgIHZhciBlID0gdGhpcy5tLAogICAgICAgICAgICByID0gZVswXSArIGVbM10gKiBpLAogICAgICAgICAgICBvID0gZVsxXSArIGVbNF0gKiBpLAogICAgICAgICAgICBuID0gZVsyXSArIGVbNV0gKiBpOwogICAgICAgIGVbM10gPSBlWzBdICogdCArIGVbM10sIGVbNF0gPSBlWzFdICogdCArIGVbNF0sIGVbNV0gPSBlWzJdICogdCArIGVbNV0sIGVbMF0gPSByLCBlWzFdID0gbywgZVsyXSA9IG47CiAgICAgIH0sIGd0LnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBpID0gdGhpcy5tLAogICAgICAgICAgICBlID0gTWF0aC5jb3ModCksCiAgICAgICAgICAgIHIgPSBNYXRoLnNpbih0KSwKICAgICAgICAgICAgbyA9IGlbMF0gKiBlICsgaVszXSAqIHIsCiAgICAgICAgICAgIG4gPSBpWzFdICogZSArIGlbNF0gKiByLAogICAgICAgICAgICBzID0gaVsyXSAqIGUgKyBpWzVdICogcjsKICAgICAgICBpWzNdID0gLWlbMF0gKiByICsgaVszXSAqIGUsIGlbNF0gPSAtaVsxXSAqIHIgKyBpWzRdICogZSwgaVs1XSA9IC1pWzJdICogciArIGlbNV0gKiBlLCBpWzBdID0gbywgaVsxXSA9IG4sIGlbMl0gPSBzOwogICAgICB9LCBndC5wcm90b3R5cGUuY29uY2F0ZW5hdGUgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBpID0gdGhpcy5tLAogICAgICAgICAgICBlID0gdC5tLAogICAgICAgICAgICByID0gaVswXSAqIGVbMF0gKyBpWzNdICogZVsxXSArIGlbNl0gKiBlWzJdLAogICAgICAgICAgICBvID0gaVsxXSAqIGVbMF0gKyBpWzRdICogZVsxXSArIGlbN10gKiBlWzJdLAogICAgICAgICAgICBuID0gaVsyXSAqIGVbMF0gKyBpWzVdICogZVsxXSArIGlbOF0gKiBlWzJdLAogICAgICAgICAgICBzID0gaVswXSAqIGVbM10gKyBpWzNdICogZVs0XSArIGlbNl0gKiBlWzVdLAogICAgICAgICAgICBfID0gaVsxXSAqIGVbM10gKyBpWzRdICogZVs0XSArIGlbN10gKiBlWzVdLAogICAgICAgICAgICBhID0gaVsyXSAqIGVbM10gKyBpWzVdICogZVs0XSArIGlbOF0gKiBlWzVdLAogICAgICAgICAgICBoID0gaVswXSAqIGVbNl0gKyBpWzNdICogZVs3XSArIGlbNl0gKiBlWzhdLAogICAgICAgICAgICBsID0gaVsxXSAqIGVbNl0gKyBpWzRdICogZVs3XSArIGlbN10gKiBlWzhdLAogICAgICAgICAgICAkID0gaVsyXSAqIGVbNl0gKyBpWzVdICogZVs3XSArIGlbOF0gKiBlWzhdOwoKICAgICAgICBtWzBdID0gciwgbVsxXSA9IG8sIG1bMl0gPSBuLCBtWzNdID0gcywgbVs0XSA9IF8sIG1bNV0gPSBhLCBtWzZdID0gaCwgbVs3XSA9IGwsIG1bOF0gPSAkOwogICAgICB9LCB5dC5wcm90b3R5cGUgPSBuZXcgZXQoKSwgeXQuXyRlVCA9IG51bGwsIHl0Ll8kdFAgPSBuZXcgT2JqZWN0KCksIHl0Ll8kMm8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG51bGwgPT0geXQuXyRlVCAmJiAoeXQuXyRlVCA9IHl0LmdldElEKCJEU1RfQkFTRSIpKSwgeXQuXyRlVDsKICAgICAgfSwgeXQuXyQyNyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB5dC5fJHRQLmNsZWFyKCksIHl0Ll8kZVQgPSBudWxsOwogICAgICB9LCB5dC5nZXRJRCA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGkgPSB5dC5fJHRQW3RdOwogICAgICAgIHJldHVybiBudWxsID09IGkgJiYgKGkgPSBuZXcgeXQodCksIHl0Ll8kdFBbdF0gPSBpKSwgaTsKICAgICAgfSwgeXQucHJvdG90eXBlLl8kM3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG5ldyB5dCgpOwogICAgICB9LCBtdC5wcm90b3R5cGUgPSBuZXcgRSgpLCBtdC5fJDlyID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh0KTsKICAgICAgfSwgbXQuXyR2YiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIG5ldyBJbnQxNkFycmF5KHQpOwogICAgICB9LCBtdC5fJGNyID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICByZXR1cm4gbnVsbCA9PSB0IHx8IHQuXyR5TCgpIDwgaS5sZW5ndGggPyAodCA9IG10Ll8kOXIoMiAqIGkubGVuZ3RoKSwgdC5wdXQoaSksIHQuXyRvVCgwKSkgOiAodC5jbGVhcigpLCB0LnB1dChpKSwgdC5fJG9UKDApKSwgdDsKICAgICAgfSwgbXQuXyRtYiA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICAgICAgcmV0dXJuIG51bGwgPT0gdCB8fCB0Ll8keUwoKSA8IGkubGVuZ3RoID8gKHQgPSBtdC5fJHZiKDIgKiBpLmxlbmd0aCksIHQucHV0KGkpLCB0Ll8kb1QoMCkpIDogKHQuY2xlYXIoKSwgdC5wdXQoaSksIHQuXyRvVCgwKSksIHQ7CiAgICAgIH0sIG10Ll8kSHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRHcjsKICAgICAgfSwgbXQuXyRhcyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJEdyID0gdDsKICAgICAgfSwgbXQucHJvdG90eXBlLmdldEdMID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmdsOwogICAgICB9LCBtdC5wcm90b3R5cGUuc2V0R0wgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHRoaXMuZ2wgPSB0OwogICAgICB9LCBtdC5wcm90b3R5cGUuc2V0VHJhbnNmb3JtID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHQ7CiAgICAgIH0sIG10LnByb3RvdHlwZS5fJFpUID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0ID0gdGhpcy5nbDsKICAgICAgICB0aGlzLmZpcnN0RHJhdyAmJiAodGhpcy5pbml0U2hhZGVyKCksIHRoaXMuZmlyc3REcmF3ID0gITEsIHRoaXMuYW5pc290cm9weUV4dCA9IHQuZ2V0RXh0ZW5zaW9uKCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMiKSB8fCB0LmdldEV4dGVuc2lvbigiV0VCS0lUX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYyIpIHx8IHQuZ2V0RXh0ZW5zaW9uKCJNT1pfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljIiksIHRoaXMuYW5pc290cm9weUV4dCAmJiAodGhpcy5tYXhBbmlzb3Ryb3B5ID0gdC5nZXRQYXJhbWV0ZXIodGhpcy5hbmlzb3Ryb3B5RXh0Lk1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCkpKSwgdC5kaXNhYmxlKHQuU0NJU1NPUl9URVNUKSwgdC5kaXNhYmxlKHQuU1RFTkNJTF9URVNUKSwgdC5kaXNhYmxlKHQuREVQVEhfVEVTVCksIHQuZnJvbnRGYWNlKHQuQ1cpLCB0LmVuYWJsZSh0LkJMRU5EKSwgdC5jb2xvck1hc2soMSwgMSwgMSwgMSksIHQuYmluZEJ1ZmZlcih0LkFSUkFZX0JVRkZFUiwgbnVsbCksIHQuYmluZEJ1ZmZlcih0LkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBudWxsKTsKICAgICAgfSwgbXQucHJvdG90eXBlLl8kVW8gPSBmdW5jdGlvbiAodCwgaSwgZSwgciwgbywgbiwgcywgXykgewogICAgICAgIGlmICghKG4gPCAuMDEgJiYgbnVsbCA9PSB0aGlzLmNsaXBCdWZQcmVfY2xpcENvbnRleHRNYXNrKSkgewogICAgICAgICAgdmFyIGEgPSAobiA+IC45ICYmIGF0LkVYUEFORF9XLCB0aGlzLmdsKTsKICAgICAgICAgIGlmIChudWxsID09IHRoaXMuZ2wpIHRocm93IG5ldyBFcnJvcigiZ2wgaXMgbnVsbCIpOwogICAgICAgICAgdmFyIGggPSAxICogdGhpcy5fJEMwICogbiwKICAgICAgICAgICAgICBsID0gMSAqIHRoaXMuXyR0VCAqIG4sCiAgICAgICAgICAgICAgJCA9IDEgKiB0aGlzLl8kV0wgKiBuLAogICAgICAgICAgICAgIHUgPSB0aGlzLl8kbFQgKiBuOwoKICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuY2xpcEJ1ZlByZV9jbGlwQ29udGV4dE1hc2spIHsKICAgICAgICAgICAgYS5mcm9udEZhY2UoYS5DQ1cpLCBhLnVzZVByb2dyYW0odGhpcy5zaGFkZXJQcm9ncmFtKSwgdGhpcy5fJHZTID0gVHQoYSwgdGhpcy5fJHZTLCByKSwgdGhpcy5fJG5vID0gUHQoYSwgdGhpcy5fJG5vLCBlKSwgYS5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmFfcG9zaXRpb25fTG9jKSwgYS52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuYV9wb3NpdGlvbl9Mb2MsIDIsIGEuRkxPQVQsICExLCAwLCAwKSwgdGhpcy5fJE5UID0gVHQoYSwgdGhpcy5fJE5ULCBvKSwgYS5hY3RpdmVUZXh0dXJlKGEuVEVYVFVSRTEpLCBhLmJpbmRUZXh0dXJlKGEuVEVYVFVSRV8yRCwgdGhpcy50ZXh0dXJlc1t0XSksIGEudW5pZm9ybTFpKHRoaXMuc190ZXh0dXJlMF9Mb2MsIDEpLCBhLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuYV90ZXhDb29yZF9Mb2MpLCBhLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hX3RleENvb3JkX0xvYywgMiwgYS5GTE9BVCwgITEsIDAsIDApLCBhLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy51X21hdHJpeF9Mb2MsICExLCB0aGlzLmdldENsaXBCdWZQcmVfY2xpcENvbnRleHRNYXNrKCkubWF0cml4Rm9yTWFzayk7CiAgICAgICAgICAgIHZhciBwID0gdGhpcy5nZXRDbGlwQnVmUHJlX2NsaXBDb250ZXh0TWFzaygpLmxheW91dENoYW5uZWxObywKICAgICAgICAgICAgICAgIGYgPSB0aGlzLmdldENoYW5uZWxGbGFnQXNDb2xvcihwKTsKICAgICAgICAgICAgYS51bmlmb3JtNGYodGhpcy51X2NoYW5uZWxGbGFnLCBmLnIsIGYuZywgZi5iLCBmLmEpOwogICAgICAgICAgICB2YXIgYyA9IHRoaXMuZ2V0Q2xpcEJ1ZlByZV9jbGlwQ29udGV4dE1hc2soKS5sYXlvdXRCb3VuZHM7CiAgICAgICAgICAgIGEudW5pZm9ybTRmKHRoaXMudV9iYXNlQ29sb3JfTG9jLCAyICogYy54IC0gMSwgMiAqIGMueSAtIDEsIDIgKiBjLl8kRUwoKSAtIDEsIDIgKiBjLl8kNVQoKSAtIDEpLCBhLnVuaWZvcm0xaSh0aGlzLnVfbWFza0ZsYWdfTG9jLCAhMCk7CiAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT0gdGhpcy5nZXRDbGlwQnVmUHJlX2NsaXBDb250ZXh0RHJhdygpKSB7CiAgICAgICAgICAgIGEudXNlUHJvZ3JhbSh0aGlzLnNoYWRlclByb2dyYW1PZmYpLCB0aGlzLl8kdlMgPSBUdChhLCB0aGlzLl8kdlMsIHIpLCB0aGlzLl8kbm8gPSBQdChhLCB0aGlzLl8kbm8sIGUpLCBhLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuYV9wb3NpdGlvbl9Mb2NfT2ZmKSwgYS52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuYV9wb3NpdGlvbl9Mb2NfT2ZmLCAyLCBhLkZMT0FULCAhMSwgMCwgMCksIHRoaXMuXyROVCA9IFR0KGEsIHRoaXMuXyROVCwgbyksIGEuYWN0aXZlVGV4dHVyZShhLlRFWFRVUkUxKSwgYS5iaW5kVGV4dHVyZShhLlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZXNbdF0pLCBhLnVuaWZvcm0xaSh0aGlzLnNfdGV4dHVyZTBfTG9jX09mZiwgMSksIGEuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5hX3RleENvb3JkX0xvY19PZmYpLCBhLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5hX3RleENvb3JkX0xvY19PZmYsIDIsIGEuRkxPQVQsICExLCAwLCAwKSwgYS51bmlmb3JtTWF0cml4NGZ2KHRoaXMudV9jbGlwTWF0cml4X0xvY19PZmYsICExLCB0aGlzLmdldENsaXBCdWZQcmVfY2xpcENvbnRleHREcmF3KCkubWF0cml4Rm9yRHJhdyksIGEudW5pZm9ybU1hdHJpeDRmdih0aGlzLnVfbWF0cml4X0xvY19PZmYsICExLCB0aGlzLm1hdHJpeDR4NCksIGEuYWN0aXZlVGV4dHVyZShhLlRFWFRVUkUyKSwgYS5iaW5kVGV4dHVyZShhLlRFWFRVUkVfMkQsIGF0LmZUZXh0dXJlW3RoaXMuZ2xub10pLCBhLnVuaWZvcm0xaSh0aGlzLnNfdGV4dHVyZTFfTG9jX09mZiwgMik7CiAgICAgICAgICAgIHZhciBwID0gdGhpcy5nZXRDbGlwQnVmUHJlX2NsaXBDb250ZXh0RHJhdygpLmxheW91dENoYW5uZWxObywKICAgICAgICAgICAgICAgIGYgPSB0aGlzLmdldENoYW5uZWxGbGFnQXNDb2xvcihwKTsKICAgICAgICAgICAgYS51bmlmb3JtNGYodGhpcy51X2NoYW5uZWxGbGFnX0xvY19PZmYsIGYuciwgZi5nLCBmLmIsIGYuYSksIGEudW5pZm9ybTRmKHRoaXMudV9iYXNlQ29sb3JfTG9jX09mZiwgaCwgbCwgJCwgdSk7CiAgICAgICAgICB9IGVsc2UgYS51c2VQcm9ncmFtKHRoaXMuc2hhZGVyUHJvZ3JhbSksIHRoaXMuXyR2UyA9IFR0KGEsIHRoaXMuXyR2UywgciksIHRoaXMuXyRubyA9IFB0KGEsIHRoaXMuXyRubywgZSksIGEuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkodGhpcy5hX3Bvc2l0aW9uX0xvYyksIGEudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLmFfcG9zaXRpb25fTG9jLCAyLCBhLkZMT0FULCAhMSwgMCwgMCksIHRoaXMuXyROVCA9IFR0KGEsIHRoaXMuXyROVCwgbyksIGEuYWN0aXZlVGV4dHVyZShhLlRFWFRVUkUxKSwgYS5iaW5kVGV4dHVyZShhLlRFWFRVUkVfMkQsIHRoaXMudGV4dHVyZXNbdF0pLCBhLnVuaWZvcm0xaSh0aGlzLnNfdGV4dHVyZTBfTG9jLCAxKSwgYS5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLmFfdGV4Q29vcmRfTG9jKSwgYS52ZXJ0ZXhBdHRyaWJQb2ludGVyKHRoaXMuYV90ZXhDb29yZF9Mb2MsIDIsIGEuRkxPQVQsICExLCAwLCAwKSwgYS51bmlmb3JtTWF0cml4NGZ2KHRoaXMudV9tYXRyaXhfTG9jLCAhMSwgdGhpcy5tYXRyaXg0eDQpLCBhLnVuaWZvcm00Zih0aGlzLnVfYmFzZUNvbG9yX0xvYywgaCwgbCwgJCwgdSksIGEudW5pZm9ybTFpKHRoaXMudV9tYXNrRmxhZ19Mb2MsICExKTsKCiAgICAgICAgICB0aGlzLmN1bGxpbmcgPyB0aGlzLmdsLmVuYWJsZShhLkNVTExfRkFDRSkgOiB0aGlzLmdsLmRpc2FibGUoYS5DVUxMX0ZBQ0UpLCB0aGlzLmdsLmVuYWJsZShhLkJMRU5EKTsKICAgICAgICAgIHZhciBkLCBnLCB5LCBtOwogICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5jbGlwQnVmUHJlX2NsaXBDb250ZXh0TWFzaykgZCA9IGEuT05FLCBnID0gYS5PTkVfTUlOVVNfU1JDX0FMUEhBLCB5ID0gYS5PTkUsIG0gPSBhLk9ORV9NSU5VU19TUkNfQUxQSEE7ZWxzZSBzd2l0Y2ggKHMpIHsKICAgICAgICAgICAgY2FzZSAkdC5fJG1zOgogICAgICAgICAgICAgIGQgPSBhLk9ORSwgZyA9IGEuT05FX01JTlVTX1NSQ19BTFBIQSwgeSA9IGEuT05FLCBtID0gYS5PTkVfTUlOVVNfU1JDX0FMUEhBOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAkdC5fJG5zOgogICAgICAgICAgICAgIGQgPSBhLk9ORSwgZyA9IGEuT05FLCB5ID0gYS5aRVJPLCBtID0gYS5PTkU7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICR0Ll8kX3M6CiAgICAgICAgICAgICAgZCA9IGEuRFNUX0NPTE9SLCBnID0gYS5PTkVfTUlOVVNfU1JDX0FMUEhBLCB5ID0gYS5aRVJPLCBtID0gYS5PTkU7CiAgICAgICAgICB9CiAgICAgICAgICBhLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShhLkZVTkNfQURELCBhLkZVTkNfQUREKSwgYS5ibGVuZEZ1bmNTZXBhcmF0ZShkLCBnLCB5LCBtKSwgdGhpcy5hbmlzb3Ryb3B5RXh0ICYmIGEudGV4UGFyYW1ldGVyaShhLlRFWFRVUkVfMkQsIHRoaXMuYW5pc290cm9weUV4dC5URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCwgdGhpcy5tYXhBbmlzb3Ryb3B5KTsKICAgICAgICAgIHZhciBUID0gZS5sZW5ndGg7CiAgICAgICAgICBhLmRyYXdFbGVtZW50cyhhLlRSSUFOR0xFUywgVCwgYS5VTlNJR05FRF9TSE9SVCwgMCksIGEuYmluZFRleHR1cmUoYS5URVhUVVJFXzJELCBudWxsKTsKICAgICAgICB9CiAgICAgIH0sIG10LnByb3RvdHlwZS5fJFJzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiXyRScyIpOwogICAgICB9LCBtdC5wcm90b3R5cGUuXyREcyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJfJERzIik7CiAgICAgIH0sIG10LnByb3RvdHlwZS5fJEsyID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy50ZXh0dXJlcy5sZW5ndGg7IHQrKykgewogICAgICAgICAgMCAhPSB0aGlzLnRleHR1cmVzW3RdICYmICh0aGlzLmdsLl8kSzIoMSwgdGhpcy50ZXh0dXJlcywgdCksIHRoaXMudGV4dHVyZXNbdF0gPSBudWxsKTsKICAgICAgICB9CiAgICAgIH0sIG10LnByb3RvdHlwZS5zZXRUZXh0dXJlID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICB0aGlzLnRleHR1cmVzW3RdID0gaTsKICAgICAgfSwgbXQucHJvdG90eXBlLmluaXRTaGFkZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHQgPSB0aGlzLmdsOwogICAgICAgIHRoaXMubG9hZFNoYWRlcnMyKCksIHRoaXMuYV9wb3NpdGlvbl9Mb2MgPSB0LmdldEF0dHJpYkxvY2F0aW9uKHRoaXMuc2hhZGVyUHJvZ3JhbSwgImFfcG9zaXRpb24iKSwgdGhpcy5hX3RleENvb3JkX0xvYyA9IHQuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5zaGFkZXJQcm9ncmFtLCAiYV90ZXhDb29yZCIpLCB0aGlzLnVfbWF0cml4X0xvYyA9IHQuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuc2hhZGVyUHJvZ3JhbSwgInVfbXZwTWF0cml4IiksIHRoaXMuc190ZXh0dXJlMF9Mb2MgPSB0LmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNoYWRlclByb2dyYW0sICJzX3RleHR1cmUwIiksIHRoaXMudV9jaGFubmVsRmxhZyA9IHQuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuc2hhZGVyUHJvZ3JhbSwgInVfY2hhbm5lbEZsYWciKSwgdGhpcy51X2Jhc2VDb2xvcl9Mb2MgPSB0LmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNoYWRlclByb2dyYW0sICJ1X2Jhc2VDb2xvciIpLCB0aGlzLnVfbWFza0ZsYWdfTG9jID0gdC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5zaGFkZXJQcm9ncmFtLCAidV9tYXNrRmxhZyIpLCB0aGlzLmFfcG9zaXRpb25fTG9jX09mZiA9IHQuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5zaGFkZXJQcm9ncmFtT2ZmLCAiYV9wb3NpdGlvbiIpLCB0aGlzLmFfdGV4Q29vcmRfTG9jX09mZiA9IHQuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5zaGFkZXJQcm9ncmFtT2ZmLCAiYV90ZXhDb29yZCIpLCB0aGlzLnVfbWF0cml4X0xvY19PZmYgPSB0LmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNoYWRlclByb2dyYW1PZmYsICJ1X212cE1hdHJpeCIpLCB0aGlzLnVfY2xpcE1hdHJpeF9Mb2NfT2ZmID0gdC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5zaGFkZXJQcm9ncmFtT2ZmLCAidV9DbGlwTWF0cml4IiksIHRoaXMuc190ZXh0dXJlMF9Mb2NfT2ZmID0gdC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5zaGFkZXJQcm9ncmFtT2ZmLCAic190ZXh0dXJlMCIpLCB0aGlzLnNfdGV4dHVyZTFfTG9jX09mZiA9IHQuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuc2hhZGVyUHJvZ3JhbU9mZiwgInNfdGV4dHVyZTEiKSwgdGhpcy51X2NoYW5uZWxGbGFnX0xvY19PZmYgPSB0LmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNoYWRlclByb2dyYW1PZmYsICJ1X2NoYW5uZWxGbGFnIiksIHRoaXMudV9iYXNlQ29sb3JfTG9jX09mZiA9IHQuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuc2hhZGVyUHJvZ3JhbU9mZiwgInVfYmFzZUNvbG9yIik7CiAgICAgIH0sIG10LnByb3RvdHlwZS5kaXNwb3NlU2hhZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0ID0gdGhpcy5nbDsKICAgICAgICB0aGlzLnNoYWRlclByb2dyYW0gJiYgKHQuZGVsZXRlUHJvZ3JhbSh0aGlzLnNoYWRlclByb2dyYW0pLCB0aGlzLnNoYWRlclByb2dyYW0gPSBudWxsKSwgdGhpcy5zaGFkZXJQcm9ncmFtT2ZmICYmICh0LmRlbGV0ZVByb2dyYW0odGhpcy5zaGFkZXJQcm9ncmFtT2ZmKSwgdGhpcy5zaGFkZXJQcm9ncmFtT2ZmID0gbnVsbCk7CiAgICAgIH0sIG10LnByb3RvdHlwZS5jb21waWxlU2hhZGVyID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICB2YXIgZSA9IHRoaXMuZ2wsCiAgICAgICAgICAgIHIgPSBpLAogICAgICAgICAgICBvID0gZS5jcmVhdGVTaGFkZXIodCk7CiAgICAgICAgaWYgKG51bGwgPT0gbykgcmV0dXJuIF8uXyRKaSgiXyRMMCB0byBjcmVhdGUgc2hhZGVyIiksIG51bGw7CgogICAgICAgIGlmIChlLnNoYWRlclNvdXJjZShvLCByKSwgZS5jb21waWxlU2hhZGVyKG8pLCAhZS5nZXRTaGFkZXJQYXJhbWV0ZXIobywgZS5DT01QSUxFX1NUQVRVUykpIHsKICAgICAgICAgIHZhciBuID0gZS5nZXRTaGFkZXJJbmZvTG9nKG8pOwogICAgICAgICAgcmV0dXJuIF8uXyRKaSgiXyRMMCB0byBjb21waWxlIHNoYWRlciA6ICIgKyBuKSwgZS5kZWxldGVTaGFkZXIobyksIG51bGw7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbzsKICAgICAgfSwgbXQucHJvdG90eXBlLmxvYWRTaGFkZXJzMiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdCA9IHRoaXMuZ2w7CiAgICAgICAgaWYgKHRoaXMuc2hhZGVyUHJvZ3JhbSA9IHQuY3JlYXRlUHJvZ3JhbSgpLCAhdGhpcy5zaGFkZXJQcm9ncmFtKSByZXR1cm4gITE7CiAgICAgICAgaWYgKHRoaXMuc2hhZGVyUHJvZ3JhbU9mZiA9IHQuY3JlYXRlUHJvZ3JhbSgpLCAhdGhpcy5zaGFkZXJQcm9ncmFtT2ZmKSByZXR1cm4gITE7CiAgICAgICAgaWYgKHRoaXMudmVydFNoYWRlciA9IHRoaXMuY29tcGlsZVNoYWRlcih0LlZFUlRFWF9TSEFERVIsICJhdHRyaWJ1dGUgdmVjNCAgICAgYV9wb3NpdGlvbjthdHRyaWJ1dGUgdmVjMiAgICAgYV90ZXhDb29yZDt2YXJ5aW5nIHZlYzIgICAgICAgdl90ZXhDb29yZDt2YXJ5aW5nIHZlYzQgICAgICAgdl9DbGlwUG9zO3VuaWZvcm0gbWF0NCAgICAgICB1X212cE1hdHJpeDt2b2lkIG1haW4oKXsgICAgZ2xfUG9zaXRpb24gPSB1X212cE1hdHJpeCAqIGFfcG9zaXRpb247ICAgIHZfQ2xpcFBvcyA9IHVfbXZwTWF0cml4ICogYV9wb3NpdGlvbjsgICAgdl90ZXhDb29yZCA9IGFfdGV4Q29vcmQ7fSIpLCAhdGhpcy52ZXJ0U2hhZGVyKSByZXR1cm4gXy5fJEppKCJWZXJ0ZXggc2hhZGVyIGNvbXBpbGUgXyRsaSEiKSwgITE7CiAgICAgICAgaWYgKHRoaXMudmVydFNoYWRlck9mZiA9IHRoaXMuY29tcGlsZVNoYWRlcih0LlZFUlRFWF9TSEFERVIsICJhdHRyaWJ1dGUgdmVjNCAgICAgYV9wb3NpdGlvbjthdHRyaWJ1dGUgdmVjMiAgICAgYV90ZXhDb29yZDt2YXJ5aW5nIHZlYzIgICAgICAgdl90ZXhDb29yZDt2YXJ5aW5nIHZlYzQgICAgICAgdl9DbGlwUG9zO3VuaWZvcm0gbWF0NCAgICAgICB1X212cE1hdHJpeDt1bmlmb3JtIG1hdDQgICAgICAgdV9DbGlwTWF0cml4O3ZvaWQgbWFpbigpeyAgICBnbF9Qb3NpdGlvbiA9IHVfbXZwTWF0cml4ICogYV9wb3NpdGlvbjsgICAgdl9DbGlwUG9zID0gdV9DbGlwTWF0cml4ICogYV9wb3NpdGlvbjsgICAgdl90ZXhDb29yZCA9IGFfdGV4Q29vcmQgO30iKSwgIXRoaXMudmVydFNoYWRlck9mZikgcmV0dXJuIF8uXyRKaSgiT2ZmVmVydGV4IHNoYWRlciBjb21waWxlIF8kbGkhIiksICExOwogICAgICAgIGlmICh0aGlzLmZyYWdTaGFkZXIgPSB0aGlzLmNvbXBpbGVTaGFkZXIodC5GUkFHTUVOVF9TSEFERVIsICJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDt2YXJ5aW5nIHZlYzIgICAgICAgdl90ZXhDb29yZDt2YXJ5aW5nIHZlYzQgICAgICAgdl9DbGlwUG9zO3VuaWZvcm0gc2FtcGxlcjJEICBzX3RleHR1cmUwO3VuaWZvcm0gdmVjNCAgICAgICB1X2NoYW5uZWxGbGFnO3VuaWZvcm0gdmVjNCAgICAgICB1X2Jhc2VDb2xvcjt1bmlmb3JtIGJvb2wgICAgICAgdV9tYXNrRmxhZzt2b2lkIG1haW4oKXsgICAgdmVjNCBzbXBDb2xvcjsgICAgIGlmKHVfbWFza0ZsYWcpeyAgICAgICAgZmxvYXQgaXNJbnNpZGUgPSAgICAgICAgICAgICBzdGVwKHVfYmFzZUNvbG9yLngsIHZfQ2xpcFBvcy54L3ZfQ2xpcFBvcy53KSAgICAgICAgICAqIHN0ZXAodV9iYXNlQ29sb3IueSwgdl9DbGlwUG9zLnkvdl9DbGlwUG9zLncpICAgICAgICAgICogc3RlcCh2X0NsaXBQb3MueC92X0NsaXBQb3MudywgdV9iYXNlQ29sb3IueikgICAgICAgICAgKiBzdGVwKHZfQ2xpcFBvcy55L3ZfQ2xpcFBvcy53LCB1X2Jhc2VDb2xvci53KTsgICAgICAgIHNtcENvbG9yID0gdV9jaGFubmVsRmxhZyAqIHRleHR1cmUyRChzX3RleHR1cmUwICwgdl90ZXhDb29yZCkuYSAqIGlzSW5zaWRlOyAgICB9ZWxzZXsgICAgICAgIHNtcENvbG9yID0gdGV4dHVyZTJEKHNfdGV4dHVyZTAgLCB2X3RleENvb3JkKSAqIHVfYmFzZUNvbG9yOyAgICB9ICAgIGdsX0ZyYWdDb2xvciA9IHNtcENvbG9yO30iKSwgIXRoaXMuZnJhZ1NoYWRlcikgcmV0dXJuIF8uXyRKaSgiRnJhZ21lbnQgc2hhZGVyIGNvbXBpbGUgXyRsaSEiKSwgITE7CiAgICAgICAgaWYgKHRoaXMuZnJhZ1NoYWRlck9mZiA9IHRoaXMuY29tcGlsZVNoYWRlcih0LkZSQUdNRU5UX1NIQURFUiwgInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0IDt2YXJ5aW5nIHZlYzIgICAgICAgdl90ZXhDb29yZDt2YXJ5aW5nIHZlYzQgICAgICAgdl9DbGlwUG9zO3VuaWZvcm0gc2FtcGxlcjJEICBzX3RleHR1cmUwO3VuaWZvcm0gc2FtcGxlcjJEICBzX3RleHR1cmUxO3VuaWZvcm0gdmVjNCAgICAgICB1X2NoYW5uZWxGbGFnO3VuaWZvcm0gdmVjNCAgICAgICB1X2Jhc2VDb2xvciA7dm9pZCBtYWluKCl7ICAgIHZlYzQgY29sX2Zvcm1hc2sgPSB0ZXh0dXJlMkQoc190ZXh0dXJlMCwgdl90ZXhDb29yZCkgKiB1X2Jhc2VDb2xvcjsgICAgdmVjNCBjbGlwTWFzayA9IHRleHR1cmUyRChzX3RleHR1cmUxLCB2X0NsaXBQb3MueHkgLyB2X0NsaXBQb3MudykgKiB1X2NoYW5uZWxGbGFnOyAgICBmbG9hdCBtYXNrVmFsID0gY2xpcE1hc2suciArIGNsaXBNYXNrLmcgKyBjbGlwTWFzay5iICsgY2xpcE1hc2suYTsgICAgY29sX2Zvcm1hc2sgPSBjb2xfZm9ybWFzayAqIG1hc2tWYWw7ICAgIGdsX0ZyYWdDb2xvciA9IGNvbF9mb3JtYXNrO30iKSwgIXRoaXMuZnJhZ1NoYWRlck9mZikgcmV0dXJuIF8uXyRKaSgiT2ZmRnJhZ21lbnQgc2hhZGVyIGNvbXBpbGUgXyRsaSEiKSwgITE7CgogICAgICAgIGlmICh0LmF0dGFjaFNoYWRlcih0aGlzLnNoYWRlclByb2dyYW0sIHRoaXMudmVydFNoYWRlciksIHQuYXR0YWNoU2hhZGVyKHRoaXMuc2hhZGVyUHJvZ3JhbSwgdGhpcy5mcmFnU2hhZGVyKSwgdC5hdHRhY2hTaGFkZXIodGhpcy5zaGFkZXJQcm9ncmFtT2ZmLCB0aGlzLnZlcnRTaGFkZXJPZmYpLCB0LmF0dGFjaFNoYWRlcih0aGlzLnNoYWRlclByb2dyYW1PZmYsIHRoaXMuZnJhZ1NoYWRlck9mZiksIHQubGlua1Byb2dyYW0odGhpcy5zaGFkZXJQcm9ncmFtKSwgdC5saW5rUHJvZ3JhbSh0aGlzLnNoYWRlclByb2dyYW1PZmYpLCAhdC5nZXRQcm9ncmFtUGFyYW1ldGVyKHRoaXMuc2hhZGVyUHJvZ3JhbSwgdC5MSU5LX1NUQVRVUykpIHsKICAgICAgICAgIHZhciBpID0gdC5nZXRQcm9ncmFtSW5mb0xvZyh0aGlzLnNoYWRlclByb2dyYW0pOwogICAgICAgICAgcmV0dXJuIF8uXyRKaSgiXyRMMCB0byBsaW5rIHByb2dyYW06ICIgKyBpKSwgdGhpcy52ZXJ0U2hhZGVyICYmICh0LmRlbGV0ZVNoYWRlcih0aGlzLnZlcnRTaGFkZXIpLCB0aGlzLnZlcnRTaGFkZXIgPSAwKSwgdGhpcy5mcmFnU2hhZGVyICYmICh0LmRlbGV0ZVNoYWRlcih0aGlzLmZyYWdTaGFkZXIpLCB0aGlzLmZyYWdTaGFkZXIgPSAwKSwgdGhpcy5zaGFkZXJQcm9ncmFtICYmICh0LmRlbGV0ZVByb2dyYW0odGhpcy5zaGFkZXJQcm9ncmFtKSwgdGhpcy5zaGFkZXJQcm9ncmFtID0gMCksIHRoaXMudmVydFNoYWRlck9mZiAmJiAodC5kZWxldGVTaGFkZXIodGhpcy52ZXJ0U2hhZGVyT2ZmKSwgdGhpcy52ZXJ0U2hhZGVyT2ZmID0gMCksIHRoaXMuZnJhZ1NoYWRlck9mZiAmJiAodC5kZWxldGVTaGFkZXIodGhpcy5mcmFnU2hhZGVyT2ZmKSwgdGhpcy5mcmFnU2hhZGVyT2ZmID0gMCksIHRoaXMuc2hhZGVyUHJvZ3JhbU9mZiAmJiAodC5kZWxldGVQcm9ncmFtKHRoaXMuc2hhZGVyUHJvZ3JhbU9mZiksIHRoaXMuc2hhZGVyUHJvZ3JhbU9mZiA9IDApLCAhMTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAhMDsKICAgICAgfSwgbXQucHJvdG90eXBlLmNyZWF0ZUZyYW1lYnVmZmVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0ID0gdGhpcy5nbCwKICAgICAgICAgICAgaSA9IGF0LmNsaXBwaW5nTWFza0J1ZmZlclNpemUsCiAgICAgICAgICAgIGUgPSB0LmNyZWF0ZUZyYW1lYnVmZmVyKCk7CiAgICAgICAgdC5iaW5kRnJhbWVidWZmZXIodC5GUkFNRUJVRkZFUiwgZSk7CiAgICAgICAgdmFyIHIgPSB0LmNyZWF0ZVJlbmRlcmJ1ZmZlcigpOwogICAgICAgIHQuYmluZFJlbmRlcmJ1ZmZlcih0LlJFTkRFUkJVRkZFUiwgciksIHQucmVuZGVyYnVmZmVyU3RvcmFnZSh0LlJFTkRFUkJVRkZFUiwgdC5SR0JBNCwgaSwgaSksIHQuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIodC5GUkFNRUJVRkZFUiwgdC5DT0xPUl9BVFRBQ0hNRU5UMCwgdC5SRU5ERVJCVUZGRVIsIHIpOwogICAgICAgIHZhciBvID0gdC5jcmVhdGVUZXh0dXJlKCk7CiAgICAgICAgcmV0dXJuIHQuYmluZFRleHR1cmUodC5URVhUVVJFXzJELCBvKSwgdC50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCwgMCwgdC5SR0JBLCBpLCBpLCAwLCB0LlJHQkEsIHQuVU5TSUdORURfQllURSwgbnVsbCksIHQudGV4UGFyYW1ldGVyaSh0LlRFWFRVUkVfMkQsIHQuVEVYVFVSRV9NSU5fRklMVEVSLCB0LkxJTkVBUiksIHQudGV4UGFyYW1ldGVyaSh0LlRFWFRVUkVfMkQsIHQuVEVYVFVSRV9NQUdfRklMVEVSLCB0LkxJTkVBUiksIHQudGV4UGFyYW1ldGVyaSh0LlRFWFRVUkVfMkQsIHQuVEVYVFVSRV9XUkFQX1MsIHQuQ0xBTVBfVE9fRURHRSksIHQudGV4UGFyYW1ldGVyaSh0LlRFWFRVUkVfMkQsIHQuVEVYVFVSRV9XUkFQX1QsIHQuQ0xBTVBfVE9fRURHRSksIHQuZnJhbWVidWZmZXJUZXh0dXJlMkQodC5GUkFNRUJVRkZFUiwgdC5DT0xPUl9BVFRBQ0hNRU5UMCwgdC5URVhUVVJFXzJELCBvLCAwKSwgdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsIG51bGwpLCB0LmJpbmRSZW5kZXJidWZmZXIodC5SRU5ERVJCVUZGRVIsIG51bGwpLCB0LmJpbmRGcmFtZWJ1ZmZlcih0LkZSQU1FQlVGRkVSLCBudWxsKSwgYXQuZlRleHR1cmVbdGhpcy5nbG5vXSA9IG8sIHsKICAgICAgICAgIGZyYW1lYnVmZmVyOiBlLAogICAgICAgICAgcmVuZGVyYnVmZmVyOiByLAogICAgICAgICAgdGV4dHVyZTogYXQuZlRleHR1cmVbdGhpcy5nbG5vXQogICAgICAgIH07CiAgICAgIH0sIFN0LnByb3RvdHlwZS5fJGZQID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB0LAogICAgICAgICAgICBpLAogICAgICAgICAgICBlLAogICAgICAgICAgICByID0gdGhpcy5fJFNUKCk7CgogICAgICAgIGlmICgwID09ICgxMjggJiByKSkgcmV0dXJuIDI1NSAmIHI7CiAgICAgICAgaWYgKDAgPT0gKDEyOCAmICh0ID0gdGhpcy5fJFNUKCkpKSkgcmV0dXJuICgxMjcgJiByKSA8PCA3IHwgMTI3ICYgdDsKICAgICAgICBpZiAoMCA9PSAoMTI4ICYgKGkgPSB0aGlzLl8kU1QoKSkpKSByZXR1cm4gKDEyNyAmIHIpIDw8IDE0IHwgKDEyNyAmIHQpIDw8IDcgfCAyNTUgJiBpOwogICAgICAgIGlmICgwID09ICgxMjggJiAoZSA9IHRoaXMuXyRTVCgpKSkpIHJldHVybiAoMTI3ICYgcikgPDwgMjEgfCAoMTI3ICYgdCkgPDwgMTQgfCAoMTI3ICYgaSkgPDwgNyB8IDI1NSAmIGU7CiAgICAgICAgdGhyb3cgbmV3IGx0KCJfJEwgXyQwUCAgXyIpOwogICAgICB9LCBTdC5wcm90b3R5cGUuZ2V0Rm9ybWF0VmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJFMyOwogICAgICB9LCBTdC5wcm90b3R5cGUuXyRnciA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdGhpcy5fJFMyID0gdDsKICAgICAgfSwgU3QucHJvdG90eXBlLl8kM0wgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRmUCgpOwogICAgICB9LCBTdC5wcm90b3R5cGUuXyRtUCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJHpUKCksIHRoaXMuXyRGICs9IDgsIHRoaXMuXyRULmdldEZsb2F0NjQodGhpcy5fJEYgLSA4KTsKICAgICAgfSwgU3QucHJvdG90eXBlLl8kX1QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyR6VCgpLCB0aGlzLl8kRiArPSA0LCB0aGlzLl8kVC5nZXRGbG9hdDMyKHRoaXMuXyRGIC0gNCk7CiAgICAgIH0sIFN0LnByb3RvdHlwZS5fJDZMID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kelQoKSwgdGhpcy5fJEYgKz0gNCwgdGhpcy5fJFQuZ2V0SW50MzIodGhpcy5fJEYgLSA0KTsKICAgICAgfSwgU3QucHJvdG90eXBlLl8kU1QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyR6VCgpLCB0aGlzLl8kVC5nZXRJbnQ4KHRoaXMuXyRGKyspOwogICAgICB9LCBTdC5wcm90b3R5cGUuXyQ5VCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJHpUKCksIHRoaXMuXyRGICs9IDIsIHRoaXMuXyRULmdldEludDE2KHRoaXMuXyRGIC0gMik7CiAgICAgIH0sIFN0LnByb3RvdHlwZS5fJDJUID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRocm93IHRoaXMuXyR6VCgpLCB0aGlzLl8kRiArPSA4LCBuZXcgbHQoIl8kTCBfJHEgcmVhZCBsb25nIik7CiAgICAgIH0sIFN0LnByb3RvdHlwZS5fJHBvID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kelQoKSwgMCAhPSB0aGlzLl8kVC5nZXRJbnQ4KHRoaXMuXyRGKyspOwogICAgICB9OwogICAgICB2YXIgeHQgPSAhMDsKICAgICAgU3QucHJvdG90eXBlLl8kYlQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fJHpUKCk7CgogICAgICAgIHZhciB0ID0gdGhpcy5fJDNMKCksCiAgICAgICAgICAgIGkgPSBudWxsOwoKICAgICAgICBpZiAoeHQpIHRyeSB7CiAgICAgICAgICB2YXIgZSA9IG5ldyBBcnJheUJ1ZmZlcigyICogdCk7CiAgICAgICAgICBpID0gbmV3IFVpbnQxNkFycmF5KGUpOwoKICAgICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdDsgKytyKSB7CiAgICAgICAgICAgIGlbcl0gPSB0aGlzLl8kVC5nZXRVaW50OCh0aGlzLl8kRisrKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBpKTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICB4dCA9ICExOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBvID0gbmV3IEFycmF5KCk7CiAgICAgICAgICBpZiAobnVsbCA9PSBpKSBmb3IgKHZhciByID0gMDsgciA8IHQ7ICsrcikgewogICAgICAgICAgICBvW3JdID0gdGhpcy5fJFQuZ2V0VWludDgodGhpcy5fJEYrKyk7CiAgICAgICAgICB9IGVsc2UgZm9yICh2YXIgciA9IDA7IHIgPCB0OyArK3IpIHsKICAgICAgICAgICAgb1tyXSA9IGlbcl07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBvKTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygicmVhZCB1dGY4IC8gXyRyVCBfJEwwICEhIDogIiArIHQpOwogICAgICAgIH0KICAgICAgfSwgU3QucHJvdG90eXBlLl8kY1MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5fJHpUKCk7CgogICAgICAgIGZvciAodmFyIHQgPSB0aGlzLl8kM0woKSwgaSA9IG5ldyBJbnQzMkFycmF5KHQpLCBlID0gMDsgZSA8IHQ7IGUrKykgewogICAgICAgICAgaVtlXSA9IHRoaXMuXyRULmdldEludDMyKHRoaXMuXyRGKSwgdGhpcy5fJEYgKz0gNDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBpOwogICAgICB9LCBTdC5wcm90b3R5cGUuXyRUYiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLl8kelQoKTsKCiAgICAgICAgZm9yICh2YXIgdCA9IHRoaXMuXyQzTCgpLCBpID0gbmV3IEZsb2F0MzJBcnJheSh0KSwgZSA9IDA7IGUgPCB0OyBlKyspIHsKICAgICAgICAgIGlbZV0gPSB0aGlzLl8kVC5nZXRGbG9hdDMyKHRoaXMuXyRGKSwgdGhpcy5fJEYgKz0gNDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBpOwogICAgICB9LCBTdC5wcm90b3R5cGUuXyQ1YiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLl8kelQoKTsKCiAgICAgICAgZm9yICh2YXIgdCA9IHRoaXMuXyQzTCgpLCBpID0gbmV3IEZsb2F0NjRBcnJheSh0KSwgZSA9IDA7IGUgPCB0OyBlKyspIHsKICAgICAgICAgIGlbZV0gPSB0aGlzLl8kVC5nZXRGbG9hdDY0KHRoaXMuXyRGKSwgdGhpcy5fJEYgKz0gODsKICAgICAgICB9CgogICAgICAgIHJldHVybiBpOwogICAgICB9LCBTdC5wcm90b3R5cGUuXyRuUCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fJEpiKC0xKTsKICAgICAgfSwgU3QucHJvdG90eXBlLl8kSmIgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGlmICh0aGlzLl8kelQoKSwgdCA8IDAgJiYgKHQgPSB0aGlzLl8kM0woKSksIHQgPT0gRy5fJDdQKSB7CiAgICAgICAgICB2YXIgaSA9IHRoaXMuXyQ2TCgpOwoKICAgICAgICAgIGlmICgwIDw9IGkgJiYgaSA8IHRoaXMuXyRLby5sZW5ndGgpIHJldHVybiB0aGlzLl8kS29baV07CiAgICAgICAgICB0aHJvdyBuZXcgbHQoIl8kc0wgXyQ0aSBAXyRtMCIpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGUgPSB0aGlzLl8kNGIodCk7CgogICAgICAgIHJldHVybiB0aGlzLl8kS28ucHVzaChlKSwgZTsKICAgICAgfSwgU3QucHJvdG90eXBlLl8kNGIgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGlmICgwID09IHQpIHJldHVybiBudWxsOwoKICAgICAgICBpZiAoNTAgPT0gdCkgewogICAgICAgICAgdmFyIGkgPSB0aGlzLl8kYlQoKSwKICAgICAgICAgICAgICBlID0gYi5nZXRJRChpKTsKCiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9CgogICAgICAgIGlmICg1MSA9PSB0KSB7CiAgICAgICAgICB2YXIgaSA9IHRoaXMuXyRiVCgpLAogICAgICAgICAgICAgIGUgPSB5dC5nZXRJRChpKTsKCiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9CgogICAgICAgIGlmICgxMzQgPT0gdCkgewogICAgICAgICAgdmFyIGkgPSB0aGlzLl8kYlQoKSwKICAgICAgICAgICAgICBlID0gbC5nZXRJRChpKTsKCiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9CgogICAgICAgIGlmICg2MCA9PSB0KSB7CiAgICAgICAgICB2YXIgaSA9IHRoaXMuXyRiVCgpLAogICAgICAgICAgICAgIGUgPSB1LmdldElEKGkpOwoKICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHQgPj0gNDgpIHsKICAgICAgICAgIHZhciByID0gRy5fJDlvKHQpOwoKICAgICAgICAgIHJldHVybiBudWxsICE9IHIgPyAoci5fJEYwKHRoaXMpLCByKSA6IG51bGw7CiAgICAgICAgfQoKICAgICAgICBzd2l0Y2ggKHQpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIHRoaXMuXyRiVCgpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIHJldHVybiBuZXcgbih0aGlzLl8kNkwoKSwgITApOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIHJldHVybiBuZXcgUyh0aGlzLl8kbVAoKSwgdGhpcy5fJG1QKCksIHRoaXMuXyRtUCgpLCB0aGlzLl8kbVAoKSk7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgcmV0dXJuIG5ldyBTKHRoaXMuXyRfVCgpLCB0aGlzLl8kX1QoKSwgdGhpcy5fJF9UKCksIHRoaXMuXyRfVCgpKTsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICByZXR1cm4gbmV3IEwodGhpcy5fJG1QKCksIHRoaXMuXyRtUCgpKTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICByZXR1cm4gbmV3IEwodGhpcy5fJF9UKCksIHRoaXMuXyRfVCgpKTsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBmb3IgKHZhciBvID0gdGhpcy5fJDNMKCksIGUgPSBuZXcgQXJyYXkobyksIHMgPSAwOyBzIDwgbzsgcysrKSB7CiAgICAgICAgICAgICAgZVtzXSA9IHRoaXMuXyRuUCgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gZTsKCiAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICB2YXIgZSA9IG5ldyBGKHRoaXMuXyRtUCgpLCB0aGlzLl8kbVAoKSwgdGhpcy5fJG1QKCksIHRoaXMuXyRtUCgpLCB0aGlzLl8kbVAoKSwgdGhpcy5fJG1QKCkpOwogICAgICAgICAgICByZXR1cm4gZTsKCiAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICByZXR1cm4gbmV3IGgodGhpcy5fJDZMKCksIHRoaXMuXyQ2TCgpLCB0aGlzLl8kNkwoKSwgdGhpcy5fJDZMKCkpOwoKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIHJldHVybiBuZXcgcHQodGhpcy5fJDZMKCksIHRoaXMuXyQ2TCgpKTsKCiAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIl8kTCBfJHJvICIpOwoKICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICByZXR1cm4gdGhpcy5fJGNTKCk7CgogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgcmV0dXJuIHRoaXMuXyQ1YigpOwoKICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgIHJldHVybiB0aGlzLl8kVGIoKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgdGhyb3cgbmV3IGx0KCJfJDYgXyRxIDogXyRuUCgpIG9mIDItOSAsMTgsMTksMjAsMjQsMjggOiAiICsgdCk7CgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgbmV3IGx0KCJfJDYgXyRxIDogXyRuUCgpIE5PIF8kaSA6ICIgKyB0KTsKICAgICAgICB9CiAgICAgIH0sIFN0LnByb3RvdHlwZS5fJDhMID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAwID09IHRoaXMuXyRoTCA/IHRoaXMuXyR2MCA9IHRoaXMuXyRTVCgpIDogOCA9PSB0aGlzLl8kaEwgJiYgKHRoaXMuXyR2MCA9IHRoaXMuXyRTVCgpLCB0aGlzLl8kaEwgPSAwKSwgMSA9PSAodGhpcy5fJHYwID4+IDcgLSB0aGlzLl8kaEwrKyAmIDEpOwogICAgICB9LCBTdC5wcm90b3R5cGUuXyR6VCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAwICE9IHRoaXMuXyRoTCAmJiAodGhpcy5fJGhMID0gMCk7CiAgICAgIH0sIHZ0LnByb3RvdHlwZS5fJHdQID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IGU7IHIrKykgewogICAgICAgICAgZm9yICh2YXIgbyA9IDA7IG8gPCBpOyBvKyspIHsKICAgICAgICAgICAgdmFyIG4gPSAyICogKG8gKyByICogaSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCIoJSA3LjNmICwgJSA3LjNmKSAsICIsIHRbbl0sIHRbbiArIDFdKTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zb2xlLmxvZygiXG4iKTsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKCJcbiIpOwogICAgICB9LCBMdC5fJDJTID0gTWF0aC5QSSAvIDE4MCwgTHQuXyRiUyA9IE1hdGguUEkgLyAxODAsIEx0Ll8kd1MgPSAxODAgLyBNYXRoLlBJLCBMdC5fJE5TID0gMTgwIC8gTWF0aC5QSSwgTHQuUElfRiA9IE1hdGguUEksIEx0Ll8ka1QgPSBbMCwgLjAxMjM2OCwgLjAyNDczNCwgLjAzNzA5NywgLjA0OTQ1NCwgLjA2MTgwMywgLjA3NDE0MywgLjA4NjQ3MSwgLjA5ODc4NiwgLjExMTA4NywgLjEyMzM3LCAuMTM1NjM0LCAuMTQ3ODc3LCAuMTYwMDk4LCAuMTcyMjk1LCAuMTg0NDY1LCAuMTk2NjA2LCAuMjA4NzE4LCAuMjIwNzk4LCAuMjMyODQ0LCAuMjQ0ODU0LCAuMjU2ODI3LCAuMjY4NzYxLCAuMjgwNjU0LCAuMjkyNTAzLCAuMzA0MzA4LCAuMzE2MDY2LCAuMzI3Nzc2LCAuMzM5NDM2LCAuMzUxMDQ0LCAuMzYyNTk4LCAuMzc0MDk3LCAuMzg1NTM4LCAuMzk2OTIxLCAuNDA4MjQzLCAuNDE5NTAyLCAuNDMwNjk3LCAuNDQxODI2LCAuNDUyODg4LCAuNDYzODgxLCAuNDc0ODAyLCAuNDg1NjUxLCAuNDk2NDI1LCAuNTA3MTI0LCAuNTE3NzQ1LCAuNTI4Mjg3LCAuNTM4NzQ4LCAuNTQ5MTI2LCAuNTU5NDIxLCAuNTY5NjMsIC41Nzk3NTIsIC41ODk3ODUsIC41OTk3MjgsIC42MDk1NzksIC42MTkzMzcsIC42MjksIC42Mzg1NjcsIC42NDgwMzYsIC42NTc0MDYsIC42NjY2NzYsIC42NzU4NDMsIC42ODQ5MDgsIC42OTM4NjcsIC43MDI3MiwgLjcxMTQ2NiwgLjcyMDEwMywgLjcyODYzLCAuNzM3MDQ1LCAuNzQ1MzQ4LCAuNzUzNTM2LCAuNzYxNjEsIC43Njk1NjYsIC43Nzc0MDUsIC43ODUxMjUsIC43OTI3MjUsIC44MDAyMDQsIC44MDc1NjEsIC44MTQ3OTMsIC44MjE5MDEsIC44Mjg4ODQsIC44MzU3MzksIC44NDI0NjcsIC44NDkwNjYsIC44NTU1MzUsIC44NjE4NzMsIC44NjgwNzksIC44NzQxNTMsIC44ODAwOTMsIC44ODU4OTgsIC44OTE1NjcsIC44OTcxMDEsIC45MDI0OTcsIC45MDc3NTQsIC45MTI4NzMsIC45MTc4NTMsIC45MjI2OTIsIC45MjczOSwgLjkzMTk0NiwgLjkzNjM1OSwgLjk0MDYyOSwgLjk0NDc1NSwgLjk0ODczNywgLjk1MjU3NCwgLjk1NjI2NSwgLjk1OTgwOSwgLjk2MzIwNywgLjk2NjQ1NywgLjk2OTU2LCAuOTcyNTE0LCAuOTc1MzIsIC45Nzc5NzYsIC45ODA0ODIsIC45ODI4MzksIC45ODUwNDUsIC45ODcxMDEsIC45ODkwMDYsIC45OTA3NTksIC45OTIzNjEsIC45OTM4MTEsIC45OTUxMDksIC45OTYyNTQsIC45OTcyNDgsIC45OTgwODgsIC45OTg3NzYsIC45OTkzMTIsIC45OTk2OTQsIC45OTk5MjQsIDFdLCBMdC5fJDkyID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICB2YXIgZSA9IE1hdGguYXRhbjIodFsxXSwgdFswXSksCiAgICAgICAgICAgIHIgPSBNYXRoLmF0YW4yKGlbMV0sIGlbMF0pOwogICAgICAgIHJldHVybiBMdC5fJHRTKGUsIHIpOwogICAgICB9LCBMdC5fJHRTID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICAgICBmb3IgKHZhciBlID0gdCAtIGk7IGUgPCAtTWF0aC5QSTspIHsKICAgICAgICAgIGUgKz0gMiAqIE1hdGguUEk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKDsgZSA+IE1hdGguUEk7KSB7CiAgICAgICAgICBlIC09IDIgKiBNYXRoLlBJOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGU7CiAgICAgIH0sIEx0Ll8kOSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIE1hdGguc2luKHQpOwogICAgICB9LCBMdC5mY29zID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gTWF0aC5jb3ModCk7CiAgICAgIH0sIE10LnByb3RvdHlwZS5fJHUyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kSVNbMF07CiAgICAgIH0sIE10LnByb3RvdHlwZS5fJHlvID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl8kQVQgJiYgIXRoaXMuXyRJU1swXTsKICAgICAgfSwgTXQucHJvdG90eXBlLl8kR1QgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuXyRlMDsKICAgICAgfSwgRXQuXyRXMiA9IDAsIEV0LlNZU1RFTV9JTkZPID0gbnVsbCwgRXQuVVNFUl9BR0VOVCA9IG5hdmlnYXRvci51c2VyQWdlbnQsIEV0LmlzSVBob25lID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBFdC5TWVNURU1fSU5GTyB8fCBFdC5zZXR1cCgpLCBFdC5TWVNURU1fSU5GTy5faXNJUGhvbmU7CiAgICAgIH0sIEV0LmlzSU9TID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBFdC5TWVNURU1fSU5GTyB8fCBFdC5zZXR1cCgpLCBFdC5TWVNURU1fSU5GTy5faXNJUGhvbmUgfHwgRXQuU1lTVEVNX0lORk8uX2lzSVBhZDsKICAgICAgfSwgRXQuaXNBbmRyb2lkID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBFdC5TWVNURU1fSU5GTyB8fCBFdC5zZXR1cCgpLCBFdC5TWVNURU1fSU5GTy5faXNBbmRyb2lkOwogICAgICB9LCBFdC5nZXRPU1ZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIEV0LlNZU1RFTV9JTkZPIHx8IEV0LnNldHVwKCksIEV0LlNZU1RFTV9JTkZPLnZlcnNpb247CiAgICAgIH0sIEV0LmdldE9TID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBFdC5TWVNURU1fSU5GTyB8fCBFdC5zZXR1cCgpLCBFdC5TWVNURU1fSU5GTy5faXNJUGhvbmUgfHwgRXQuU1lTVEVNX0lORk8uX2lzSVBhZCA/ICJpT1MiIDogRXQuU1lTVEVNX0lORk8uX2lzQW5kcm9pZCA/ICJBbmRyb2lkIiA6ICJfJFEwIE9TIjsKICAgICAgfSwgRXQuc2V0dXAgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gdCh0LCBpKSB7CiAgICAgICAgICBmb3IgKHZhciBlID0gdC5zdWJzdHJpbmcoaSkuc3BsaXQoL1sgXyw7XC5dLyksIHIgPSAwLCBvID0gMDsgbyA8PSAyICYmICFpc05hTihlW29dKTsgbysrKSB7CiAgICAgICAgICAgIHZhciBuID0gcGFyc2VJbnQoZVtvXSk7CgogICAgICAgICAgICBpZiAobiA8IDAgfHwgbiA+IDk5OSkgewogICAgICAgICAgICAgIF8uXyRsaSgiZXJyIDogIiArIG4gKyAiIEBVdEh0bWw1LnNldHVwKCkiKSwgciA9IDA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHIgKz0gbiAqIE1hdGgucG93KDFlMywgMiAtIG8pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiByOwogICAgICAgIH0KCiAgICAgICAgdmFyIGksCiAgICAgICAgICAgIGUgPSBFdC5VU0VSX0FHRU5ULAogICAgICAgICAgICByID0gRXQuU1lTVEVNX0lORk8gPSB7CiAgICAgICAgICB1c2VyQWdlbnQ6IGUKICAgICAgICB9OwogICAgICAgIGlmICgoaSA9IGUuaW5kZXhPZigiaVBob25lIE9TICIpKSA+PSAwKSByLm9zID0gImlQaG9uZSIsIHIuX2lzSVBob25lID0gITAsIHIudmVyc2lvbiA9IHQoZSwgaSArICJpUGhvbmUgT1MgIi5sZW5ndGgpO2Vsc2UgaWYgKChpID0gZS5pbmRleE9mKCJpUGFkIikpID49IDApIHsKICAgICAgICAgIGlmICgoaSA9IGUuaW5kZXhPZigiQ1BVIE9TIikpIDwgMCkgcmV0dXJuIHZvaWQgXy5fJGxpKCIgZXJyIDogIiArIGUgKyAiIEBVdEh0bWw1LnNldHVwKCkiKTsKICAgICAgICAgIHIub3MgPSAiaVBhZCIsIHIuX2lzSVBhZCA9ICEwLCByLnZlcnNpb24gPSB0KGUsIGkgKyAiQ1BVIE9TICIubGVuZ3RoKTsKICAgICAgICB9IGVsc2UgKGkgPSBlLmluZGV4T2YoIkFuZHJvaWQiKSkgPj0gMCA/IChyLm9zID0gIkFuZHJvaWQiLCByLl9pc0FuZHJvaWQgPSAhMCwgci52ZXJzaW9uID0gdChlLCBpICsgIkFuZHJvaWQgIi5sZW5ndGgpKSA6IChyLm9zID0gIi0iLCByLnZlcnNpb24gPSAtMSk7CiAgICAgIH0sIHdpbmRvdy5VdFN5c3RlbSA9IHcsIHdpbmRvdy5VdERlYnVnID0gXywgd2luZG93LkxEVHJhbnNmb3JtID0gZ3QsIHdpbmRvdy5MREdMID0gbnQsIHdpbmRvdy5MaXZlMkQgPSBhdCwgd2luZG93LkxpdmUyRE1vZGVsV2ViR0wgPSBmdCwgd2luZG93LkxpdmUyRE1vZGVsSlMgPSBxLCB3aW5kb3cuTGl2ZTJETW90aW9uID0gSiwgd2luZG93Lk1vdGlvblF1ZXVlTWFuYWdlciA9IGN0LCB3aW5kb3cuUGh5c2ljc0hhaXIgPSBmLCB3aW5kb3cuQU1vdGlvbiA9IHMsIHdpbmRvdy5QYXJ0c0RhdGFJRCA9IGwsIHdpbmRvdy5EcmF3RGF0YUlEID0gYiwgd2luZG93LkJhc2VEYXRhSUQgPSB5dCwgd2luZG93LlBhcmFtSUQgPSB1LCBhdC5pbml0KCk7CiAgICAgIHZhciBBdCA9ICExOwogICAgfSgpOwogIH0pLmNhbGwoaSwgZSg3KSk7Cn0sIGZ1bmN0aW9uICh0LCBpKSB7CiAgdC5leHBvcnRzID0gewogICAgImltcG9ydCI6IGZ1bmN0aW9uIF9pbXBvcnQoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiU3lzdGVtLmltcG9ydCBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdGx5Iik7CiAgICB9CiAgfTsKfSwgZnVuY3Rpb24gKHQsIGksIGUpIHsKICAidXNlIHN0cmljdCI7CgogIGZ1bmN0aW9uIHIodCkgewogICAgcmV0dXJuIHQgJiYgdC5fX2VzTW9kdWxlID8gdCA6IHsKICAgICAgImRlZmF1bHQiOiB0CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gbygpIHsKICAgIHRoaXMubW9kZWxzID0gW10sIHRoaXMuY291bnQgPSAtMSwgdGhpcy5yZWxvYWRGbGcgPSAhMSwgTGl2ZTJELmluaXQoKSwgbi5MaXZlMkRGcmFtZXdvcmsuc2V0UGxhdGZvcm1NYW5hZ2VyKG5ldyBfWyJkZWZhdWx0Il0oKSk7CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaSwgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogITAKICB9KSwgaVsiZGVmYXVsdCJdID0gbzsKCiAgdmFyIG4gPSBlKDApLAogICAgICBzID0gZSg5KSwKICAgICAgXyA9IHIocyksCiAgICAgIGEgPSBlKDEwKSwKICAgICAgaCA9IHIoYSksCiAgICAgIGwgPSBlKDEpLAogICAgICAkID0gcihsKTsKCiAgby5wcm90b3R5cGUuY3JlYXRlTW9kZWwgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdCA9IG5ldyBoWyJkZWZhdWx0Il0oKTsKICAgIHJldHVybiB0aGlzLm1vZGVscy5wdXNoKHQpLCB0OwogIH0sIG8ucHJvdG90eXBlLmNoYW5nZU1vZGVsID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgIGlmICh0aGlzLnJlbG9hZEZsZykgewogICAgICB0aGlzLnJlbG9hZEZsZyA9ICExOwogICAgICB0aGlzLnJlbGVhc2VNb2RlbCgwLCB0KSwgdGhpcy5jcmVhdGVNb2RlbCgpLCB0aGlzLm1vZGVsc1swXS5sb2FkKHQsIGkpOwogICAgfQogIH0sIG8ucHJvdG90eXBlLmdldE1vZGVsID0gZnVuY3Rpb24gKHQpIHsKICAgIHJldHVybiB0ID49IHRoaXMubW9kZWxzLmxlbmd0aCA/IG51bGwgOiB0aGlzLm1vZGVsc1t0XTsKICB9LCBvLnByb3RvdHlwZS5yZWxlYXNlTW9kZWwgPSBmdW5jdGlvbiAodCwgaSkgewogICAgdGhpcy5tb2RlbHMubGVuZ3RoIDw9IHQgfHwgKHRoaXMubW9kZWxzW3RdLnJlbGVhc2UoaSksIGRlbGV0ZSB0aGlzLm1vZGVsc1t0XSwgdGhpcy5tb2RlbHMuc3BsaWNlKHQsIDEpKTsKICB9LCBvLnByb3RvdHlwZS5udW1Nb2RlbHMgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5tb2RlbHMubGVuZ3RoOwogIH0sIG8ucHJvdG90eXBlLnNldERyYWcgPSBmdW5jdGlvbiAodCwgaSkgewogICAgZm9yICh2YXIgZSA9IDA7IGUgPCB0aGlzLm1vZGVscy5sZW5ndGg7IGUrKykgewogICAgICB0aGlzLm1vZGVsc1tlXS5zZXREcmFnKHQsIGkpOwogICAgfQogIH0sIG8ucHJvdG90eXBlLm1heFNjYWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAkWyJkZWZhdWx0Il0uREVCVUdfTE9HICYmIGNvbnNvbGUubG9nKCJNYXggc2NhbGUgZXZlbnQuIik7CgogICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLm1vZGVscy5sZW5ndGg7IHQrKykgewogICAgICB0aGlzLm1vZGVsc1t0XS5zdGFydFJhbmRvbU1vdGlvbigkWyJkZWZhdWx0Il0uTU9USU9OX0dST1VQX1BJTkNIX0lOLCAkWyJkZWZhdWx0Il0uUFJJT1JJVFlfTk9STUFMKTsKICAgIH0KICB9LCBvLnByb3RvdHlwZS5taW5TY2FsZUV2ZW50ID0gZnVuY3Rpb24gKCkgewogICAgJFsiZGVmYXVsdCJdLkRFQlVHX0xPRyAmJiBjb25zb2xlLmxvZygiTWluIHNjYWxlIGV2ZW50LiIpOwoKICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy5tb2RlbHMubGVuZ3RoOyB0KyspIHsKICAgICAgdGhpcy5tb2RlbHNbdF0uc3RhcnRSYW5kb21Nb3Rpb24oJFsiZGVmYXVsdCJdLk1PVElPTl9HUk9VUF9QSU5DSF9PVVQsICRbImRlZmF1bHQiXS5QUklPUklUWV9OT1JNQUwpOwogICAgfQogIH0sIG8ucHJvdG90eXBlLnRhcEV2ZW50ID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgICRbImRlZmF1bHQiXS5ERUJVR19MT0cgJiYgY29uc29sZS5sb2coInRhcEV2ZW50IHZpZXcgeDoiICsgdCArICIgeToiICsgaSk7CgogICAgZm9yICh2YXIgZSA9IDA7IGUgPCB0aGlzLm1vZGVscy5sZW5ndGg7IGUrKykgewogICAgICB0aGlzLm1vZGVsc1tlXS5oaXRUZXN0KCRbImRlZmF1bHQiXS5ISVRfQVJFQV9IRUFELCB0LCBpKSA/ICgkWyJkZWZhdWx0Il0uREVCVUdfTE9HICYmIGNvbnNvbGUubG9nKCJUYXAgZmFjZS4iKSwgdGhpcy5tb2RlbHNbZV0uc2V0UmFuZG9tRXhwcmVzc2lvbigpKSA6IHRoaXMubW9kZWxzW2VdLmhpdFRlc3QoJFsiZGVmYXVsdCJdLkhJVF9BUkVBX0JPRFksIHQsIGkpID8gKCRbImRlZmF1bHQiXS5ERUJVR19MT0cgJiYgY29uc29sZS5sb2coIlRhcCBib2R5LiBtb2RlbHNbIiArIGUgKyAiXSIpLCB0aGlzLm1vZGVsc1tlXS5zdGFydFJhbmRvbU1vdGlvbigkWyJkZWZhdWx0Il0uTU9USU9OX0dST1VQX1RBUF9CT0RZLCAkWyJkZWZhdWx0Il0uUFJJT1JJVFlfTk9STUFMKSkgOiB0aGlzLm1vZGVsc1tlXS5oaXRUZXN0Q3VzdG9tKCJoZWFkIiwgdCwgaSkgPyAoJFsiZGVmYXVsdCJdLkRFQlVHX0xPRyAmJiBjb25zb2xlLmxvZygiVGFwIGZhY2UuIiksIHRoaXMubW9kZWxzW2VdLnN0YXJ0UmFuZG9tTW90aW9uKCRbImRlZmF1bHQiXS5NT1RJT05fR1JPVVBfRkxJQ0tfSEVBRCwgJFsiZGVmYXVsdCJdLlBSSU9SSVRZX05PUk1BTCkpIDogdGhpcy5tb2RlbHNbZV0uaGl0VGVzdEN1c3RvbSgiYm9keSIsIHQsIGkpICYmICgkWyJkZWZhdWx0Il0uREVCVUdfTE9HICYmIGNvbnNvbGUubG9nKCJUYXAgYm9keS4gbW9kZWxzWyIgKyBlICsgIl0iKSwgdGhpcy5tb2RlbHNbZV0uc3RhcnRSYW5kb21Nb3Rpb24oJFsiZGVmYXVsdCJdLk1PVElPTl9HUk9VUF9UQVBfQk9EWSwgJFsiZGVmYXVsdCJdLlBSSU9SSVRZX05PUk1BTCkpOwogICAgfQoKICAgIHJldHVybiAhMDsKICB9Owp9LCBmdW5jdGlvbiAodCwgaSwgZSkgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gcigpIHt9CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiAhMAogIH0pLCBpWyJkZWZhdWx0Il0gPSByOwogIHZhciBvID0gZSgyKTsKICByLnByb3RvdHlwZS5sb2FkQnl0ZXMgPSBmdW5jdGlvbiAodCwgaSkgewogICAgdmFyIGUgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIGUub3BlbigiR0VUIiwgdCwgITApLCBlLnJlc3BvbnNlVHlwZSA9ICJhcnJheWJ1ZmZlciIsIGUub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICBzd2l0Y2ggKGUuc3RhdHVzKSB7CiAgICAgICAgY2FzZSAyMDA6CiAgICAgICAgICBpKGUucmVzcG9uc2UpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gbG9hZCAoIiArIGUuc3RhdHVzICsgIikgOiAiICsgdCk7CiAgICAgIH0KICAgIH0sIGUuc2VuZChudWxsKTsKICB9LCByLnByb3RvdHlwZS5sb2FkU3RyaW5nID0gZnVuY3Rpb24gKHQpIHsKICAgIHRoaXMubG9hZEJ5dGVzKHQsIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiB0OwogICAgfSk7CiAgfSwgci5wcm90b3R5cGUubG9hZExpdmUyRE1vZGVsID0gZnVuY3Rpb24gKHQsIGkpIHsKICAgIHZhciBlID0gbnVsbDsKICAgIHRoaXMubG9hZEJ5dGVzKHQsIGZ1bmN0aW9uICh0KSB7CiAgICAgIGUgPSBMaXZlMkRNb2RlbFdlYkdMLmxvYWRNb2RlbCh0KSwgaShlKTsKICAgIH0pOwogIH0sIHIucHJvdG90eXBlLmxvYWRUZXh0dXJlID0gZnVuY3Rpb24gKHQsIGksIGUsIHIpIHsKICAgIHZhciBuID0gbmV3IEltYWdlKCk7CiAgICBuLmNyb3NzT3JpZ2luID0gIkFub255bW91cyIsIG4uc3JjID0gZTsKICAgIG4ub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9ICgwLCBvLmdldENvbnRleHQpKCksCiAgICAgICAgICBzID0gZS5jcmVhdGVUZXh0dXJlKCk7CiAgICAgIGlmICghcykgcmV0dXJuIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBnZW5lcmF0ZSBnbCB0ZXh0dXJlIG5hbWUuIiksIC0xOwogICAgICAwID09IHQuaXNQcmVtdWx0aXBsaWVkQWxwaGEoKSAmJiBlLnBpeGVsU3RvcmVpKGUuVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMLCAxKSwgZS5waXhlbFN0b3JlaShlLlVOUEFDS19GTElQX1lfV0VCR0wsIDEpLCBlLmFjdGl2ZVRleHR1cmUoZS5URVhUVVJFMCksIGUuYmluZFRleHR1cmUoZS5URVhUVVJFXzJELCBzKSwgZS50ZXhJbWFnZTJEKGUuVEVYVFVSRV8yRCwgMCwgZS5SR0JBLCBlLlJHQkEsIGUuVU5TSUdORURfQllURSwgbiksIGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsIGUuVEVYVFVSRV9NQUdfRklMVEVSLCBlLkxJTkVBUiksIGUudGV4UGFyYW1ldGVyaShlLlRFWFRVUkVfMkQsIGUuVEVYVFVSRV9NSU5fRklMVEVSLCBlLkxJTkVBUl9NSVBNQVBfTkVBUkVTVCksIGUuZ2VuZXJhdGVNaXBtYXAoZS5URVhUVVJFXzJEKSwgdC5zZXRUZXh0dXJlKGksIHMpLCBzID0gbnVsbCwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgciAmJiByKCk7CiAgICB9LCBuLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBsb2FkIGltYWdlIDogIiArIGUpOwogICAgfTsKICB9LCByLnByb3RvdHlwZS5qc29uUGFyc2VGcm9tQnl0ZXMgPSBmdW5jdGlvbiAodCkgewogICAgdmFyIGksCiAgICAgICAgZSA9IG5ldyBVaW50OEFycmF5KHQsIDAsIDMpOwogICAgcmV0dXJuIGkgPSAyMzkgPT0gZVswXSAmJiAxODcgPT0gZVsxXSAmJiAxOTEgPT0gZVsyXSA/IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkodCwgMykpIDogU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheSh0KSksIEpTT04ucGFyc2UoaSk7CiAgfSwgci5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKHQpIHt9Owp9LCBmdW5jdGlvbiAodCwgaSwgZSkgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gcih0KSB7CiAgICByZXR1cm4gdCAmJiB0Ll9fZXNNb2R1bGUgPyB0IDogewogICAgICAiZGVmYXVsdCI6IHQKICAgIH07CiAgfQoKICBmdW5jdGlvbiBvKCkgewogICAgbi5MMkRCYXNlTW9kZWwucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyksIHRoaXMubW9kZWxIb21lRGlyID0gIiIsIHRoaXMubW9kZWxTZXR0aW5nID0gbnVsbCwgdGhpcy50bXBNYXRyaXggPSBbXTsKICB9CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiAhMAogIH0pLCBpWyJkZWZhdWx0Il0gPSBvOwoKICB2YXIgbiA9IGUoMCksCiAgICAgIHMgPSBlKDExKSwKICAgICAgXyA9IHIocyksCiAgICAgIGEgPSBlKDEpLAogICAgICBoID0gcihhKSwKICAgICAgbCA9IGUoMyksCiAgICAgICQgPSByKGwpOwoKICBvLnByb3RvdHlwZSA9IG5ldyBuLkwyREJhc2VNb2RlbCgpLCBvLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKHQsIGksIGUpIHsKICAgIHRoaXMuc2V0VXBkYXRpbmcoITApLCB0aGlzLnNldEluaXRpYWxpemVkKCExKSwgdGhpcy5tb2RlbEhvbWVEaXIgPSBpLnN1YnN0cmluZygwLCBpLmxhc3RJbmRleE9mKCIvIikgKyAxKSwgdGhpcy5tb2RlbFNldHRpbmcgPSBuZXcgX1siZGVmYXVsdCJdKCk7CiAgICB2YXIgciA9IHRoaXM7CiAgICB0aGlzLm1vZGVsU2V0dGluZy5sb2FkTW9kZWxTZXR0aW5nKGksIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHQgPSByLm1vZGVsSG9tZURpciArIHIubW9kZWxTZXR0aW5nLmdldE1vZGVsRmlsZSgpOwogICAgICByLmxvYWRNb2RlbERhdGEodCwgZnVuY3Rpb24gKHQpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHIubW9kZWxTZXR0aW5nLmdldFRleHR1cmVOdW0oKTsgaSsrKSB7CiAgICAgICAgICBpZiAoL15odHRwcz86XC9cL3xeXC9cLy9pLnRlc3Qoci5tb2RlbFNldHRpbmcuZ2V0VGV4dHVyZUZpbGUoaSkpKSB2YXIgbyA9IHIubW9kZWxTZXR0aW5nLmdldFRleHR1cmVGaWxlKGkpO2Vsc2UgdmFyIG8gPSByLm1vZGVsSG9tZURpciArIHIubW9kZWxTZXR0aW5nLmdldFRleHR1cmVGaWxlKGkpOwogICAgICAgICAgci5sb2FkVGV4dHVyZShpLCBvLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChyLmlzVGV4TG9hZGVkKSB7CiAgICAgICAgICAgICAgaWYgKHIubW9kZWxTZXR0aW5nLmdldEV4cHJlc3Npb25OdW0oKSA+IDApIHsKICAgICAgICAgICAgICAgIHIuZXhwcmVzc2lvbnMgPSB7fTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHIubW9kZWxTZXR0aW5nLmdldEV4cHJlc3Npb25OdW0oKTsgdCsrKSB7CiAgICAgICAgICAgICAgICAgIHZhciBpID0gci5tb2RlbFNldHRpbmcuZ2V0RXhwcmVzc2lvbk5hbWUodCksCiAgICAgICAgICAgICAgICAgICAgICBvID0gci5tb2RlbEhvbWVEaXIgKyByLm1vZGVsU2V0dGluZy5nZXRFeHByZXNzaW9uRmlsZSh0KTsKICAgICAgICAgICAgICAgICAgci5sb2FkRXhwcmVzc2lvbihpLCBvKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2Ugci5leHByZXNzaW9uTWFuYWdlciA9IG51bGwsIHIuZXhwcmVzc2lvbnMgPSB7fTsKCiAgICAgICAgICAgICAgaWYgKHIuZXllQmxpbmssIG51bGwgIT0gci5tb2RlbFNldHRpbmcuZ2V0UGh5c2ljc0ZpbGUoKSA/IHIubG9hZFBoeXNpY3Moci5tb2RlbEhvbWVEaXIgKyByLm1vZGVsU2V0dGluZy5nZXRQaHlzaWNzRmlsZSgpKSA6IHIucGh5c2ljcyA9IG51bGwsIG51bGwgIT0gci5tb2RlbFNldHRpbmcuZ2V0UG9zZUZpbGUoKSA/IHIubG9hZFBvc2Uoci5tb2RlbEhvbWVEaXIgKyByLm1vZGVsU2V0dGluZy5nZXRQb3NlRmlsZSgpLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByLnBvc2UudXBkYXRlUGFyYW0oci5saXZlMkRNb2RlbCk7CiAgICAgICAgICAgICAgfSkgOiByLnBvc2UgPSBudWxsLCBudWxsICE9IHIubW9kZWxTZXR0aW5nLmdldExheW91dCgpKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHIubW9kZWxTZXR0aW5nLmdldExheW91dCgpOwogICAgICAgICAgICAgICAgbnVsbCAhPSBuLndpZHRoICYmIHIubW9kZWxNYXRyaXguc2V0V2lkdGgobi53aWR0aCksIG51bGwgIT0gbi5oZWlnaHQgJiYgci5tb2RlbE1hdHJpeC5zZXRIZWlnaHQobi5oZWlnaHQpLCBudWxsICE9IG4ueCAmJiByLm1vZGVsTWF0cml4LnNldFgobi54KSwgbnVsbCAhPSBuLnkgJiYgci5tb2RlbE1hdHJpeC5zZXRZKG4ueSksIG51bGwgIT0gbi5jZW50ZXJfeCAmJiByLm1vZGVsTWF0cml4LmNlbnRlclgobi5jZW50ZXJfeCksIG51bGwgIT0gbi5jZW50ZXJfeSAmJiByLm1vZGVsTWF0cml4LmNlbnRlclkobi5jZW50ZXJfeSksIG51bGwgIT0gbi50b3AgJiYgci5tb2RlbE1hdHJpeC50b3Aobi50b3ApLCBudWxsICE9IG4uYm90dG9tICYmIHIubW9kZWxNYXRyaXguYm90dG9tKG4uYm90dG9tKSwgbnVsbCAhPSBuLmxlZnQgJiYgci5tb2RlbE1hdHJpeC5sZWZ0KG4ubGVmdCksIG51bGwgIT0gbi5yaWdodCAmJiByLm1vZGVsTWF0cml4LnJpZ2h0KG4ucmlnaHQpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKG51bGwgIT0gci5tb2RlbFNldHRpbmcuZ2V0SGl0QXJlYXNDdXN0b20oKSkgewogICAgICAgICAgICAgICAgdmFyIHMgPSByLm1vZGVsU2V0dGluZy5nZXRIaXRBcmVhc0N1c3RvbSgpOwogICAgICAgICAgICAgICAgbnVsbCAhPSBzLmhlYWRfeCAmJiAoaFsiZGVmYXVsdCJdLmhpdF9hcmVhc19jdXN0b21faGVhZF94ID0gcy5oZWFkX3gpLCBudWxsICE9IHMuaGVhZF95ICYmIChoWyJkZWZhdWx0Il0uaGl0X2FyZWFzX2N1c3RvbV9oZWFkX3kgPSBzLmhlYWRfeSksIG51bGwgIT0gcy5ib2R5X3ggJiYgKGhbImRlZmF1bHQiXS5oaXRfYXJlYXNfY3VzdG9tX2JvZHlfeCA9IHMuYm9keV94KSwgbnVsbCAhPSBzLmJvZHlfeSAmJiAoaFsiZGVmYXVsdCJdLmhpdF9hcmVhc19jdXN0b21fYm9keV95ID0gcy5ib2R5X3kpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCByLm1vZGVsU2V0dGluZy5nZXRJbml0UGFyYW1OdW0oKTsgdCsrKSB7CiAgICAgICAgICAgICAgICByLmxpdmUyRE1vZGVsLnNldFBhcmFtRmxvYXQoci5tb2RlbFNldHRpbmcuZ2V0SW5pdFBhcmFtSUQodCksIHIubW9kZWxTZXR0aW5nLmdldEluaXRQYXJhbVZhbHVlKHQpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgci5tb2RlbFNldHRpbmcuZ2V0SW5pdFBhcnRzVmlzaWJsZU51bSgpOyB0KyspIHsKICAgICAgICAgICAgICAgIHIubGl2ZTJETW9kZWwuc2V0UGFydHNPcGFjaXR5KHIubW9kZWxTZXR0aW5nLmdldEluaXRQYXJ0c1Zpc2libGVJRCh0KSwgci5tb2RlbFNldHRpbmcuZ2V0SW5pdFBhcnRzVmlzaWJsZVZhbHVlKHQpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHIubGl2ZTJETW9kZWwuc2F2ZVBhcmFtKCksIHIucHJlbG9hZE1vdGlvbkdyb3VwKGhbImRlZmF1bHQiXS5NT1RJT05fR1JPVVBfSURMRSksIHIucHJlbG9hZE1vdGlvbkdyb3VwKGhbImRlZmF1bHQiXS5NT1RJT05fR1JPVVBfU0xFRVBZKSwgci5tYWluTW90aW9uTWFuYWdlci5zdG9wQWxsTW90aW9ucygpLCByLnNldFVwZGF0aW5nKCExKSwgci5zZXRJbml0aWFsaXplZCghMCksICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfSwgby5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgaSA9IG4uTGl2ZTJERnJhbWV3b3JrLmdldFBsYXRmb3JtTWFuYWdlcigpOwogICAgdC5kZWxldGVUZXh0dXJlKGkudGV4dHVyZSk7CiAgfSwgby5wcm90b3R5cGUucHJlbG9hZE1vdGlvbkdyb3VwID0gZnVuY3Rpb24gKHQpIHsKICAgIGZvciAodmFyIGkgPSB0aGlzLCBlID0gMDsgZSA8IHRoaXMubW9kZWxTZXR0aW5nLmdldE1vdGlvbk51bSh0KTsgZSsrKSB7CiAgICAgIHZhciByID0gdGhpcy5tb2RlbFNldHRpbmcuZ2V0TW90aW9uRmlsZSh0LCBlKTsKICAgICAgdGhpcy5sb2FkTW90aW9uKHIsIHRoaXMubW9kZWxIb21lRGlyICsgciwgZnVuY3Rpb24gKHIpIHsKICAgICAgICByLnNldEZhZGVJbihpLm1vZGVsU2V0dGluZy5nZXRNb3Rpb25GYWRlSW4odCwgZSkpLCByLnNldEZhZGVPdXQoaS5tb2RlbFNldHRpbmcuZ2V0TW90aW9uRmFkZU91dCh0LCBlKSk7CiAgICAgIH0pOwogICAgfQogIH0sIG8ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgIGlmIChudWxsID09IHRoaXMubGl2ZTJETW9kZWwpIHJldHVybiB2b2lkIChoWyJkZWZhdWx0Il0uREVCVUdfTE9HICYmIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byB1cGRhdGUuIikpOwogICAgdmFyIHQgPSBVdFN5c3RlbS5nZXRVc2VyVGltZU1TZWMoKSAtIHRoaXMuc3RhcnRUaW1lTVNlYywKICAgICAgICBpID0gdCAvIDFlMywKICAgICAgICBlID0gMiAqIGkgKiBNYXRoLlBJOwoKICAgIGlmICh0aGlzLm1haW5Nb3Rpb25NYW5hZ2VyLmlzRmluaXNoZWQoKSkgewogICAgICAiMSIgPT09IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oIlNsZWVweSIpID8gdGhpcy5zdGFydFJhbmRvbU1vdGlvbihoWyJkZWZhdWx0Il0uTU9USU9OX0dST1VQX1NMRUVQWSwgaFsiZGVmYXVsdCJdLlBSSU9SSVRZX1NMRUVQWSkgOiB0aGlzLnN0YXJ0UmFuZG9tTW90aW9uKGhbImRlZmF1bHQiXS5NT1RJT05fR1JPVVBfSURMRSwgaFsiZGVmYXVsdCJdLlBSSU9SSVRZX0lETEUpOwogICAgfQoKICAgIHRoaXMubGl2ZTJETW9kZWwubG9hZFBhcmFtKCksIHRoaXMubWFpbk1vdGlvbk1hbmFnZXIudXBkYXRlUGFyYW0odGhpcy5saXZlMkRNb2RlbCkgfHwgbnVsbCAhPSB0aGlzLmV5ZUJsaW5rICYmIHRoaXMuZXllQmxpbmsudXBkYXRlUGFyYW0odGhpcy5saXZlMkRNb2RlbCksIHRoaXMubGl2ZTJETW9kZWwuc2F2ZVBhcmFtKCksIG51bGwgPT0gdGhpcy5leHByZXNzaW9uTWFuYWdlciB8fCBudWxsID09IHRoaXMuZXhwcmVzc2lvbnMgfHwgdGhpcy5leHByZXNzaW9uTWFuYWdlci5pc0ZpbmlzaGVkKCkgfHwgdGhpcy5leHByZXNzaW9uTWFuYWdlci51cGRhdGVQYXJhbSh0aGlzLmxpdmUyRE1vZGVsKSwgdGhpcy5saXZlMkRNb2RlbC5hZGRUb1BhcmFtRmxvYXQoIlBBUkFNX0FOR0xFX1giLCAzMCAqIHRoaXMuZHJhZ1gsIDEpLCB0aGlzLmxpdmUyRE1vZGVsLmFkZFRvUGFyYW1GbG9hdCgiUEFSQU1fQU5HTEVfWSIsIDMwICogdGhpcy5kcmFnWSwgMSksIHRoaXMubGl2ZTJETW9kZWwuYWRkVG9QYXJhbUZsb2F0KCJQQVJBTV9BTkdMRV9aIiwgdGhpcy5kcmFnWCAqIHRoaXMuZHJhZ1kgKiAtMzAsIDEpLCB0aGlzLmxpdmUyRE1vZGVsLmFkZFRvUGFyYW1GbG9hdCgiUEFSQU1fQk9EWV9BTkdMRV9YIiwgMTAgKiB0aGlzLmRyYWdYLCAxKSwgdGhpcy5saXZlMkRNb2RlbC5hZGRUb1BhcmFtRmxvYXQoIlBBUkFNX0VZRV9CQUxMX1giLCB0aGlzLmRyYWdYLCAxKSwgdGhpcy5saXZlMkRNb2RlbC5hZGRUb1BhcmFtRmxvYXQoIlBBUkFNX0VZRV9CQUxMX1kiLCB0aGlzLmRyYWdZLCAxKSwgdGhpcy5saXZlMkRNb2RlbC5hZGRUb1BhcmFtRmxvYXQoIlBBUkFNX0FOR0xFX1giLCBOdW1iZXIoMTUgKiBNYXRoLnNpbihlIC8gNi41MzQ1KSksIC41KSwgdGhpcy5saXZlMkRNb2RlbC5hZGRUb1BhcmFtRmxvYXQoIlBBUkFNX0FOR0xFX1kiLCBOdW1iZXIoOCAqIE1hdGguc2luKGUgLyAzLjUzNDUpKSwgLjUpLCB0aGlzLmxpdmUyRE1vZGVsLmFkZFRvUGFyYW1GbG9hdCgiUEFSQU1fQU5HTEVfWiIsIE51bWJlcigxMCAqIE1hdGguc2luKGUgLyA1LjUzNDUpKSwgLjUpLCB0aGlzLmxpdmUyRE1vZGVsLmFkZFRvUGFyYW1GbG9hdCgiUEFSQU1fQk9EWV9BTkdMRV9YIiwgTnVtYmVyKDQgKiBNYXRoLnNpbihlIC8gMTUuNTM0NSkpLCAuNSksIHRoaXMubGl2ZTJETW9kZWwuc2V0UGFyYW1GbG9hdCgiUEFSQU1fQlJFQVRIIiwgTnVtYmVyKC41ICsgLjUgKiBNYXRoLnNpbihlIC8gMy4yMzQ1KSksIDEpLCBudWxsICE9IHRoaXMucGh5c2ljcyAmJiB0aGlzLnBoeXNpY3MudXBkYXRlUGFyYW0odGhpcy5saXZlMkRNb2RlbCksIG51bGwgPT0gdGhpcy5saXBTeW5jICYmIHRoaXMubGl2ZTJETW9kZWwuc2V0UGFyYW1GbG9hdCgiUEFSQU1fTU9VVEhfT1BFTl9ZIiwgdGhpcy5saXBTeW5jVmFsdWUpLCBudWxsICE9IHRoaXMucG9zZSAmJiB0aGlzLnBvc2UudXBkYXRlUGFyYW0odGhpcy5saXZlMkRNb2RlbCksIHRoaXMubGl2ZTJETW9kZWwudXBkYXRlKCk7CiAgfSwgby5wcm90b3R5cGUuc2V0UmFuZG9tRXhwcmVzc2lvbiA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciB0ID0gW107CgogICAgZm9yICh2YXIgaSBpbiB0aGlzLmV4cHJlc3Npb25zKSB7CiAgICAgIHQucHVzaChpKTsKICAgIH0KCiAgICB2YXIgZSA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiB0Lmxlbmd0aCk7CiAgICB0aGlzLnNldEV4cHJlc3Npb24odFtlXSk7CiAgfSwgby5wcm90b3R5cGUuc3RhcnRSYW5kb21Nb3Rpb24gPSBmdW5jdGlvbiAodCwgaSkgewogICAgdmFyIGUgPSB0aGlzLm1vZGVsU2V0dGluZy5nZXRNb3Rpb25OdW0odCksCiAgICAgICAgciA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiBlKTsKICAgIHRoaXMuc3RhcnRNb3Rpb24odCwgciwgaSk7CiAgfSwgby5wcm90b3R5cGUuc3RhcnRNb3Rpb24gPSBmdW5jdGlvbiAodCwgaSwgZSkgewogICAgdmFyIHIgPSB0aGlzLm1vZGVsU2V0dGluZy5nZXRNb3Rpb25GaWxlKHQsIGkpOwogICAgaWYgKG51bGwgPT0gciB8fCAiIiA9PSByKSByZXR1cm4gdm9pZCAoaFsiZGVmYXVsdCJdLkRFQlVHX0xPRyAmJiBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gbW90aW9uLiIpKTsKICAgIGlmIChlID09IGhbImRlZmF1bHQiXS5QUklPUklUWV9GT1JDRSkgdGhpcy5tYWluTW90aW9uTWFuYWdlci5zZXRSZXNlcnZlUHJpb3JpdHkoZSk7ZWxzZSBpZiAoIXRoaXMubWFpbk1vdGlvbk1hbmFnZXIucmVzZXJ2ZU1vdGlvbihlKSkgcmV0dXJuIHZvaWQgKGhbImRlZmF1bHQiXS5ERUJVR19MT0cgJiYgY29uc29sZS5sb2coIk1vdGlvbiBpcyBydW5uaW5nLiIpKTsKICAgIHZhciBvLAogICAgICAgIG4gPSB0aGlzOwogICAgbnVsbCA9PSB0aGlzLm1vdGlvbnNbdF0gPyB0aGlzLmxvYWRNb3Rpb24obnVsbCwgdGhpcy5tb2RlbEhvbWVEaXIgKyByLCBmdW5jdGlvbiAocikgewogICAgICBvID0gciwgbi5zZXRGYWRlSW5GYWRlT3V0KHQsIGksIGUsIG8pOwogICAgfSkgOiAobyA9IHRoaXMubW90aW9uc1t0XSwgbi5zZXRGYWRlSW5GYWRlT3V0KHQsIGksIGUsIG8pKTsKICB9LCBvLnByb3RvdHlwZS5zZXRGYWRlSW5GYWRlT3V0ID0gZnVuY3Rpb24gKHQsIGksIGUsIHIpIHsKICAgIHZhciBvID0gdGhpcy5tb2RlbFNldHRpbmcuZ2V0TW90aW9uRmlsZSh0LCBpKTsKICAgIGlmIChyLnNldEZhZGVJbih0aGlzLm1vZGVsU2V0dGluZy5nZXRNb3Rpb25GYWRlSW4odCwgaSkpLCByLnNldEZhZGVPdXQodGhpcy5tb2RlbFNldHRpbmcuZ2V0TW90aW9uRmFkZU91dCh0LCBpKSksIGhbImRlZmF1bHQiXS5ERUJVR19MT0cgJiYgY29uc29sZS5sb2coIlN0YXJ0IG1vdGlvbiA6ICIgKyBvKSwgbnVsbCA9PSB0aGlzLm1vZGVsU2V0dGluZy5nZXRNb3Rpb25Tb3VuZCh0LCBpKSkgdGhpcy5tYWluTW90aW9uTWFuYWdlci5zdGFydE1vdGlvblByaW8ociwgZSk7ZWxzZSB7CiAgICAgIHZhciBuID0gdGhpcy5tb2RlbFNldHRpbmcuZ2V0TW90aW9uU291bmQodCwgaSksCiAgICAgICAgICBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYXVkaW8iKTsKICAgICAgcy5zcmMgPSB0aGlzLm1vZGVsSG9tZURpciArIG4sIGhbImRlZmF1bHQiXS5ERUJVR19MT0cgJiYgY29uc29sZS5sb2coIlN0YXJ0IHNvdW5kIDogIiArIG4pLCBzLnBsYXkoKSwgdGhpcy5tYWluTW90aW9uTWFuYWdlci5zdGFydE1vdGlvblByaW8ociwgZSk7CiAgICB9CiAgfSwgby5wcm90b3R5cGUuc2V0RXhwcmVzc2lvbiA9IGZ1bmN0aW9uICh0KSB7CiAgICB2YXIgaSA9IHRoaXMuZXhwcmVzc2lvbnNbdF07CiAgICBoWyJkZWZhdWx0Il0uREVCVUdfTE9HICYmIGNvbnNvbGUubG9nKCJFeHByZXNzaW9uIDogIiArIHQpLCB0aGlzLmV4cHJlc3Npb25NYW5hZ2VyLnN0YXJ0TW90aW9uKGksICExKTsKICB9LCBvLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKHQpIHsKICAgICRbImRlZmF1bHQiXS5wdXNoKCksICRbImRlZmF1bHQiXS5tdWx0TWF0cml4KHRoaXMubW9kZWxNYXRyaXguZ2V0QXJyYXkoKSksIHRoaXMudG1wTWF0cml4ID0gJFsiZGVmYXVsdCJdLmdldE1hdHJpeCgpLCB0aGlzLmxpdmUyRE1vZGVsLnNldE1hdHJpeCh0aGlzLnRtcE1hdHJpeCksIHRoaXMubGl2ZTJETW9kZWwuZHJhdygpLCAkWyJkZWZhdWx0Il0ucG9wKCk7CiAgfSwgby5wcm90b3R5cGUuaGl0VGVzdCA9IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICBmb3IgKHZhciByID0gdGhpcy5tb2RlbFNldHRpbmcuZ2V0SGl0QXJlYU51bSgpLCBvID0gMDsgbyA8IHI7IG8rKykgewogICAgICBpZiAodCA9PSB0aGlzLm1vZGVsU2V0dGluZy5nZXRIaXRBcmVhTmFtZShvKSkgewogICAgICAgIHZhciBuID0gdGhpcy5tb2RlbFNldHRpbmcuZ2V0SGl0QXJlYUlEKG8pOwogICAgICAgIHJldHVybiB0aGlzLmhpdFRlc3RTaW1wbGUobiwgaSwgZSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gITE7CiAgfSwgby5wcm90b3R5cGUuaGl0VGVzdEN1c3RvbSA9IGZ1bmN0aW9uICh0LCBpLCBlKSB7CiAgICByZXR1cm4gImhlYWQiID09IHQgPyB0aGlzLmhpdFRlc3RTaW1wbGVDdXN0b20oaFsiZGVmYXVsdCJdLmhpdF9hcmVhc19jdXN0b21faGVhZF94LCBoWyJkZWZhdWx0Il0uaGl0X2FyZWFzX2N1c3RvbV9oZWFkX3ksIGksIGUpIDogImJvZHkiID09IHQgJiYgdGhpcy5oaXRUZXN0U2ltcGxlQ3VzdG9tKGhbImRlZmF1bHQiXS5oaXRfYXJlYXNfY3VzdG9tX2JvZHlfeCwgaFsiZGVmYXVsdCJdLmhpdF9hcmVhc19jdXN0b21fYm9keV95LCBpLCBlKTsKICB9Owp9LCBmdW5jdGlvbiAodCwgaSwgZSkgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gcigpIHsKICAgIHRoaXMuTkFNRSA9ICJuYW1lIiwgdGhpcy5JRCA9ICJpZCIsIHRoaXMuTU9ERUwgPSAibW9kZWwiLCB0aGlzLlRFWFRVUkVTID0gInRleHR1cmVzIiwgdGhpcy5ISVRfQVJFQVMgPSAiaGl0X2FyZWFzIiwgdGhpcy5QSFlTSUNTID0gInBoeXNpY3MiLCB0aGlzLlBPU0UgPSAicG9zZSIsIHRoaXMuRVhQUkVTU0lPTlMgPSAiZXhwcmVzc2lvbnMiLCB0aGlzLk1PVElPTl9HUk9VUFMgPSAibW90aW9ucyIsIHRoaXMuU09VTkQgPSAic291bmQiLCB0aGlzLkZBREVfSU4gPSAiZmFkZV9pbiIsIHRoaXMuRkFERV9PVVQgPSAiZmFkZV9vdXQiLCB0aGlzLkxBWU9VVCA9ICJsYXlvdXQiLCB0aGlzLkhJVF9BUkVBU19DVVNUT00gPSAiaGl0X2FyZWFzX2N1c3RvbSIsIHRoaXMuSU5JVF9QQVJBTSA9ICJpbml0X3BhcmFtIiwgdGhpcy5JTklUX1BBUlRTX1ZJU0lCTEUgPSAiaW5pdF9wYXJ0c192aXNpYmxlIiwgdGhpcy5WQUxVRSA9ICJ2YWwiLCB0aGlzLkZJTEUgPSAiZmlsZSIsIHRoaXMuanNvbiA9IHt9OwogIH0KCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGksICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6ICEwCiAgfSksIGlbImRlZmF1bHQiXSA9IHI7CiAgdmFyIG8gPSBlKDApOwogIHIucHJvdG90eXBlLmxvYWRNb2RlbFNldHRpbmcgPSBmdW5jdGlvbiAodCwgaSkgewogICAgdmFyIGUgPSB0aGlzOwogICAgby5MaXZlMkRGcmFtZXdvcmsuZ2V0UGxhdGZvcm1NYW5hZ2VyKCkubG9hZEJ5dGVzKHQsIGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciByID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheSh0KSk7CiAgICAgIGUuanNvbiA9IEpTT04ucGFyc2UociksIGkoKTsKICAgIH0pOwogIH0sIHIucHJvdG90eXBlLmdldFRleHR1cmVGaWxlID0gZnVuY3Rpb24gKHQpIHsKICAgIHJldHVybiBudWxsID09IHRoaXMuanNvblt0aGlzLlRFWFRVUkVTXSB8fCBudWxsID09IHRoaXMuanNvblt0aGlzLlRFWFRVUkVTXVt0XSA/IG51bGwgOiB0aGlzLmpzb25bdGhpcy5URVhUVVJFU11bdF07CiAgfSwgci5wcm90b3R5cGUuZ2V0TW9kZWxGaWxlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuanNvblt0aGlzLk1PREVMXTsKICB9LCByLnByb3RvdHlwZS5nZXRUZXh0dXJlTnVtID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIG51bGwgPT0gdGhpcy5qc29uW3RoaXMuVEVYVFVSRVNdID8gMCA6IHRoaXMuanNvblt0aGlzLlRFWFRVUkVTXS5sZW5ndGg7CiAgfSwgci5wcm90b3R5cGUuZ2V0SGl0QXJlYU51bSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBudWxsID09IHRoaXMuanNvblt0aGlzLkhJVF9BUkVBU10gPyAwIDogdGhpcy5qc29uW3RoaXMuSElUX0FSRUFTXS5sZW5ndGg7CiAgfSwgci5wcm90b3R5cGUuZ2V0SGl0QXJlYUlEID0gZnVuY3Rpb24gKHQpIHsKICAgIHJldHVybiBudWxsID09IHRoaXMuanNvblt0aGlzLkhJVF9BUkVBU10gfHwgbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5ISVRfQVJFQVNdW3RdID8gbnVsbCA6IHRoaXMuanNvblt0aGlzLkhJVF9BUkVBU11bdF1bdGhpcy5JRF07CiAgfSwgci5wcm90b3R5cGUuZ2V0SGl0QXJlYU5hbWUgPSBmdW5jdGlvbiAodCkgewogICAgcmV0dXJuIG51bGwgPT0gdGhpcy5qc29uW3RoaXMuSElUX0FSRUFTXSB8fCBudWxsID09IHRoaXMuanNvblt0aGlzLkhJVF9BUkVBU11bdF0gPyBudWxsIDogdGhpcy5qc29uW3RoaXMuSElUX0FSRUFTXVt0XVt0aGlzLk5BTUVdOwogIH0sIHIucHJvdG90eXBlLmdldFBoeXNpY3NGaWxlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuanNvblt0aGlzLlBIWVNJQ1NdOwogIH0sIHIucHJvdG90eXBlLmdldFBvc2VGaWxlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuanNvblt0aGlzLlBPU0VdOwogIH0sIHIucHJvdG90eXBlLmdldEV4cHJlc3Npb25OdW0gPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5FWFBSRVNTSU9OU10gPyAwIDogdGhpcy5qc29uW3RoaXMuRVhQUkVTU0lPTlNdLmxlbmd0aDsKICB9LCByLnByb3RvdHlwZS5nZXRFeHByZXNzaW9uRmlsZSA9IGZ1bmN0aW9uICh0KSB7CiAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5FWFBSRVNTSU9OU10gPyBudWxsIDogdGhpcy5qc29uW3RoaXMuRVhQUkVTU0lPTlNdW3RdW3RoaXMuRklMRV07CiAgfSwgci5wcm90b3R5cGUuZ2V0RXhwcmVzc2lvbk5hbWUgPSBmdW5jdGlvbiAodCkgewogICAgcmV0dXJuIG51bGwgPT0gdGhpcy5qc29uW3RoaXMuRVhQUkVTU0lPTlNdID8gbnVsbCA6IHRoaXMuanNvblt0aGlzLkVYUFJFU1NJT05TXVt0XVt0aGlzLk5BTUVdOwogIH0sIHIucHJvdG90eXBlLmdldExheW91dCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmpzb25bdGhpcy5MQVlPVVRdOwogIH0sIHIucHJvdG90eXBlLmdldEhpdEFyZWFzQ3VzdG9tID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuanNvblt0aGlzLkhJVF9BUkVBU19DVVNUT01dOwogIH0sIHIucHJvdG90eXBlLmdldEluaXRQYXJhbU51bSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBudWxsID09IHRoaXMuanNvblt0aGlzLklOSVRfUEFSQU1dID8gMCA6IHRoaXMuanNvblt0aGlzLklOSVRfUEFSQU1dLmxlbmd0aDsKICB9LCByLnByb3RvdHlwZS5nZXRNb3Rpb25OdW0gPSBmdW5jdGlvbiAodCkgewogICAgcmV0dXJuIG51bGwgPT0gdGhpcy5qc29uW3RoaXMuTU9USU9OX0dST1VQU10gfHwgbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5NT1RJT05fR1JPVVBTXVt0XSA/IDAgOiB0aGlzLmpzb25bdGhpcy5NT1RJT05fR1JPVVBTXVt0XS5sZW5ndGg7CiAgfSwgci5wcm90b3R5cGUuZ2V0TW90aW9uRmlsZSA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5NT1RJT05fR1JPVVBTXSB8fCBudWxsID09IHRoaXMuanNvblt0aGlzLk1PVElPTl9HUk9VUFNdW3RdIHx8IG51bGwgPT0gdGhpcy5qc29uW3RoaXMuTU9USU9OX0dST1VQU11bdF1baV0gPyBudWxsIDogdGhpcy5qc29uW3RoaXMuTU9USU9OX0dST1VQU11bdF1baV1bdGhpcy5GSUxFXTsKICB9LCByLnByb3RvdHlwZS5nZXRNb3Rpb25Tb3VuZCA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5NT1RJT05fR1JPVVBTXSB8fCBudWxsID09IHRoaXMuanNvblt0aGlzLk1PVElPTl9HUk9VUFNdW3RdIHx8IG51bGwgPT0gdGhpcy5qc29uW3RoaXMuTU9USU9OX0dST1VQU11bdF1baV0gfHwgbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5NT1RJT05fR1JPVVBTXVt0XVtpXVt0aGlzLlNPVU5EXSA/IG51bGwgOiB0aGlzLmpzb25bdGhpcy5NT1RJT05fR1JPVVBTXVt0XVtpXVt0aGlzLlNPVU5EXTsKICB9LCByLnByb3RvdHlwZS5nZXRNb3Rpb25GYWRlSW4gPSBmdW5jdGlvbiAodCwgaSkgewogICAgcmV0dXJuIG51bGwgPT0gdGhpcy5qc29uW3RoaXMuTU9USU9OX0dST1VQU10gfHwgbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5NT1RJT05fR1JPVVBTXVt0XSB8fCBudWxsID09IHRoaXMuanNvblt0aGlzLk1PVElPTl9HUk9VUFNdW3RdW2ldIHx8IG51bGwgPT0gdGhpcy5qc29uW3RoaXMuTU9USU9OX0dST1VQU11bdF1baV1bdGhpcy5GQURFX0lOXSA/IDFlMyA6IHRoaXMuanNvblt0aGlzLk1PVElPTl9HUk9VUFNdW3RdW2ldW3RoaXMuRkFERV9JTl07CiAgfSwgci5wcm90b3R5cGUuZ2V0TW90aW9uRmFkZU91dCA9IGZ1bmN0aW9uICh0LCBpKSB7CiAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5NT1RJT05fR1JPVVBTXSB8fCBudWxsID09IHRoaXMuanNvblt0aGlzLk1PVElPTl9HUk9VUFNdW3RdIHx8IG51bGwgPT0gdGhpcy5qc29uW3RoaXMuTU9USU9OX0dST1VQU11bdF1baV0gfHwgbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5NT1RJT05fR1JPVVBTXVt0XVtpXVt0aGlzLkZBREVfT1VUXSA/IDFlMyA6IHRoaXMuanNvblt0aGlzLk1PVElPTl9HUk9VUFNdW3RdW2ldW3RoaXMuRkFERV9PVVRdOwogIH0sIHIucHJvdG90eXBlLmdldEluaXRQYXJhbUlEID0gZnVuY3Rpb24gKHQpIHsKICAgIHJldHVybiBudWxsID09IHRoaXMuanNvblt0aGlzLklOSVRfUEFSQU1dIHx8IG51bGwgPT0gdGhpcy5qc29uW3RoaXMuSU5JVF9QQVJBTV1bdF0gPyBudWxsIDogdGhpcy5qc29uW3RoaXMuSU5JVF9QQVJBTV1bdF1bdGhpcy5JRF07CiAgfSwgci5wcm90b3R5cGUuZ2V0SW5pdFBhcmFtVmFsdWUgPSBmdW5jdGlvbiAodCkgewogICAgcmV0dXJuIG51bGwgPT0gdGhpcy5qc29uW3RoaXMuSU5JVF9QQVJBTV0gfHwgbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5JTklUX1BBUkFNXVt0XSA/IE5hTiA6IHRoaXMuanNvblt0aGlzLklOSVRfUEFSQU1dW3RdW3RoaXMuVkFMVUVdOwogIH0sIHIucHJvdG90eXBlLmdldEluaXRQYXJ0c1Zpc2libGVOdW0gPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5JTklUX1BBUlRTX1ZJU0lCTEVdID8gMCA6IHRoaXMuanNvblt0aGlzLklOSVRfUEFSVFNfVklTSUJMRV0ubGVuZ3RoOwogIH0sIHIucHJvdG90eXBlLmdldEluaXRQYXJ0c1Zpc2libGVJRCA9IGZ1bmN0aW9uICh0KSB7CiAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5JTklUX1BBUlRTX1ZJU0lCTEVdIHx8IG51bGwgPT0gdGhpcy5qc29uW3RoaXMuSU5JVF9QQVJUU19WSVNJQkxFXVt0XSA/IG51bGwgOiB0aGlzLmpzb25bdGhpcy5JTklUX1BBUlRTX1ZJU0lCTEVdW3RdW3RoaXMuSURdOwogIH0sIHIucHJvdG90eXBlLmdldEluaXRQYXJ0c1Zpc2libGVWYWx1ZSA9IGZ1bmN0aW9uICh0KSB7CiAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmpzb25bdGhpcy5JTklUX1BBUlRTX1ZJU0lCTEVdIHx8IG51bGwgPT0gdGhpcy5qc29uW3RoaXMuSU5JVF9QQVJUU19WSVNJQkxFXVt0XSA/IE5hTiA6IHRoaXMuanNvblt0aGlzLklOSVRfUEFSVFNfVklTSUJMRV1bdF1bdGhpcy5WQUxVRV07CiAgfTsKfV0pOw=="},null]}