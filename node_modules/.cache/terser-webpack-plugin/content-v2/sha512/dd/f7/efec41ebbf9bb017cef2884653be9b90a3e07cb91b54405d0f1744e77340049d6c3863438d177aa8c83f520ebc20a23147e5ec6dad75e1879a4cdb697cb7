{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{516:function(s,a,e){\"use strict\";e.r(a);var t=e(4),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[e(\"p\",[s._v(\"[TOC]\")]),s._v(\" \"),e(\"h1\",{attrs:{id:\"docker学习之路\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker学习之路\"}},[s._v(\"#\")]),s._v(\" Docker学习之路\")]),s._v(\" \"),e(\"h2\",{attrs:{id:\"centos8上安装docker\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#centos8上安装docker\"}},[s._v(\"#\")]),s._v(\" Centos8上安装Docker\")]),s._v(\" \"),e(\"h3\",{attrs:{id:\"docker版本要求\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker版本要求\"}},[s._v(\"#\")]),s._v(\" Docker版本要求\")]),s._v(\" \"),e(\"p\",[s._v(\"1、要求 CentOs 系统的内核版本高于 3.10，可通过如下指令查看版本\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"uname\")]),s._v(\" -r\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"更新yum\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#更新yum\"}},[s._v(\"#\")]),s._v(\" 更新yum\")]),s._v(\" \"),e(\"p\",[s._v(\"安装docker ce即社区免费版，先安装必要的软件包，安装yum-utils，它提供一个yum-config-manager单元，同时安装的device-mapper-persistent-data和lvm2用于储存设备映射（devicemapper）必须的两个软件包。\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" yum update\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" yum \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" -y yum-utils device-mapper-persistent-data lvm2   \\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\")])]),e(\"p\",[s._v(\"紧接着配置一个稳定（stable）的仓库 ，仓库配置会保存到/etc/yum.repos.d/docker-ce.repo文件中。此处我们使用阿里云。\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"更新Yum安装的相关Docke软件包\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" yum makecache fast\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#会出错\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"出现如下错误：\")]),s._v(\" \"),e(\"p\",[s._v(\"yum makecache: error: argument timer: invalid choice: ‘fast’ (choose from ‘timer’)\")]),s._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"/imag/docker1.png\",alt:\"image-20200716140235904\"}})]),s._v(\" \"),e(\"p\",[s._v(\"更新索引的时候出错，即centos8没有该参数，解决办法为：去掉fast参数\")]),s._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"/imag/docker2.png\",alt:\"image-20200716140315300\"}})]),s._v(\" \"),e(\"h3\",{attrs:{id:\"查看仓库版本-并指定版本安装\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#查看仓库版本-并指定版本安装\"}},[s._v(\"#\")]),s._v(\" 查看仓库版本，并指定版本安装\")]),s._v(\" \"),e(\"p\",[s._v(\"查看版本\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"yum list docker-ce --showduplicates \"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sort\")]),s._v(\" -r\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"安装\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"yum \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" docker-ce-3:19.03.9-3.el7.x86_64\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#会出错\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"出现如下错误：\\nProblem: package docker-ce-3:18.09.9-3.el7.x86_64 requires containerd.io >= 1.2.2-3, but none of the providers can be installed\")]),s._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"/imag/docker3.png\",alt:\"image-20200716140735067\"}})]),s._v(\" \"),e(\"p\",[s._v(\"根据提示，需要containerd.io的版本 >= 1.2.2-3，操作如下\")]),s._v(\" \"),e(\"p\",[s._v(\"（1）安装wget指令\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"yum \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"wget\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"（2）获取rpm包\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"wget\")]),s._v(\" https://download.docker.com/linux/centos/7/x86_64/edge/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"（3）升级containerd.io（安装rpm包）\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"yum -y \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" containerd.io-1.2.6-3.3.el7.x86_64.rpm\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"（4）重新安装docker-ce\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"yum \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" docker-ce-3:19.03.9-3.el7.x86_64\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[e(\"img\",{attrs:{src:\"/imag/docker4.png\",alt:\"image-20200716141504940\"}})]),s._v(\" \"),e(\"h3\",{attrs:{id:\"启动docker\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#启动docker\"}},[s._v(\"#\")]),s._v(\" 启动docker\")]),s._v(\" \"),e(\"p\",[s._v(\"（1）设置开机自启动\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl start docker\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl \"),e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"enable\")]),s._v(\" docker\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\")])]),e(\"p\",[s._v(\"（2）启动\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" systemctl start docker\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"（3）验证\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker version\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[e(\"img\",{attrs:{src:\"/imag/docker5.png\",alt:\"image-20200716141906100\"}})]),s._v(\" \"),e(\"p\",[s._v(\"说明安装成功\")]),s._v(\" \"),e(\"p\",[s._v(\"或者\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" docker \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ps\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[e(\"img\",{attrs:{src:\"/imag/docker6.png\",alt:\"image-20200716142029027\"}})]),s._v(\" \"),e(\"p\",[s._v(\"说明安装成功\")]),s._v(\" \"),e(\"p\",[s._v(\"（4）查看docker运行状态\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"systemctl status docker\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[e(\"img\",{attrs:{src:\"/imag/docker7.png\",alt:\"image-20200716142149912\"}})]),s._v(\" \"),e(\"h2\",{attrs:{id:\"docker常用的命令\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker常用的命令\"}},[s._v(\"#\")]),s._v(\" Docker常用的命令\")]),s._v(\" \"),e(\"h3\",{attrs:{id:\"_1、拉取镜像\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1、拉取镜像\"}},[s._v(\"#\")]),s._v(\" 1、拉取镜像\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker pull ubuntu\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_2、首次启动镜像\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2、首次启动镜像\"}},[s._v(\"#\")]),s._v(\" 2、首次启动镜像\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker run -it --name ubuntu-test ubuntu /bin/bash\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"参数说明：\")]),s._v(\" \"),e(\"ul\",[e(\"li\",[e(\"strong\",[s._v(\"-i\")]),s._v(\": 交互式操作。\")]),s._v(\" \"),e(\"li\",[e(\"strong\",[s._v(\"-t\")]),s._v(\": 终端。\")]),s._v(\" \"),e(\"li\",[e(\"strong\",[s._v(\"-p\")]),s._v(\":端口。\")]),s._v(\" \"),e(\"li\",[e(\"strong\",[s._v(\"-ip\")]),s._v(\":指定IP。\")]),s._v(\" \"),e(\"li\",[e(\"strong\",[s._v(\"-v\")]),s._v(\":数据卷。例如：-v /data:/data:ro。ro为容器只读。\")]),s._v(\" \"),e(\"li\",[e(\"strong\",[s._v(\"--volumes-from\")]),s._v(\":数据卷来自于已有的容器。\")]),s._v(\" \"),e(\"li\",[e(\"strong\",[s._v(\"-name\")]),s._v(\":容器名。\")]),s._v(\" \"),e(\"li\",[e(\"strong\",[s._v(\"ubuntu\")]),s._v(\": ubuntu 镜像。\")]),s._v(\" \"),e(\"li\",[e(\"strong\",[s._v(\"/bin/bash\")]),s._v(\"：放在镜像名后的是命令，这里我们希望有个交互式 Shell，因此用的是 /bin/bash。\")])]),s._v(\" \"),e(\"h3\",{attrs:{id:\"_3、启动已存在容器\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3、启动已存在容器\"}},[s._v(\"#\")]),s._v(\" 3、启动已存在容器\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker start \"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),s._v(\"容器 ID/Name\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\ndocker restart 容器id1 \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"容器id2\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"..\")]),s._v(\".\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"  \"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#重启\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_4、运行的docker容器列表\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4、运行的docker容器列表\"}},[s._v(\"#\")]),s._v(\" 4、运行的docker容器列表\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ps\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ps\")]),s._v(\" –a\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_5、停止容器\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5、停止容器\"}},[s._v(\"#\")]),s._v(\" 5、停止容器\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker stop \"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"<\")]),s._v(\"容器 ID/Name\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_6、进入容器\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6、进入容器\"}},[s._v(\"#\")]),s._v(\" 6、进入容器\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker \"),e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"exec\")]),s._v(\" -it name /bin/bash\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"从这个容器退出，不会导致容器的停止，推荐大家使用\")]),s._v(\" \"),e(\"h3\",{attrs:{id:\"_7、查看容器的某些进程pid\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_7、查看容器的某些进程pid\"}},[s._v(\"#\")]),s._v(\" 7、查看容器的某些进程PID\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"doker \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"top\")]),s._v(\" name\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_8、删除容器\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_8、删除容器\"}},[s._v(\"#\")]),s._v(\" 8、删除容器\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rm\")]),s._v(\" name\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_9、镜像列表\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_9、镜像列表\"}},[s._v(\"#\")]),s._v(\" 9、镜像列表\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker images\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_10、启动所有容器\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_10、启动所有容器\"}},[s._v(\"#\")]),s._v(\" 10、启动所有容器\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker start \"),e(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$(\")]),s._v(\"docker \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ps\")]),s._v(\" -a -q\"),e(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\")\")])]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_11、复制文件到容器\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_11、复制文件到容器\"}},[s._v(\"#\")]),s._v(\" 11、复制文件到容器\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"cp\")]),s._v(\" sentinel.conf redis-master:/usr/local/redis\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_12、创建容器时指定ip\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_12、创建容器时指定ip\"}},[s._v(\"#\")]),s._v(\" 12、创建容器时指定IP\")]),s._v(\" \"),e(\"p\",[s._v(\"Docker创建容器时默认采用bridge网络，自行分配ip，不允许自己指定。\")]),s._v(\" \"),e(\"p\",[s._v(\"在实际部署中，我们需要指定容器ip，不允许其自行分配ip，尤其是搭建集群时，固定ip是必须的。\")]),s._v(\" \"),e(\"p\",[s._v(\"我们可以创建自己的bridge网络 ： mynet，创建容器的时候指定网络为mynet并指定ip即可。\")]),s._v(\" \"),e(\"h4\",{attrs:{id:\"查看网络模式\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#查看网络模式\"}},[s._v(\"#\")]),s._v(\" 查看网络模式\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker network \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ls\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h4\",{attrs:{id:\"创建一个新的bridge网络\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#创建一个新的bridge网络\"}},[s._v(\"#\")]),s._v(\" 创建一个新的bridge网络\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker network create --driver bridge --subnet\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"172.19\")]),s._v(\".0.0/16 --gateway\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"172.19\")]),s._v(\".0.1 dockercompose\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h4\",{attrs:{id:\"查看网络信息\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#查看网络信息\"}},[s._v(\"#\")]),s._v(\" 查看网络信息\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker network inspect dockercompose\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h4\",{attrs:{id:\"创建容器并指定容器ip\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#创建容器并指定容器ip\"}},[s._v(\"#\")]),s._v(\" 创建容器并指定容器ip\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker run -it --name sentinel1 --network\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"dockercompose --ip \"),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"172.19\")]),s._v(\".0.6 -v /data/docker_redis/sentinel/sentinel-slave1.conf:/usr/local/redis/sentinel.conf -d -p \"),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"26380\")]),s._v(\":26379 redis /bin/bash\\n\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_13、创建快照\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_13、创建快照\"}},[s._v(\"#\")]),s._v(\" 13、创建快照\")]),s._v(\" \"),e(\"h4\",{attrs:{id:\"查看现有容器\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#查看现有容器\"}},[s._v(\"#\")]),s._v(\" 查看现有容器\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker ps/docker \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ps\")]),s._v(\" -a\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h4\",{attrs:{id:\"创建容器快照\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#创建容器快照\"}},[s._v(\"#\")]),s._v(\" 创建容器快照\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker \"),e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"export\")]),s._v(\" ID \"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\" test.tar\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h4\",{attrs:{id:\"导入并验证\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#导入并验证\"}},[s._v(\"#\")]),s._v(\" 导入并验证\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"cat\")]),s._v(\" 快照.tar \"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"|\")]),s._v(\" docker \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"import\")]),s._v(\" - centos:latest\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker run -it ID\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"镜像\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" /bin/bash\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h3\",{attrs:{id:\"_14、查看数据卷相关信息\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_14、查看数据卷相关信息\"}},[s._v(\"#\")]),s._v(\" 14、查看数据卷相关信息\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"sdocker inspect -f \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\".Volumes\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\" 容器名\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h2\",{attrs:{id:\"构建容器-nginx为例\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#构建容器-nginx为例\"}},[s._v(\"#\")]),s._v(\" 构建容器（nginx为例）\")]),s._v(\" \"),e(\"h4\",{attrs:{id:\"一、手动构建\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#一、手动构建\"}},[s._v(\"#\")]),s._v(\" 一、手动构建\")]),s._v(\" \"),e(\"h5\",{attrs:{id:\"_1、拉取镜像-2\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1、拉取镜像-2\"}},[s._v(\"#\")]),s._v(\" 1、拉取镜像\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker pull centos\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"_2、启动镜像\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2、启动镜像\"}},[s._v(\"#\")]),s._v(\" 2、启动镜像\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker run --name nginx-man -it centos\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"_3、安装相关依赖包\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3、安装相关依赖包\"}},[s._v(\"#\")]),s._v(\" 3、安装相关依赖包\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"yum \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" -y \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"wget\")]),s._v(\" gcc gcc-c++ \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"make\")]),s._v(\" openssl-devel\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"_4、安装nginx依赖\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4、安装nginx依赖\"}},[s._v(\"#\")]),s._v(\" 4、安装nginx依赖\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"wget\")]),s._v(\" http://nginx.org/download/nginx-1.9.3.tar.gz\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"mv\")]),s._v(\" nginx-1.9.3.tar.gz /usr/local/data/nginx-1.9.3.tar.gz\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /usr/local/data\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"_5、解压\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5、解压\"}},[s._v(\"#\")]),s._v(\" 5、解压\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"tar\")]),s._v(\" -zxf nginx-1.9.3.tar.gz\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"_6、创建www用户\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6、创建www用户\"}},[s._v(\"#\")]),s._v(\" 6、创建www用户\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"useradd\")]),s._v(\" -s /sbin/nologin -M www\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"_7、启动nginx\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_7、启动nginx\"}},[s._v(\"#\")]),s._v(\" 7、启动nginx\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"./configure --prefix\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"/usr/local/data/nginx --user\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"www --group\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"www --with-http_ssl_moudle --with-http_stub_status_module --with-pcre\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"/usr/local/src/pcre-8.37\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"_8、make\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_8、make\"}},[s._v(\"#\")]),s._v(\" 8、make\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"make\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"make\")]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"_9、配置启动容器直接运行nginx\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_9、配置启动容器直接运行nginx\"}},[s._v(\"#\")]),s._v(\" 9、配置启动容器直接运行nginx\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vi\")]),s._v(\" /usr/local/data/nginx/conf/nginx.conf\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#添加,让其在前台运行\")]),s._v(\"\\ndaemon off\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"_10、验证\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_10、验证\"}},[s._v(\"#\")]),s._v(\" 10、验证\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"exit\")]),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#推出容器\")]),s._v(\"\\ndocker commit -m \"),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"my nginx\"')]),s._v(\" 容器ID my-nginx1:vl\\ndoker images\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#发现已经有了新镜像\")]),s._v(\"\\ndocker run -it -p \"),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"92\")]),s._v(\":80 my-nginx1:v1 /usr/local/data/nginx/sbin/nginx\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#可以循环添加想要的容器数量\")]),s._v(\"\\n在浏览器打开IP:92\\n可以看到nginx\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"_11、容器自启\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_11、容器自启\"}},[s._v(\"#\")]),s._v(\" 11、容器自启\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker container update --restart\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"always 容器名\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h4\",{attrs:{id:\"二、dockerfile自动构建\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#二、dockerfile自动构建\"}},[s._v(\"#\")]),s._v(\" 二、Dockerfile自动构建\")]),s._v(\" \"),e(\"ul\",[e(\"li\",[s._v(\"基础镜像信息\")]),s._v(\" \"),e(\"li\",[s._v(\"维护者信息\")]),s._v(\" \"),e(\"li\",[s._v(\"镜像操作命令\")]),s._v(\" \"),e(\"li\",[s._v(\"容器启动时执行指令\")])]),s._v(\" \"),e(\"h5\",{attrs:{id:\"创建文件\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#创建文件\"}},[s._v(\"#\")]),s._v(\" 创建文件\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"mkdir\")]),s._v(\" /opt/docker-file/nginx\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /opt/docker-file/nginx\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"pwd\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"wget\")]),s._v(\" ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.37.tar.gz\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"wget\")]),s._v(\" http://nginx.org/download/nginx-1.9.3.tar.gz\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vim\")]),s._v(\" Dockerfile\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),e(\"br\")])]),e(\"p\",[s._v(\"内容如下：\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-dockerfile line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-dockerfile\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#This is My first Dockerfile\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#base images镜像\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"From\")]),s._v(\" centos\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#MAINTTAINER维护者\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"MAINTAINER\")]),s._v(\" WangScaler\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#ADD 往容器里放东西\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ADD\")]),s._v(\" pcre\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"8.37.tar.gz /usr/lcoal/src\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ADD\")]),s._v(\" nginx\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"1.9.3.tar.gz /usr/local/src\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#RUN 执行指令\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"RUN\")]),s._v(\" yum install wget gcc gcc\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"c++ make openssl\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"devel\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"RUN\")]),s._v(\" useradd \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"s /sbin/nologin \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"M www\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#WORKDIR\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"WORKDIR\")]),s._v(\" /usr/local/src/nginx\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"1.9.3\\nRUN./configure \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"prefix=/usr/local/nginx \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"user=www \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"group=www \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"with\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"http_ssl_moudle \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"with\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"http_stub_status_module \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"with\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"pcre=/usr/local/src/pcre\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"8.37\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"RUN\")]),s._v(\" echo \"),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"daemon off;\"')]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\">\")]),s._v(\"/usr/local/src/nginx/conf/nginx.conf\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#EXPOSE映射端口\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" PATH /usr/local/nginx/sbin\"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"$PATH\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"EXPOSE\")]),s._v(\" 80\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),e(\"br\")])]),e(\"p\",[s._v(\"注意：ADD的文件必须和Dockerfile在同一文件夹下\")]),s._v(\" \"),e(\"h5\",{attrs:{id:\"运行\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#运行\"}},[s._v(\"#\")]),s._v(\" 运行\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker build -t nginx-file:v1 /opt/dockerfile/nginx/\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"p\",[s._v(\"docker image 查看\")]),s._v(\" \"),e(\"h4\",{attrs:{id:\"三、使用dockerfile创建python容器\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#三、使用dockerfile创建python容器\"}},[s._v(\"#\")]),s._v(\" 三、使用Dockerfile创建python容器\")]),s._v(\" \"),e(\"h5\",{attrs:{id:\"编写应用所需要的依赖\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#编写应用所需要的依赖\"}},[s._v(\"#\")]),s._v(\" 编写应用所需要的依赖\")]),s._v(\" \"),e(\"p\",[s._v(\"requirements.txt内容如下\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vim\")]),s._v(\" requirements.txt\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"div\",{staticClass:\"language-python line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-python\"}},[e(\"code\",[s._v(\"WTForms\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2.2\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\".1\")]),s._v(\"\\nWTForms\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\"JSON\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.3\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\".3\")]),s._v(\"\\nwtforms\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\"tornado\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\".2\")]),s._v(\"\\nPyJWT\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1.7\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\".1\")]),s._v(\"\\nredis\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"3.5\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\".1\")]),s._v(\"\\nmotor\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2.1\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\".0\")]),s._v(\"\\ntornado\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"6.0\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\".3\")]),s._v(\"\\ntornado\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\"swagger\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1.2\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\".4\")]),s._v(\"\\npytz\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2020.1\")]),s._v(\"\\npaho\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"-\")]),s._v(\"mqtt\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1.5\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\".0\")]),s._v(\"\\nrequests\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"==\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2.22\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\".0\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"编写dockerfile\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#编写dockerfile\"}},[s._v(\"#\")]),s._v(\" 编写Dockerfile\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vim\")]),s._v(\" Dockerfile\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#This is My first Dockerfile\")]),s._v(\"\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#base images镜像\")]),s._v(\"\\nFROM python:3.7.4\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#MAINTTAINER维护者\")]),s._v(\"\\nMAINTAINER WangScaler\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#ADD 往容器里放东西\")]),s._v(\"\\nADD requirements.txt /usr/local/python-app/requirements.txt\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#RUN 执行指令\")]),s._v(\"\\nWORKDIR /usr/local/python-app\\nRUN pip \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" -r requirements.txt\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#EXPOSE映射端口\")]),s._v(\"\\nEXPOSE \"),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"8090\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"创建镜像\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#创建镜像\"}},[s._v(\"#\")]),s._v(\" 创建镜像\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker build -t python-apps \"),e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\".\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"查看网络模式-2\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#查看网络模式-2\"}},[s._v(\"#\")]),s._v(\" 查看网络模式\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker network \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ls\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"创建一个新的bridge网络-2\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#创建一个新的bridge网络-2\"}},[s._v(\"#\")]),s._v(\" 创建一个新的bridge网络\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker network create --driver bridge --subnet\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"172.19\")]),s._v(\".0.0/16 --gateway\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"172.19\")]),s._v(\".0.1 dockercompose\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"查看网络信息-2\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#查看网络信息-2\"}},[s._v(\"#\")]),s._v(\" 查看网络信息\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker network inspect dockercompose\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"创建容器并指定容器ip-2\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#创建容器并指定容器ip-2\"}},[s._v(\"#\")]),s._v(\" 创建容器并指定容器ip\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\" docker run -it --name python-app --network\"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"dockercompose --ip \"),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"172.19\")]),s._v(\".0.2 -v /usr/local/python-app:/usr/local/python-app -d -p \"),e(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"8090\")]),s._v(\":8090 python-apps /bin/bash\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h5\",{attrs:{id:\"进入容器\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#进入容器\"}},[s._v(\"#\")]),s._v(\" 进入容器\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[s._v(\"docker \"),e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"exec\")]),s._v(\" -it python-app \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"bash\")]),s._v(\"\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"h4\",{attrs:{id:\"四、dockerfile创建python项目镜像\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#四、dockerfile创建python项目镜像\"}},[s._v(\"#\")]),s._v(\" 四、Dockerfile创建python项目镜像\")]),s._v(\" \"),e(\"h5\",{attrs:{id:\"编写dockerfile-2\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#编写dockerfile-2\"}},[s._v(\"#\")]),s._v(\" 编写Dockerfile\")]),s._v(\" \"),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vim\")]),s._v(\" Dockerfile\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\")])]),e(\"div\",{staticClass:\"language-shell line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[e(\"code\",[e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 基于的基础镜像\")]),s._v(\"\\nFROM python:3.6.8\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 维护者信息\")]),s._v(\"\\nMAINTAINER WangScaler@163.com\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 代码添加到code文件夹\")]),s._v(\"\\nADD / /ziot\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 设置code文件夹是工作目录\")]),s._v(\"\\nWORKDIR /ziot\\n\"),e(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 安装支持\")]),s._v(\"\\nRUN \"),e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /ziot \"),e(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"&&\")]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ls\")]),s._v(\"\\nRUN \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ls\")]),s._v(\"\\nRUN pip \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" --user -r /ziot/requirements.txt -i  https://pypi.doubanio.com/simple/\\nRUN python CreateLicense.py 02:42:ac:12:00:02\\nRUN python setup.py\\nRUN python -m compileall -b build/\\nRUN \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"find\")]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\".\")]),s._v(\" -name \"),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"*.py\"')]),s._v(\" -type f -print -exec \"),e(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rm\")]),s._v(\" -rf \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\" \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\nCMD \"),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"python\"')]),s._v(\", \"),e(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"build/server.pyc\"')]),e(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\\n\")])]),s._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),e(\"br\")])]),e(\"p\",[s._v(\"Each instruction creates one layer:\")]),s._v(\" \"),e(\"ul\",[e(\"li\",[e(\"code\",[s._v(\"FROM\")]),s._v(\" creates a layer from the \"),e(\"code\",[s._v(\"ubuntu:18.04\")]),s._v(\" Docker image.\")]),s._v(\" \"),e(\"li\",[e(\"code\",[s._v(\"COPY\")]),s._v(\" adds files from your Docker client’s current directory.\")]),s._v(\" \"),e(\"li\",[e(\"code\",[s._v(\"RUN\")]),s._v(\" builds your application with \"),e(\"code\",[s._v(\"make\")]),s._v(\".\")]),s._v(\" \"),e(\"li\",[e(\"code\",[s._v(\"CMD\")]),s._v(\" specifies what command to run within the container.\")])])])}),[],!1,null,null,null);a.default=n.exports}}]);","extractedComments":[]}